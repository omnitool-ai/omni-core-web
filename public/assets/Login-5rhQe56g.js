var Ch=Object.defineProperty;var Ah=(n,e,t)=>e in n?Ch(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var W=(n,e,t)=>(Ah(n,typeof e!="symbol"?e+"":e,t),t),Oh=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var Vi=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)};var pr=(n,e,t)=>(Oh(n,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var Zw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Il(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Th={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Rh={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ih=/(&amp;|&lt;|&gt;|&quot;|&#39;)/g,Ph=/[&<>"']/g;function Lh(n){return Th[n]}function Mh(n){return Rh[n]}function ps(n){return n==null?"":String(n).replace(Ph,Lh)}function gs(n){return n==null?"":String(n).replace(Ih,Mh)}ps.options=gs.options={};var Pl={encode:ps,escape:ps,decode:gs,unescape:gs,version:"1.0.0-browser"};function Ll(n){for(var e=Array.prototype.slice.call(arguments,1),t,r;e.length;){t=e.shift();for(r in t)t.hasOwnProperty(r)&&(Object.prototype.toString.call(n[r])==="[object Object]"?n[r]=Ll(n[r],t[r]):n[r]=t[r])}return n}var Nh=Ll,Ml=function(e){return typeof e=="string"?e.toLowerCase():e};function Dh(n){return n.reduce($h,{})}function $h(n,e){return n[e]=!0,n}var Nl=Dh,Bh=Nl,Fh=["background","base","cite","href","longdesc","src","usemap"],zh={uris:Bh(Fh)},jh=Nl,Uh=["area","br","col","hr","img","wbr","input","base","basefont","link","meta"],Dl={voids:jh(Uh)},Hh=Pl,ma=Ml,Wh=Dl,qh=/^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/,Vh=/^<\s*\/\s*([\w:-]+)[^>]*>/,Jh=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,Gh=/^</,Kh=/^<\s*\//;function Zh(){var n=[];return n.lastItem=function(){return n[n.length-1]},n}function Yh(n,e){for(var t=Zh(),r=n,i;n;)s();d();function s(){i=!0,o();var f=n===r;r=n,f&&(n="")}function o(){n.substr(0,4)==="<!--"?l():Kh.test(n)?a(Vh,d):Gh.test(n)&&a(qh,u),h()}function a(f,p){var c=n.match(f);c&&(n=n.substring(c[0].length),c[0].replace(f,p),i=!1)}function l(){var f=n.indexOf("-->");f>=0&&(e.comment&&e.comment(n.substring(4,f)),n=n.substring(f+3),i=!1)}function h(){if(i){var f,p=n.indexOf("<");p>=0?(f=n.substring(0,p),n=n.substring(p)):(f=n,n=""),e.chars&&e.chars(f)}}function u(f,p,c,g){var m={},y=ma(p),w=Wh.voids[y]||!!g;c.replace(Jh,_),w||t.push(y),e.start&&e.start(y,m,w);function _(b,v,E,k,D){E===void 0&&k===void 0&&D===void 0?m[v]=void 0:m[v]=Hh.decode(E||k||D||"")}}function d(f,p){var c,g=0,m=ma(p);if(m)for(g=t.length-1;g>=0&&t[g]!==m;g--);if(g>=0){for(c=t.length-1;c>=g;c--)e.end&&e.end(t[c]);t.length=g}}}var Xh=Yh,Qh=Pl,Ji=Ml,ef=zh,tf=Dl;function nf(n,e){var t,r=e||{};return d(),{start:s,end:o,chars:l};function i(f){n.push(f)}function s(f,p,c){var g=Ji(f);if(t.ignoring){h(g);return}if((r.allowedTags||[]).indexOf(g)===-1){h(g);return}if(r.filter&&!r.filter({tag:g,attrs:p})){h(g);return}i("<"),i(g),Object.keys(p).forEach(m),i(c?"/>":">");function m(y){var w=p[y],_=(r.allowedClasses||{})[g]||[],b=(r.allowedAttributes||{})[g]||[],v,E=Ji(y);E==="class"&&b.indexOf(E)===-1?(w=w.split(" ").filter(k).join(" ").trim(),v=w.length):v=b.indexOf(E)!==-1&&(ef.uris[E]!==!0||a(w)),v&&(i(" "),i(y),typeof w=="string"&&(i('="'),i(Qh.encode(w)),i('"')));function k(D){return _&&_.indexOf(D)!==-1}}}function o(f){var p=Ji(f),c=(r.allowedTags||[]).indexOf(p)!==-1;c&&t.ignoring===!1?(i("</"),i(p),i(">")):u(p)}function a(f){var p=f[0];if(p==="#"||p==="/")return!0;var c=f.indexOf(":");if(c===-1)return!0;var g=f.indexOf("?");if(g!==-1&&c>g)return!0;var m=f.indexOf("#");if(m!==-1&&c>m)return!0;return r.allowedSchemes.some(y);function y(w){return f.indexOf(w+":")===0}}function l(f){t.ignoring===!1&&i(r.transformText?r.transformText(f):f)}function h(f){tf.voids[f]||(t.ignoring===!1?t={ignoring:f,depth:1}:t.ignoring===f&&t.depth++)}function u(f){t.ignoring===f&&--t.depth<=0&&d()}function d(){t={ignoring:!1,depth:0}}}var rf=nf,sf={allowedAttributes:{a:["href","name","target","title","aria-label"],iframe:["allowfullscreen","frameborder","src"],img:["src","alt","title","aria-label"]},allowedClasses:{},allowedSchemes:["http","https","mailto"],allowedTags:["a","abbr","article","b","blockquote","br","caption","code","del","details","div","em","h1","h2","h3","h4","h5","h6","hr","i","img","ins","kbd","li","main","mark","ol","p","pre","section","span","strike","strong","sub","summary","sup","table","tbody","td","th","thead","tr","u","ul"],filter:null},of=sf,af=Nh,lf=Xh,cf=rf,$l=of;function Bl(n,e,t){var r=[],i=t===!0?e:af({},$l,e),s=cf(r,i);return lf(n,s),r.join("")}Bl.defaults=$l;var uf=Bl;const gr=Il(uf),mt=new WeakMap,Rt=new WeakMap,ct=new WeakMap;var hf={};const Ur=Symbol("anyProducer"),ya=Promise.resolve(),Hr=Symbol("listenerAdded"),Wr=Symbol("listenerRemoved");let qr=!1,Gi=!1;function tn(n){if(typeof n!="string"&&typeof n!="symbol"&&typeof n!="number")throw new TypeError("`eventName` must be a string, symbol, or number")}function mr(n){if(typeof n!="function")throw new TypeError("listener must be a function")}function nn(n,e){const t=Rt.get(n);if(t.has(e))return t.get(e)}function $n(n,e){const t=typeof e=="string"||typeof e=="symbol"||typeof e=="number"?e:Ur,r=ct.get(n);if(r.has(t))return r.get(t)}function ff(n,e,t){const r=ct.get(n);if(r.has(e))for(const i of r.get(e))i.enqueue(t);if(r.has(Ur)){const i=Promise.all([e,t]);for(const s of r.get(Ur))s.enqueue(i)}}function wa(n,e){e=Array.isArray(e)?e:[e];let t=!1,r=()=>{},i=[];const s={enqueue(o){i.push(o),r()},finish(){t=!0,r()}};for(const o of e){let a=$n(n,o);a||(a=new Set,ct.get(n).set(o,a)),a.add(s)}return{async next(){return i?i.length===0?t?(i=void 0,this.next()):(await new Promise(o=>{r=o}),this.next()):{done:!1,value:await i.shift()}:{done:!0}},async return(o){i=void 0;for(const a of e){const l=$n(n,a);l&&(l.delete(s),l.size===0&&ct.get(n).delete(a))}return r(),arguments.length>0?{done:!0,value:await o}:{done:!0}},[Symbol.asyncIterator](){return this}}}function va(n){if(n===void 0)return ba;if(!Array.isArray(n))throw new TypeError("`methodNames` must be an array of strings");for(const e of n)if(!ba.includes(e))throw typeof e!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${e} is not Emittery method`);return n}const ln=n=>n===Hr||n===Wr;function yr(n,e,t){if(ln(e))try{qr=!0,n.emit(e,t)}finally{qr=!1}}let yi=class ms{static mixin(e,t){return t=va(t),r=>{if(typeof r!="function")throw new TypeError("`target` must be function");for(const o of t)if(r.prototype[o]!==void 0)throw new Error(`The property \`${o}\` already exists on \`target\``);function i(){return Object.defineProperty(this,e,{enumerable:!1,value:new ms}),this[e]}Object.defineProperty(r.prototype,e,{enumerable:!1,get:i});const s=o=>function(...a){return this[e][o](...a)};for(const o of t)Object.defineProperty(r.prototype,o,{enumerable:!1,value:s(o)});return r}}static get isDebugEnabled(){if(typeof hf!="object")return Gi;const{env:e}=globalThis.process??{env:{}};return e.DEBUG==="emittery"||e.DEBUG==="*"||Gi}static set isDebugEnabled(e){Gi=e}constructor(e={}){mt.set(this,new Set),Rt.set(this,new Map),ct.set(this,new Map),ct.get(this).set(Ur,new Set),this.debug=e.debug??{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(t,r,i,s)=>{try{s=JSON.stringify(s)}catch{s=`Object with the following keys failed to stringify: ${Object.keys(s).join(",")}`}(typeof i=="symbol"||typeof i=="number")&&(i=i.toString());const o=new Date,a=`${o.getHours()}:${o.getMinutes()}:${o.getSeconds()}.${o.getMilliseconds()}`;console.log(`[${a}][emittery:${t}][${r}] Event Name: ${i}
	data: ${s}`)})}logIfDebugEnabled(e,t,r){(ms.isDebugEnabled||this.debug.enabled)&&this.debug.logger(e,this.debug.name,t,r)}on(e,t){mr(t),e=Array.isArray(e)?e:[e];for(const r of e){tn(r);let i=nn(this,r);i||(i=new Set,Rt.get(this).set(r,i)),i.add(t),this.logIfDebugEnabled("subscribe",r,void 0),ln(r)||yr(this,Hr,{eventName:r,listener:t})}return this.off.bind(this,e,t)}off(e,t){mr(t),e=Array.isArray(e)?e:[e];for(const r of e){tn(r);const i=nn(this,r);i&&(i.delete(t),i.size===0&&Rt.get(this).delete(r)),this.logIfDebugEnabled("unsubscribe",r,void 0),ln(r)||yr(this,Wr,{eventName:r,listener:t})}}once(e){let t;const r=new Promise(i=>{t=this.on(e,s=>{t(),i(s)})});return r.off=t,r}events(e){e=Array.isArray(e)?e:[e];for(const t of e)tn(t);return wa(this,e)}async emit(e,t){if(tn(e),ln(e)&&!qr)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emit",e,t),ff(this,e,t);const r=nn(this,e)??new Set,i=mt.get(this),s=[...r],o=ln(e)?[]:[...i];await ya,await Promise.all([...s.map(async a=>{if(r.has(a))return a(t)}),...o.map(async a=>{if(i.has(a))return a(e,t)})])}async emitSerial(e,t){if(tn(e),ln(e)&&!qr)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emitSerial",e,t);const r=nn(this,e)??new Set,i=mt.get(this),s=[...r],o=[...i];await ya;for(const a of s)r.has(a)&&await a(t);for(const a of o)i.has(a)&&await a(e,t)}onAny(e){return mr(e),this.logIfDebugEnabled("subscribeAny",void 0,void 0),mt.get(this).add(e),yr(this,Hr,{listener:e}),this.offAny.bind(this,e)}anyEvent(){return wa(this)}offAny(e){mr(e),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),yr(this,Wr,{listener:e}),mt.get(this).delete(e)}clearListeners(e){e=Array.isArray(e)?e:[e];for(const t of e)if(this.logIfDebugEnabled("clear",t,void 0),typeof t=="string"||typeof t=="symbol"||typeof t=="number"){const r=nn(this,t);r&&r.clear();const i=$n(this,t);if(i){for(const s of i)s.finish();i.clear()}}else{mt.get(this).clear();for(const[r,i]of Rt.get(this).entries())i.clear(),Rt.get(this).delete(r);for(const[r,i]of ct.get(this).entries()){for(const s of i)s.finish();i.clear(),ct.get(this).delete(r)}}}listenerCount(e){var r,i,s;e=Array.isArray(e)?e:[e];let t=0;for(const o of e){if(typeof o=="string"){t+=mt.get(this).size+(((r=nn(this,o))==null?void 0:r.size)??0)+(((i=$n(this,o))==null?void 0:i.size)??0)+(((s=$n(this))==null?void 0:s.size)??0);continue}typeof o<"u"&&tn(o),t+=mt.get(this).size;for(const a of Rt.get(this).values())t+=a.size;for(const a of ct.get(this).values())t+=a.size}return t}bindMethods(e,t){if(typeof e!="object"||e===null)throw new TypeError("`target` must be an object");t=va(t);for(const r of t){if(e[r]!==void 0)throw new Error(`The property \`${r}\` already exists on \`target\``);Object.defineProperty(e,r,{enumerable:!1,value:this[r].bind(this)})}}};const ba=Object.getOwnPropertyNames(yi.prototype).filter(n=>n!=="constructor");Object.defineProperty(yi,"listenerAdded",{value:Hr,writable:!1,enumerable:!0,configurable:!1});Object.defineProperty(yi,"listenerRemoved",{value:Wr,writable:!1,enumerable:!0,configurable:!1});const Pe={silent:Number.NEGATIVE_INFINITY,fatal:0,error:0,warn:1,log:2,info:3,success:3,fail:3,ready:3,start:3,box:3,debug:4,trace:5,verbose:Number.POSITIVE_INFINITY},_a={silent:{level:-1},fatal:{level:Pe.fatal},error:{level:Pe.error},warn:{level:Pe.warn},log:{level:Pe.log},info:{level:Pe.info},success:{level:Pe.success},fail:{level:Pe.fail},ready:{level:Pe.info},start:{level:Pe.info},box:{level:Pe.info},debug:{level:Pe.debug},trace:{level:Pe.trace},verbose:{level:Pe.verbose}};function Ki(n){return n!==null&&typeof n=="object"}function ys(n,e,t=".",r){if(!Ki(e))return ys(n,{},t,r);const i=Object.assign({},e);for(const s in n){if(s==="__proto__"||s==="constructor")continue;const o=n[s];o!=null&&(r&&r(i,s,o,t)||(Array.isArray(o)&&Array.isArray(i[s])?i[s]=[...o,...i[s]]:Ki(o)&&Ki(i[s])?i[s]=ys(o,i[s],(t?`${t}.`:"")+s.toString(),r):i[s]=o))}return i}function df(n){return(...e)=>e.reduce((t,r)=>ys(t,r,"",n),{})}const pf=df();function gf(n){return Object.prototype.toString.call(n)==="[object Object]"}function mf(n){return!(!gf(n)||!n.message&&!n.args||n.stack)}let Zi=!1;const ka=[];class we{constructor(e={}){const t=e.types||_a;this.options=pf({...e,defaults:{...e.defaults},level:Yi(e.level,t),reporters:[...e.reporters||[]]},{types:_a,throttle:1e3,throttleMin:5,formatOptions:{date:!0,colors:!1,compact:!0}});for(const r in t){const i={type:r,...this.options.defaults,...t[r]};this[r]=this._wrapLogFn(i),this[r].raw=this._wrapLogFn(i,!0)}this.options.mockFn&&this.mockTypes(),this._lastLog={}}get level(){return this.options.level}set level(e){this.options.level=Yi(e,this.options.types,this.options.level)}prompt(e,t){if(!this.options.prompt)throw new Error("prompt is not supported!");return this.options.prompt(e,t)}create(e){const t=new we({...this.options,...e});return this._mockFn&&t.mockTypes(this._mockFn),t}withDefaults(e){return this.create({...this.options,defaults:{...this.options.defaults,...e}})}withTag(e){return this.withDefaults({tag:this.options.defaults.tag?this.options.defaults.tag+":"+e:e})}addReporter(e){return this.options.reporters.push(e),this}removeReporter(e){if(e){const t=this.options.reporters.indexOf(e);if(t>=0)return this.options.reporters.splice(t,1)}else this.options.reporters.splice(0);return this}setReporters(e){return this.options.reporters=Array.isArray(e)?e:[e],this}wrapAll(){this.wrapConsole(),this.wrapStd()}restoreAll(){this.restoreConsole(),this.restoreStd()}wrapConsole(){for(const e in this.options.types)console["__"+e]||(console["__"+e]=console[e]),console[e]=this[e].raw}restoreConsole(){for(const e in this.options.types)console["__"+e]&&(console[e]=console["__"+e],delete console["__"+e])}wrapStd(){this._wrapStream(this.options.stdout,"log"),this._wrapStream(this.options.stderr,"log")}_wrapStream(e,t){e&&(e.__write||(e.__write=e.write),e.write=r=>{this[t].raw(String(r).trim())})}restoreStd(){this._restoreStream(this.options.stdout),this._restoreStream(this.options.stderr)}_restoreStream(e){e&&e.__write&&(e.write=e.__write,delete e.__write)}pauseLogs(){Zi=!0}resumeLogs(){Zi=!1;const e=ka.splice(0);for(const t of e)t[0]._logFn(t[1],t[2])}mockTypes(e){const t=e||this.options.mockFn;if(this._mockFn=t,typeof t=="function")for(const r in this.options.types)this[r]=t(r,this.options.types[r])||this[r],this[r].raw=this[r]}_wrapLogFn(e,t){return(...r)=>{if(Zi){ka.push([this,e,r,t]);return}return this._logFn(e,r,t)}}_logFn(e,t,r){if((e.level||0)>this.level)return!1;const i={date:new Date,args:[],...e,level:Yi(e.level,this.options.types)};!r&&t.length===1&&mf(t[0])?Object.assign(i,t[0]):i.args=[...t],i.message&&(i.args.unshift(i.message),delete i.message),i.additional&&(Array.isArray(i.additional)||(i.additional=i.additional.split(`
`)),i.args.push(`
`+i.additional.join(`
`)),delete i.additional),i.type=typeof i.type=="string"?i.type.toLowerCase():"log",i.tag=typeof i.tag=="string"?i.tag:"";const s=(a=!1)=>{const l=(this._lastLog.count||0)-this.options.throttleMin;if(this._lastLog.object&&l>0){const h=[...this._lastLog.object.args];l>1&&h.push(`(repeated ${l} times)`),this._log({...this._lastLog.object,args:h}),this._lastLog.count=1}a&&(this._lastLog.object=i,this._log(i))};clearTimeout(this._lastLog.timeout);const o=this._lastLog.time&&i.date?i.date.getTime()-this._lastLog.time.getTime():0;if(this._lastLog.time=i.date,o<this.options.throttle)try{const a=JSON.stringify([i.type,i.tag,i.args]),l=this._lastLog.serialized===a;if(this._lastLog.serialized=a,l&&(this._lastLog.count=(this._lastLog.count||0)+1,this._lastLog.count>this.options.throttleMin)){this._lastLog.timeout=setTimeout(s,this.options.throttle);return}}catch{}s(!0)}_log(e){for(const t of this.options.reporters)t.log(e,{options:this.options})}}function Yi(n,e={},t=3){return n===void 0?t:typeof n=="number"?n:e[n]&&e[n].level!==void 0?e[n].level:t}we.prototype.add=we.prototype.addReporter;we.prototype.remove=we.prototype.removeReporter;we.prototype.clear=we.prototype.removeReporter;we.prototype.withScope=we.prototype.withTag;we.prototype.mock=we.prototype.mockTypes;we.prototype.pause=we.prototype.pauseLogs;we.prototype.resume=we.prototype.resumeLogs;function yf(n={}){return new we(n)}class wf{constructor(e){this.options={...e},this.defaultColor="#7f8c8d",this.levelColorMap={0:"#c0392b",1:"#f39c12",3:"#00BCD4"},this.typeColorMap={success:"#2ecc71"}}_getLogFn(e){return e<1?console.__error||console.error:e===1?console.__warn||console.warn:console.__log||console.log}log(e){const t=this._getLogFn(e.level),r=e.type==="log"?"":e.type,i=e.tag||"",o=`
      background: ${this.typeColorMap[e.type]||this.levelColorMap[e.level]||this.defaultColor};
      border-radius: 0.5em;
      color: white;
      font-weight: bold;
      padding: 2px 0.5em;
    `,a=`%c${[i,r].filter(Boolean).join(":")}`;typeof e.args[0]=="string"?t(`${a}%c ${e.args[0]}`,o,"",...e.args.slice(1)):t(a,o,...e.args)}}function vf(n={}){return yf({reporters:n.reporters||[new wf({})],prompt(t,r={}){return r.type==="confirm"?Promise.resolve(confirm(t)):Promise.resolve(prompt(t))},...n})}const me=vf();var Bn=(n=>(n[n.silent=Number.NEGATIVE_INFINITY]="silent",n[n.always=0]="always",n[n.fatal=0]="fatal",n[n.warning=1]="warning",n[n.normal=2]="normal",n[n.info=3]="info",n[n.debug=4]="debug",n[n.trace=5]="trace",n[n.verbose=Number.POSITIVE_INFINITY]="verbose",n))(Bn||{});const xa=2,un=class un{constructor(){if(this._status_priority=me.create({level:Bn.verbose}),this._void=e=>{},this.__log=e=>{me.log(e)},this._log=this._void,un._instance!==void 0)throw new Error("Log instance duplicate error");me.level=xa,this._customLevel=new Map,un._instance=this}get level(){return me.level}set level(e){this._status_priority.level=e<0?e:Bn.verbose,this._log=e>=3?this.__log:this._void,me.level=e,e<0&&this._customLevel.forEach(t=>{Bn.silent})}get warn(){return me.warn}get error(){return me.error}get info(){return me.info}get debug(){return me.debug}get verbose(){return me.verbose}get ready(){return me.ready}get success(){return me.success}get trace(){return me.trace}get log(){return this._log}get assert(){return console.assert}status_start(e){this._status_priority.start(e)}status_success(e){this._status_priority.success(e)}status_fail(e){this._status_priority.fail(e)}access(e){this._status_priority.trace(e)}createWithTag(e){return me.withTag(e)}wrapConsoleLogger(){me.wrapConsole()}restoreConsoleLogger(){me.restoreConsole()}setCustomLevel(e,t){this._customLevel.set(e,t)}getCustomLevel(e){return this._customLevel.get(e)??xa}addConsolaReporter(e){me.addReporter(e),this._status_priority.addReporter(e)}removeConsolaReporter(e){me.removeReporter(e),this._status_priority.removeReporter(e)}};un._instance=new un;let ws=un;const ae=ws._instance;function Yw(){globalThis&&(globalThis.omnilog=ae)}class wi{constructor(e){this.app=e,this.children=new Map;const t=ae.createWithTag("Services");this.info=t.info,this.success=t.success,this.debug=t.debug,this.verbose=t.verbose,this.warn=t.warn,this.error=t.error}register(e,t,r){throw new Error("Manager register method not implemented")}async load(){var t;for(const[r,i]of this.children)this.verbose(`${r} load`),await((t=i.load)==null?void 0:t.call(i));return!0}async start(){var e;for(const[t,r]of this.children)ae.log(`child ${t} start`),await((e=r.start)==null?void 0:e.call(r));return ae.log("All children started"),!0}async stop(){var e;this.debug("stopping children...");for(const t of Array.from(this.children.values()).reverse())this.verbose(`${t.id} stop`),await((e=t.stop)==null?void 0:e.call(t));return this.success("children stopped"),!0}get(e){return this.children.get(e)}has(e){return this.children.has(e)}}class Fl{constructor(e,t,r){this.id=e,this.manager=t,this.app=t.app,this.config=r;const i=ae.createWithTag(e);this.info=i.info,this.success=i.success,this.debug=i.debug,this.verbose=i.verbose,this.warn=i.warn,this.error=i.error,this.trace=i.trace}async emitGlobalEvent(e,t){this.verbose(`[Global.EMIT] ${this.id} emits event '${e}'`),await this.app.events.emit(e,t)}async emit(e,t){this.verbose(`[SERVICE.EMIT] ${this.id} emits event '${e}'`),await this.app.events.emit(`${this.id}.${e}`,t)}subscribeToServiceEvent(e,t,r){const i=e.id??e;i===this.id&&this.error(`[SERVICE.SUB] ${this.id} subscribed to self event '${t}'`),this.app.services.has(i)||this.error(`[SERVICE.SUB] ${this.id} subscribed to non-existent service event '${t}' on ${i}`),this.info(`[SERVICE.SUB Service] ${this.id} subscribed to service event '${t}' on ${i}.`),this.app.events.on(`${i}.${t}`,r)}subscribeToGlobalEvent(e,t){this.debug(`[GLOBAL.SUB] ${this.id} subscribed to GlobalEvent ${e}`),this.app.events.on(e,t)}unsubscribeFromGlobalEvent(e,t){this.verbose(`[GLOBAL.UNSUBSUB] ${this.id} unsubscribed from GlobalEvent ${e}`),this.app.events.off(e,t)}async registerAPI({method:e,url:t,handler:r,insecure:i,authStrategy:s,schema:o,websocket:a}){if(this.debug("registerAPI",e,t),!t)return this.error("registerAPI: url is required"),!1;if(r==null||typeof r!="function")return this.error("registerAPI: handler is required and must be a function",e,t),!1;await this.emitGlobalEvent("registerAPI",{method:e,url:t,handler:r,insecure:i,authStrategy:s,schema:o,websocket:a})}}class Sa extends wi{constructor(e){super(e),Object.defineProperty(this,"integrations",{get:()=>this.children}),this._integrations=[]}register(e,t){this.verbose(`pre-registering ${t.id} integration`),this._integrations.push([e,t])}async load(){var t;for(const[r,i]of this._integrations){this.verbose(`registering integration ${i.id}...`);const s=new r(i.id,this,i);this.children.set(i.id,s),(t=s.create)==null||t.call(s)}this.debug("loading integrations...");const e=await super.load();return this.success("integrations loaded"),e}async start(){return this.debug("starting integrations..."),await super.start(),this.success("integrations started"),!0}}class bf extends wi{constructor(e){super(e),Object.defineProperty(this,"services",{get:()=>this.children})}register(e,t,r){var s;this.debug(`registering ${t.id} service`);let i=new e(t.id,this,t);return r&&typeof r=="function"&&(i=r(i)),this.children.set(t.id,i),(s=i.create)==null||s.call(i),i}async load(){return this.debug("loading services..."),await super.load()?(this.success("services loaded"),!0):(this.error("failed to load services"),!1)}async start(){return this.debug("starting services..."),await super.start(),this.success("services started"),!0}}const zl=-1,vi=0,Vr=1,Jr=2,eo=3,to=4,no=5,ro=6,jl=7,Ul=8,Ea=typeof self=="object"?self:globalThis,_f=(n,e)=>{const t=(i,s)=>(n.set(s,i),i),r=i=>{if(n.has(i))return n.get(i);const[s,o]=e[i];switch(s){case vi:case zl:return t(o,i);case Vr:{const a=t([],i);for(const l of o)a.push(r(l));return a}case Jr:{const a=t({},i);for(const[l,h]of o)a[r(l)]=r(h);return a}case eo:return t(new Date(o),i);case to:{const{source:a,flags:l}=o;return t(new RegExp(a,l),i)}case no:{const a=t(new Map,i);for(const[l,h]of o)a.set(r(l),r(h));return a}case ro:{const a=t(new Set,i);for(const l of o)a.add(r(l));return a}case jl:{const{name:a,message:l}=o;return t(new Ea[a](l),i)}case Ul:return t(BigInt(o),i);case"BigInt":return t(Object(BigInt(o)),i)}return t(new Ea[s](o),i)};return r},kf=n=>_f(new Map,n)(0),rn="",{toString:xf}={},{keys:Sf}=Object,An=n=>{const e=typeof n;if(e!=="object"||!n)return[vi,e];const t=xf.call(n).slice(8,-1);switch(t){case"Array":return[Vr,rn];case"Object":return[Jr,rn];case"Date":return[eo,rn];case"RegExp":return[to,rn];case"Map":return[no,rn];case"Set":return[ro,rn]}return t.includes("Array")?[Vr,t]:t.includes("Error")?[jl,t]:[Jr,t]},wr=([n,e])=>n===vi&&(e==="function"||e==="symbol"),Ef=(n,e,t,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return t.set(a,l),l},s=o=>{if(t.has(o))return t.get(o);let[a,l]=An(o);switch(a){case vi:{let u=o;switch(l){case"bigint":a=Ul,u=o.toString();break;case"function":case"symbol":if(n)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return i([zl],o)}return i([a,u],o)}case Vr:{if(l)return i([l,[...o]],o);const u=[],d=i([a,u],o);for(const f of o)u.push(s(f));return d}case Jr:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const u=[],d=i([a,u],o);for(const f of Sf(o))(n||!wr(An(o[f])))&&u.push([s(f),s(o[f])]);return d}case eo:return i([a,o.toISOString()],o);case to:{const{source:u,flags:d}=o;return i([a,{source:u,flags:d}],o)}case no:{const u=[],d=i([a,u],o);for(const[f,p]of o)(n||!(wr(An(f))||wr(An(p))))&&u.push([s(f),s(p)]);return d}case ro:{const u=[],d=i([a,u],o);for(const f of o)(n||!wr(An(f)))&&u.push(s(f));return d}}const{message:h}=o;return i([a,{name:l,message:h}],o)};return s},Cf=(n,{json:e,lossy:t}={})=>{const r=[];return Ef(!(e||t),!!e,new Map,r)(n),r};/*! (c) Andrea Giammarchi - ISC */const{parse:Af,stringify:Of}=JSON,Tf={json:!0,lossy:!0},Rf=n=>kf(Af(n)),If=n=>Of(Cf(n,Tf));class Hl{constructor(e){this.settings=new Map,this.scope=e}bindStorage(e){this.settings=e}add(e){return this.settings.has(e.key)?(ae.debug(`Setting ${e.key} already exists, doing nothing...`),this):(this.settings.set(e.key,e),this)}get(e){return this.settings.get(e)}update(e,t){const r=this.get(e);r&&(r.value=t,this.settings.set(e,r))}reset(e){const t=this.get(e);t&&(t.value=t.defaultValue,this.settings.set(e,t))}resetAll(){if(this.settings)for(const e of this.settings.values())e.value=e.defaultValue,this.settings.set(e.key,e)}getAll(){return Array.from(this.settings.values())}delete(e){this.settings.delete(e)}}var Wl=(n=>(n[n.CREATED=0]="CREATED",n[n.CONFIGURED=1]="CONFIGURED",n[n.LOADED=2]="LOADED",n[n.STARTED=3]="STARTED",n[n.STOPPED=4]="STOPPED",n))(Wl||{});const Yo=class Yo{constructor(e,t,r){this.state=0,this.id=e,r??(r={integrationsManagerType:Sa}),this.config=t,this.version=t.version,this.logger=ae,this.services=new bf(this),this.integrations=new(r.integrationsManagerType||Sa)(this);const i=this.logger.createWithTag(e);this.settings=new Hl,this.info=i.info,this.success=i.success,this.debug=i.debug,this.error=i.error,this.verbose=i.verbose,this.warn=i.warn,this.events=new yi(ae.getCustomLevel("emittery")>Bn.silent?{debug:{name:"app.events",enabled:!0}}:void 0)}use(e,t,r,i){if(this.verbose("[APP.USE] use",e.name),r==="service"||e.name.endsWith("Service")){const s=e;this.services.register(s,t,i)}else if(r==="integration"||e.name.endsWith("Integration")){const s=e;this.integrations.register(s,t)}else this.warn(`[APP.USE] Unknown middleware type ${e.name}`);return this}async emit(e,t){this.debug("[APP.EMIT Global] emit",e),await this.events.emit(e,t)}async load(){if(this.state>=2)return ae.warn("Cannot load more than once, ignoring call"),!0;const e=this;if(e.onConfigure!=null&&await e.onConfigure(),this.state=1,!await this.services.load())throw new Error("Failed to load services, see console for details");return await this.integrations.load(),e.onLoad!=null&&await e.onLoad(),await this.emit("loaded",{}),this.success("app loaded"),this.state=2,!0}async start(){if(this.state===3)return ae.warn("Cannot start more than once, ignoring call"),!0;const e=this;return await this.services.start(),await this.integrations.start(),e.onStart!=null&&await e.onStart(),this.success("app started"),this.state=3,await this.emit("started",{}),!0}async stop(){return this.info("app stopping"),await this.integrations.stop(),await this.services.stop(),await this.emit("stopped",{}),this.success("app stopped"),this.state=4,!0}subscribeToGlobalEvent(e,t){this.info(`[APP.SUB Global] ${this.id} subscribed to GlobalEvent ${e}`),this.events.on(e,t)}subscribeToServiceEvent(e,t,r){const i=e.id??e;this.services.has(i)||this.warn(`[SERVICE.SUB Service] ${this.id} subscribed to unknown service '${i}'. This can be ok in some cases, but usually indicates a bug.`),this.info(`[SERVICE.SUB App] ${this.id} subscribed to service event '${t}' on ${i}`),this.events.on(`${i}.${t}`,r)}stringify(e){return If(e)}parse(e){return Rf(e)}};Yo.STATES=Wl;let vs=Yo;class io extends Fl{constructor(e,t,r){super(e,t,r)}}class Pf extends Fl{constructor(e,t,r){super(e,t,r)}async emit(e,...t){this.verbose(`[Extension.EMIT] ${this.id} emits event '${e}'`),await this.app.emit(`${this.id}.${e}`,t)}get extensionConfig(){return this.config}}class Lf extends wi{constructor(e){super(e)}}class bi{get blockIds(){var e;return Array.from(new Set(Object.values(((e=this==null?void 0:this.rete)==null?void 0:e.nodes)??{}).map(t=>t.name))).sort()}constructor(e,t){this.id=e??"",this.setMeta(t),this.setRete(null),this.setAPI(null),this.setUI(null)}setMeta(e){var t,r,i,s,o;return e=JSON.parse(JSON.stringify(e??{})),e=e??{name:"New Recipe",description:"No description.",pictureUrl:"omni.png",author:"Anonymous"},this.meta=e,(t=this.meta).updated??(t.updated=Date.now()),(r=this.meta).created??(r.created=Date.now()),(i=this.meta).tags??(i.tags=[]),(s=this.meta).author||(s.author="Anonymous"),(o=this.meta).help||(o.help=""),this.meta.name=gr(this.meta.name,{allowedTags:[],allowedAttributes:{}}),this.meta.description=gr(this.meta.description,{allowedTags:[],allowedAttributes:{}}),this.meta.author=gr(this.meta.author,{allowedTags:[],allowedAttributes:{}}),this.meta.help=gr(this.meta.help,{allowedTags:[],allowedAttributes:{}}),this}setRete(e){return this.rete=e,this}setAPI(e){return this.api=e??{fields:{}},this}setUI(e){return this.ui=e??{},this}get isBlank(){var e;return(((e=this==null?void 0:this.rete)==null?void 0:e.nodes)??[]).length===0}toJSON(){return{id:this.id,meta:this.meta,rete:this.rete,api:this.api,ui:this.ui,blockIds:this.blockIds}}static fromJSON(e){const t=new bi(e.id);return t.setMeta(e.meta),e.rete.nodes=JSON.parse(JSON.stringify(e.rete.nodes).replace(/omni-extension-replicate:/g,"omni-core-replicate:")),e.rete.nodes=JSON.parse(JSON.stringify(e.rete.nodes).replace(/omni-extension-formio:/g,"omni-core-formio:")),t.setRete(e.rete),t.setAPI(e.api),t.setUI(e.ui),t}}const ui=class ui extends bi{constructor(e,t,r){super(e,r),this._id=`wf:${e}`,this.owner=t.owner,this.org=t.org}toJSON(){return{...super.toJSON(),_id:this._id,_rev:this._rev,owner:this.owner,org:this.org}}static fromJSON(e){var i;let t=((i=e._id)==null?void 0:i.replace("wf:",""))||e.id;e.id&&e.id.length>16&&t.startsWith(e.id)&&(t=e.id);const r=new ui(t,{owner:e.owner||e.meta.owner,org:e.org});return e.rete=JSON.parse(JSON.stringify(e.rete).replace(/omni-extension-replicate:/g,"omni-core-replicate:")),e.rete=JSON.parse(JSON.stringify(e.rete).replace(/omni-extension-formio:/g,"omni-core-formio:")),r.setMeta(e.meta),r.setRete(e.rete),r.setAPI(e.api),r.setUI(e.ui),e._rev&&(r._rev=e._rev),r}};ui.modelName="Workflow";let Ca=ui;function ql(n,e){return function(){return n.apply(e,arguments)}}const{toString:Mf}=Object.prototype,{getPrototypeOf:so}=Object,_i=(n=>e=>{const t=Mf.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),it=n=>(n=n.toLowerCase(),e=>_i(e)===n),ki=n=>e=>typeof e===n,{isArray:wn}=Array,Jn=ki("undefined");function Nf(n){return n!==null&&!Jn(n)&&n.constructor!==null&&!Jn(n.constructor)&&ze(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const Vl=it("ArrayBuffer");function Df(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&Vl(n.buffer),e}const $f=ki("string"),ze=ki("function"),Jl=ki("number"),xi=n=>n!==null&&typeof n=="object",Bf=n=>n===!0||n===!1,Pr=n=>{if(_i(n)!=="object")return!1;const e=so(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},Ff=it("Date"),zf=it("File"),jf=it("Blob"),Uf=it("FileList"),Hf=n=>xi(n)&&ze(n.pipe),Wf=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||ze(n.append)&&((e=_i(n))==="formdata"||e==="object"&&ze(n.toString)&&n.toString()==="[object FormData]"))},qf=it("URLSearchParams"),Vf=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Qn(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),wn(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{const s=t?Object.getOwnPropertyNames(n):Object.keys(n),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,n[a],a,n)}}function Gl(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const Kl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Zl=n=>!Jn(n)&&n!==Kl;function bs(){const{caseless:n}=Zl(this)&&this||{},e={},t=(r,i)=>{const s=n&&Gl(e,i)||i;Pr(e[s])&&Pr(r)?e[s]=bs(e[s],r):Pr(r)?e[s]=bs({},r):wn(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Qn(arguments[r],t);return e}const Jf=(n,e,t,{allOwnKeys:r}={})=>(Qn(e,(i,s)=>{t&&ze(i)?n[s]=ql(i,t):n[s]=i},{allOwnKeys:r}),n),Gf=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),Kf=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},Zf=(n,e,t,r)=>{let i,s,o;const a={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),s=i.length;s-- >0;)o=i[s],(!r||r(o,n,e))&&!a[o]&&(e[o]=n[o],a[o]=!0);n=t!==!1&&so(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},Yf=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},Xf=n=>{if(!n)return null;if(wn(n))return n;let e=n.length;if(!Jl(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},Qf=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&so(Uint8Array)),ed=(n,e)=>{const r=(n&&n[Symbol.iterator]).call(n);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(n,s[0],s[1])}},td=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},nd=it("HTMLFormElement"),rd=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),Aa=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),id=it("RegExp"),Yl=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};Qn(t,(i,s)=>{let o;(o=e(i,s,n))!==!1&&(r[s]=o||i)}),Object.defineProperties(n,r)},sd=n=>{Yl(n,(e,t)=>{if(ze(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(ze(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},od=(n,e)=>{const t={},r=i=>{i.forEach(s=>{t[s]=!0})};return wn(n)?r(n):r(String(n).split(e)),t},ad=()=>{},ld=(n,e)=>(n=+n,Number.isFinite(n)?n:e),Xi="abcdefghijklmnopqrstuvwxyz",Oa="0123456789",Xl={DIGIT:Oa,ALPHA:Xi,ALPHA_DIGIT:Xi+Xi.toUpperCase()+Oa},cd=(n=16,e=Xl.ALPHA_DIGIT)=>{let t="";const{length:r}=e;for(;n--;)t+=e[Math.random()*r|0];return t};function ud(n){return!!(n&&ze(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const hd=n=>{const e=new Array(10),t=(r,i)=>{if(xi(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=wn(r)?[]:{};return Qn(r,(o,a)=>{const l=t(o,i+1);!Jn(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return t(n,0)},fd=it("AsyncFunction"),dd=n=>n&&(xi(n)||ze(n))&&ze(n.then)&&ze(n.catch),T={isArray:wn,isArrayBuffer:Vl,isBuffer:Nf,isFormData:Wf,isArrayBufferView:Df,isString:$f,isNumber:Jl,isBoolean:Bf,isObject:xi,isPlainObject:Pr,isUndefined:Jn,isDate:Ff,isFile:zf,isBlob:jf,isRegExp:id,isFunction:ze,isStream:Hf,isURLSearchParams:qf,isTypedArray:Qf,isFileList:Uf,forEach:Qn,merge:bs,extend:Jf,trim:Vf,stripBOM:Gf,inherits:Kf,toFlatObject:Zf,kindOf:_i,kindOfTest:it,endsWith:Yf,toArray:Xf,forEachEntry:ed,matchAll:td,isHTMLForm:nd,hasOwnProperty:Aa,hasOwnProp:Aa,reduceDescriptors:Yl,freezeMethods:sd,toObjectSet:od,toCamelCase:rd,noop:ad,toFiniteNumber:ld,findKey:Gl,global:Kl,isContextDefined:Zl,ALPHABET:Xl,generateString:cd,isSpecCompliantForm:ud,toJSONObject:hd,isAsyncFn:fd,isThenable:dd};function K(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i)}T.inherits(K,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:T.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Ql=K.prototype,ec={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{ec[n]={value:n}});Object.defineProperties(K,ec);Object.defineProperty(Ql,"isAxiosError",{value:!0});K.from=(n,e,t,r,i,s)=>{const o=Object.create(Ql);return T.toFlatObject(n,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),K.call(o,n.message,e,t,r,i),o.cause=n,o.name=n.name,s&&Object.assign(o,s),o};const pd=null;function _s(n){return T.isPlainObject(n)||T.isArray(n)}function tc(n){return T.endsWith(n,"[]")?n.slice(0,-2):n}function Ta(n,e,t){return n?n.concat(e).map(function(i,s){return i=tc(i),!t&&s?"["+i+"]":i}).join(t?".":""):e}function gd(n){return T.isArray(n)&&!n.some(_s)}const md=T.toFlatObject(T,{},null,function(e){return/^is[A-Z]/.test(e)});function Si(n,e,t){if(!T.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=T.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,m){return!T.isUndefined(m[g])});const r=t.metaTokens,i=t.visitor||u,s=t.dots,o=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&T.isSpecCompliantForm(e);if(!T.isFunction(i))throw new TypeError("visitor must be a function");function h(c){if(c===null)return"";if(T.isDate(c))return c.toISOString();if(!l&&T.isBlob(c))throw new K("Blob is not supported. Use a Buffer instead.");return T.isArrayBuffer(c)||T.isTypedArray(c)?l&&typeof Blob=="function"?new Blob([c]):Buffer.from(c):c}function u(c,g,m){let y=c;if(c&&!m&&typeof c=="object"){if(T.endsWith(g,"{}"))g=r?g:g.slice(0,-2),c=JSON.stringify(c);else if(T.isArray(c)&&gd(c)||(T.isFileList(c)||T.endsWith(g,"[]"))&&(y=T.toArray(c)))return g=tc(g),y.forEach(function(_,b){!(T.isUndefined(_)||_===null)&&e.append(o===!0?Ta([g],b,s):o===null?g:g+"[]",h(_))}),!1}return _s(c)?!0:(e.append(Ta(m,g,s),h(c)),!1)}const d=[],f=Object.assign(md,{defaultVisitor:u,convertValue:h,isVisitable:_s});function p(c,g){if(!T.isUndefined(c)){if(d.indexOf(c)!==-1)throw Error("Circular reference detected in "+g.join("."));d.push(c),T.forEach(c,function(y,w){(!(T.isUndefined(y)||y===null)&&i.call(e,y,T.isString(w)?w.trim():w,g,f))===!0&&p(y,g?g.concat(w):[w])}),d.pop()}}if(!T.isObject(n))throw new TypeError("data must be an object");return p(n),e}function Ra(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function oo(n,e){this._pairs=[],n&&Si(n,this,e)}const nc=oo.prototype;nc.append=function(e,t){this._pairs.push([e,t])};nc.toString=function(e){const t=e?function(r){return e.call(this,r,Ra)}:Ra;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function yd(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function rc(n,e,t){if(!e)return n;const r=t&&t.encode||yd,i=t&&t.serialize;let s;if(i?s=i(e,t):s=T.isURLSearchParams(e)?e.toString():new oo(e,t).toString(r),s){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class wd{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){T.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Ia=wd,ic={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},vd=typeof URLSearchParams<"u"?URLSearchParams:oo,bd=typeof FormData<"u"?FormData:null,_d=typeof Blob<"u"?Blob:null,kd={isBrowser:!0,classes:{URLSearchParams:vd,FormData:bd,Blob:_d},protocols:["http","https","file","blob","url","data"]},sc=typeof window<"u"&&typeof document<"u",xd=(n=>sc&&["ReactNative","NativeScript","NS"].indexOf(n)<0)(typeof navigator<"u"&&navigator.product),Sd=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ed=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:sc,hasStandardBrowserEnv:xd,hasStandardBrowserWebWorkerEnv:Sd},Symbol.toStringTag,{value:"Module"})),et={...Ed,...kd};function Cd(n,e){return Si(n,new et.classes.URLSearchParams,Object.assign({visitor:function(t,r,i,s){return et.isNode&&T.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function Ad(n){return T.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Od(n){const e={},t=Object.keys(n);let r;const i=t.length;let s;for(r=0;r<i;r++)s=t[r],e[s]=n[s];return e}function oc(n){function e(t,r,i,s){let o=t[s++];const a=Number.isFinite(+o),l=s>=t.length;return o=!o&&T.isArray(i)?i.length:o,l?(T.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!T.isObject(i[o]))&&(i[o]=[]),e(t,r,i[o],s)&&T.isArray(i[o])&&(i[o]=Od(i[o])),!a)}if(T.isFormData(n)&&T.isFunction(n.entries)){const t={};return T.forEachEntry(n,(r,i)=>{e(Ad(r),i,t,0)}),t}return null}function Td(n,e,t){if(T.isString(n))try{return(e||JSON.parse)(n),T.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const ao={transitional:ic,adapter:["xhr","http"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,s=T.isObject(e);if(s&&T.isHTMLForm(e)&&(e=new FormData(e)),T.isFormData(e))return i&&i?JSON.stringify(oc(e)):e;if(T.isArrayBuffer(e)||T.isBuffer(e)||T.isStream(e)||T.isFile(e)||T.isBlob(e))return e;if(T.isArrayBufferView(e))return e.buffer;if(T.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Cd(e,this.formSerializer).toString();if((a=T.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Si(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),Td(e)):e}],transformResponse:[function(e){const t=this.transitional||ao.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(e&&T.isString(e)&&(r&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?K.from(a,K.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:et.classes.FormData,Blob:et.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};T.forEach(["delete","get","head","post","put","patch"],n=>{ao.headers[n]={}});const lo=ao,Rd=T.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Id=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!t||e[t]&&Rd[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},Pa=Symbol("internals");function On(n){return n&&String(n).trim().toLowerCase()}function Lr(n){return n===!1||n==null?n:T.isArray(n)?n.map(Lr):String(n)}function Pd(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const Ld=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Qi(n,e,t,r,i){if(T.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!T.isString(e)){if(T.isString(r))return e.indexOf(r)!==-1;if(T.isRegExp(r))return r.test(e)}}function Md(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function Nd(n,e){const t=T.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class Ei{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function s(a,l,h){const u=On(l);if(!u)throw new Error("header name must be a non-empty string");const d=T.findKey(i,u);(!d||i[d]===void 0||h===!0||h===void 0&&i[d]!==!1)&&(i[d||l]=Lr(a))}const o=(a,l)=>T.forEach(a,(h,u)=>s(h,u,l));return T.isPlainObject(e)||e instanceof this.constructor?o(e,t):T.isString(e)&&(e=e.trim())&&!Ld(e)?o(Id(e),t):e!=null&&s(t,e,r),this}get(e,t){if(e=On(e),e){const r=T.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return Pd(i);if(T.isFunction(t))return t.call(this,i,r);if(T.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=On(e),e){const r=T.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||Qi(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function s(o){if(o=On(o),o){const a=T.findKey(r,o);a&&(!t||Qi(r,r[a],a,t))&&(delete r[a],i=!0)}}return T.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const s=t[r];(!e||Qi(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const t=this,r={};return T.forEach(this,(i,s)=>{const o=T.findKey(r,s);if(o){t[o]=Lr(i),delete t[s];return}const a=e?Md(s):String(s).trim();a!==s&&delete t[s],t[a]=Lr(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return T.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&T.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[Pa]=this[Pa]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=On(o);r[a]||(Nd(i,o),r[a]=!0)}return T.isArray(e)?e.forEach(s):s(e),this}}Ei.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);T.reduceDescriptors(Ei.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});T.freezeMethods(Ei);const ht=Ei;function es(n,e){const t=this||lo,r=e||t,i=ht.from(r.headers);let s=r.data;return T.forEach(n,function(a){s=a.call(t,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function ac(n){return!!(n&&n.__CANCEL__)}function er(n,e,t){K.call(this,n??"canceled",K.ERR_CANCELED,e,t),this.name="CanceledError"}T.inherits(er,K,{__CANCEL__:!0});function Dd(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new K("Request failed with status code "+t.status,[K.ERR_BAD_REQUEST,K.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}const $d=et.hasStandardBrowserEnv?{write(n,e,t,r,i,s){const o=[n+"="+encodeURIComponent(e)];T.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),T.isString(r)&&o.push("path="+r),T.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Bd(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Fd(n,e){return e?n.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):n}function lc(n,e){return n&&!Bd(e)?Fd(n,e):e}const zd=et.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let r;function i(s){let o=s;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return r=i(window.location.href),function(o){const a=T.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function jd(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function Ud(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const h=Date.now(),u=r[s];o||(o=h),t[i]=l,r[i]=h;let d=s,f=0;for(;d!==i;)f+=t[d++],d=d%n;if(i=(i+1)%n,i===s&&(s=(s+1)%n),h-o<e)return;const p=u&&h-u;return p?Math.round(f*1e3/p):void 0}}function La(n,e){let t=0;const r=Ud(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-t,l=r(a),h=s<=o;t=s;const u={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&h?(o-s)/l:void 0,event:i};u[e?"download":"upload"]=!0,n(u)}}const Hd=typeof XMLHttpRequest<"u",Wd=Hd&&function(n){return new Promise(function(t,r){let i=n.data;const s=ht.from(n.headers).normalize();let{responseType:o,withXSRFToken:a}=n,l;function h(){n.cancelToken&&n.cancelToken.unsubscribe(l),n.signal&&n.signal.removeEventListener("abort",l)}let u;if(T.isFormData(i)){if(et.hasStandardBrowserEnv||et.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((u=s.getContentType())!==!1){const[g,...m]=u?u.split(";").map(y=>y.trim()).filter(Boolean):[];s.setContentType([g||"multipart/form-data",...m].join("; "))}}let d=new XMLHttpRequest;if(n.auth){const g=n.auth.username||"",m=n.auth.password?unescape(encodeURIComponent(n.auth.password)):"";s.set("Authorization","Basic "+btoa(g+":"+m))}const f=lc(n.baseURL,n.url);d.open(n.method.toUpperCase(),rc(f,n.params,n.paramsSerializer),!0),d.timeout=n.timeout;function p(){if(!d)return;const g=ht.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),y={data:!o||o==="text"||o==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:g,config:n,request:d};Dd(function(_){t(_),h()},function(_){r(_),h()},y),d=null}if("onloadend"in d?d.onloadend=p:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(p)},d.onabort=function(){d&&(r(new K("Request aborted",K.ECONNABORTED,n,d)),d=null)},d.onerror=function(){r(new K("Network Error",K.ERR_NETWORK,n,d)),d=null},d.ontimeout=function(){let m=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const y=n.transitional||ic;n.timeoutErrorMessage&&(m=n.timeoutErrorMessage),r(new K(m,y.clarifyTimeoutError?K.ETIMEDOUT:K.ECONNABORTED,n,d)),d=null},et.hasStandardBrowserEnv&&(a&&T.isFunction(a)&&(a=a(n)),a||a!==!1&&zd(f))){const g=n.xsrfHeaderName&&n.xsrfCookieName&&$d.read(n.xsrfCookieName);g&&s.set(n.xsrfHeaderName,g)}i===void 0&&s.setContentType(null),"setRequestHeader"in d&&T.forEach(s.toJSON(),function(m,y){d.setRequestHeader(y,m)}),T.isUndefined(n.withCredentials)||(d.withCredentials=!!n.withCredentials),o&&o!=="json"&&(d.responseType=n.responseType),typeof n.onDownloadProgress=="function"&&d.addEventListener("progress",La(n.onDownloadProgress,!0)),typeof n.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",La(n.onUploadProgress)),(n.cancelToken||n.signal)&&(l=g=>{d&&(r(!g||g.type?new er(null,n,d):g),d.abort(),d=null)},n.cancelToken&&n.cancelToken.subscribe(l),n.signal&&(n.signal.aborted?l():n.signal.addEventListener("abort",l)));const c=jd(f);if(c&&et.protocols.indexOf(c)===-1){r(new K("Unsupported protocol "+c+":",K.ERR_BAD_REQUEST,n));return}d.send(i||null)})},ks={http:pd,xhr:Wd};T.forEach(ks,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const Ma=n=>`- ${n}`,qd=n=>T.isFunction(n)||n===null||n===!1,cc={getAdapter:n=>{n=T.isArray(n)?n:[n];const{length:e}=n;let t,r;const i={};for(let s=0;s<e;s++){t=n[s];let o;if(r=t,!qd(t)&&(r=ks[(o=String(t)).toLowerCase()],r===void 0))throw new K(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(Ma).join(`
`):" "+Ma(s[0]):"as no adapter specified";throw new K("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:ks};function ts(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new er(null,n)}function Na(n){return ts(n),n.headers=ht.from(n.headers),n.data=es.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),cc.getAdapter(n.adapter||lo.adapter)(n).then(function(r){return ts(n),r.data=es.call(n,n.transformResponse,r),r.headers=ht.from(r.headers),r},function(r){return ac(r)||(ts(n),r&&r.response&&(r.response.data=es.call(n,n.transformResponse,r.response),r.response.headers=ht.from(r.response.headers))),Promise.reject(r)})}const Da=n=>n instanceof ht?n.toJSON():n;function fn(n,e){e=e||{};const t={};function r(h,u,d){return T.isPlainObject(h)&&T.isPlainObject(u)?T.merge.call({caseless:d},h,u):T.isPlainObject(u)?T.merge({},u):T.isArray(u)?u.slice():u}function i(h,u,d){if(T.isUndefined(u)){if(!T.isUndefined(h))return r(void 0,h,d)}else return r(h,u,d)}function s(h,u){if(!T.isUndefined(u))return r(void 0,u)}function o(h,u){if(T.isUndefined(u)){if(!T.isUndefined(h))return r(void 0,h)}else return r(void 0,u)}function a(h,u,d){if(d in e)return r(h,u);if(d in n)return r(void 0,h)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(h,u)=>i(Da(h),Da(u),!0)};return T.forEach(Object.keys(Object.assign({},n,e)),function(u){const d=l[u]||i,f=d(n[u],e[u],u);T.isUndefined(f)&&d!==a||(t[u]=f)}),t}const uc="1.6.2",co={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{co[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const $a={};co.transitional=function(e,t,r){function i(s,o){return"[Axios v"+uc+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new K(i(o," has been removed"+(t?" in "+t:"")),K.ERR_DEPRECATED);return t&&!$a[o]&&($a[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};function Vd(n,e,t){if(typeof n!="object")throw new K("options must be an object",K.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=n[s],l=a===void 0||o(a,s,n);if(l!==!0)throw new K("option "+s+" must be "+l,K.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new K("Unknown option "+s,K.ERR_BAD_OPTION)}}const xs={assertOptions:Vd,validators:co},yt=xs.validators;class Gr{constructor(e){this.defaults=e,this.interceptors={request:new Ia,response:new Ia}}request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=fn(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:s}=t;r!==void 0&&xs.assertOptions(r,{silentJSONParsing:yt.transitional(yt.boolean),forcedJSONParsing:yt.transitional(yt.boolean),clarifyTimeoutError:yt.transitional(yt.boolean)},!1),i!=null&&(T.isFunction(i)?t.paramsSerializer={serialize:i}:xs.assertOptions(i,{encode:yt.function,serialize:yt.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&T.merge(s.common,s[t.method]);s&&T.forEach(["delete","get","head","post","put","patch","common"],c=>{delete s[c]}),t.headers=ht.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(t)===!1||(l=l&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const h=[];this.interceptors.response.forEach(function(g){h.push(g.fulfilled,g.rejected)});let u,d=0,f;if(!l){const c=[Na.bind(this),void 0];for(c.unshift.apply(c,a),c.push.apply(c,h),f=c.length,u=Promise.resolve(t);d<f;)u=u.then(c[d++],c[d++]);return u}f=a.length;let p=t;for(d=0;d<f;){const c=a[d++],g=a[d++];try{p=c(p)}catch(m){g.call(this,m);break}}try{u=Na.call(this,p)}catch(c){return Promise.reject(c)}for(d=0,f=h.length;d<f;)u=u.then(h[d++],h[d++]);return u}getUri(e){e=fn(this.defaults,e);const t=lc(e.baseURL,e.url);return rc(t,e.params,e.paramsSerializer)}}T.forEach(["delete","get","head","options"],function(e){Gr.prototype[e]=function(t,r){return this.request(fn(r||{},{method:e,url:t,data:(r||{}).data}))}});T.forEach(["post","put","patch"],function(e){function t(r){return function(s,o,a){return this.request(fn(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Gr.prototype[e]=t(),Gr.prototype[e+"Form"]=t(!0)});const Mr=Gr;class uo{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new er(s,o,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}static source(){let e;return{token:new uo(function(i){e=i}),cancel:e}}}const Jd=uo;function Gd(n){return function(t){return n.apply(null,t)}}function Kd(n){return T.isObject(n)&&n.isAxiosError===!0}const Ss={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ss).forEach(([n,e])=>{Ss[e]=n});const Zd=Ss;function hc(n){const e=new Mr(n),t=ql(Mr.prototype.request,e);return T.extend(t,Mr.prototype,e,{allOwnKeys:!0}),T.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return hc(fn(n,i))},t}const he=hc(lo);he.Axios=Mr;he.CanceledError=er;he.CancelToken=Jd;he.isCancel=ac;he.VERSION=uc;he.toFormData=Si;he.AxiosError=K;he.Cancel=he.CanceledError;he.all=function(e){return Promise.all(e)};he.spread=Gd;he.isAxiosError=Kd;he.mergeConfig=fn;he.AxiosHeaders=ht;he.formToJSON=n=>oc(T.isHTMLForm(n)?new FormData(n):n);he.getAdapter=cc.getAdapter;he.HttpStatusCode=Zd;he.default=he;const We=he;class tr{constructor(e){this._rev=void 0,this.id=e,this.createdAt=Date.now(),this.lastUpdated=Date.now()}processAPIResponse(e){e.ok&&(this._id=e.id,this._rev=e.rev)}}const hi=class hi extends tr{constructor(e,t){super(e),this._id=`${hi.modelName}:${this.id}`,this.name=t,this.credit=0,this.organisation=null,this.members=[],this.permission=[]}};hi.modelName="Group";let Ba=hi;const fi=class fi extends tr{constructor(e,t){super(e),this._id=`${fi.modelName}:${this.id}`,this.name=t,this.members=[],this.groups=[]}};fi.modelName="Organisation";let Fa=fi;const di=class di extends tr{constructor(e,t){super(e),this._id=`user:${this.id}`,this.email=null,this.username=t,this.status="active",this.credit=0,this.organisation=null,this.tier=null,this.password=null,this.salt=null,this.tags=[],this.settings=new Hl(this.id),this.tosAccepted=0}isAdmin(){return ae.warn("User.isAdmin() is deprecated. Use AuthIntegration.isAdmin() instead"),this.tags.some(e=>e==="admin")}static fromJSON(e){const t=new di(e.id,e.username);return t._id=e._id,t._rev=e._rev,t.id=e.id,t.createdAt=e.createdAt,t.lastUpdated=e.lastUpdated,t.email=e.email,t.username=e.username,t.status=e.status,t.externalId=e.externalId,t.authType=e.authType,t.credit=e.credit,t.organisation=e.organisation,t.tier=e.tier,t.password=e.password,t.salt=e.salt,t.tags=e.tags,t.tosAccepted=e.tosAccepted,t}};di.modelName="User";let za=di;const pi=class pi extends tr{constructor(e,t){super(e),this._id=`${pi.modelName}:${this.id}`,this.name=t,this.limits=[]}};pi.modelName="Tier";let ja=pi;const gi=class gi extends tr{constructor(e){super(e),this._id=`${gi.modelName}:${this.id}`,this.meta={name:"",description:"",owner:{id:"",type:"",name:""},revoked:!1},this.key="",this.vaultType="local",this.owner="",this.apiNamespace="",this.variableName=""}};gi.modelName="APIKey";let Ua=gi;class Xw extends io{constructor(e,t,r){super(e,t,r||{id:"messaging"}),this.config=r}}var Nr=(n=>(n.CLIENT_TOAST="client:toast",n.CUSTOM_EXTENSION_EVENT="custom_extension_event",n.SHOW_EXTENSION="extension:show",n))(Nr||{}),fc=(n=>(n.READY="ready",n.RUNNING="running",n.SUCCESS="success",n.STOPPED="stopped",n.FORCESTOP="forceStop",n.ERROR="error",n))(fc||{});class Qw{constructor(e){this._activeNode=[],this._activeNodeName="",this.errors=[],this._nodeNameMap={},this.id=e.id,this._state="ready",this._meta=e==null?void 0:e.meta,this._activity=""}get meta(){return this._meta}get activity(){return this._activity}get workflowId(){return this._workflowId}set workflowId(e){this._workflowId=e}get state(){return this._state}set state(e){this._state=e}get activeNode(){return this._activeNode}nodeDescriptionFromId(e){return this._nodeNameMap[e]??`node_${e}`}setNodeName(e,t){this._nodeNameMap[e]=t}}class Ha{static isValidUrl(e){let t;try{t=new URL(e)}catch{return!1}return t.protocol==="http:"||t.protocol==="https:"}static async fetchJSON(e,t=!0){return await new Promise((r,i)=>{this.isValidUrl(e)||i(new Error(`Invalid URL: ${e}`)),t&&(e=`/api/v1/mercenaries/fetch?url=${encodeURIComponent(e)}`),fetch(e).then(s=>{s.ok?r(s.json()):i(new Error(`Failed to fetch ${e}: ${s.status} ${s.statusText}`))}).catch(s=>{i(new Error(`Failed to fetch ${e}: ${s}`))})})}}class Yd extends Pf{constructor(e,t,r){r.singleton=!!r.singleton,super(e,t,r)}get singleton(){return this.extensionConfig.singleton}get winbox(){return this.extensionConfig.winbox}get client(){return this.app}get extensionConfig(){return this.config}get fileIntents(){return this.extensionConfig.fileIntents}get pinned(){return this.extensionConfig.addToSidebar===!0||this.extensionConfig.addToWorkbench===!0&&window.localStorage.getItem(`fav-extension${this.id}`)!==null}set pinned(e){e?window.localStorage.setItem(`fav-extension${this.id}`,"true"):window.localStorage.removeItem(`fav-extension${this.id}`)}async create(){var e;if(this.debug("create()",this.id),(e=this.extensionConfig.scripts)!=null&&e.client)for(const t in this.extensionConfig.scripts.client){const r=this.extensionConfig.scripts.client[t];try{this.info(`Deserializing client extension script, id:"${t}", text:`,r.length>60?r.slice(0,40)+"...":r);const s=(0,eval)("("+JSON.parse(r)+")"),o=s==null?void 0:s();o!=null&&o.exec&&(this.client.registerClientScript(t,o.exec),this.commands??(this.commands={}),this.commands[t]={title:o.title,description:o.description})}catch(i){this.error("Error registering extension script script",r.id,i)}}}}class dc extends Lf{constructor(e){super(e)}get extensions(){return this.children}get(e){return this.extensions.get(e)}has(e){return this.extensions.has(e)}all(){return Array.from(this.extensions.values())}async register(e,t,r){var s;this.debug(`registering ${t.id} extensions`);let i=new e(t.id,this,t);return r&&typeof r=="function"&&(i=r(i)),this.children.set(t.id,i),await((s=i.create)==null?void 0:s.call(i)),i}async init(){let e=await fetch("/api/v1/mercenaries/extensions");e=await e.json();for(const t of e){const r=await this.register(Yd,t);if(r.fileIntents){if(r.fileIntents.show&&Object.keys(r.fileIntents.show).length>0)for(const i in r.fileIntents.show){const s=r.fileIntents.show[i];this.app.sdkHost.registerFileIntent("show",i,{extensionId:r.id,page:s.page,opts:s.opts||{}})}if(r.fileIntents.edit&&Object.keys(r.fileIntents.edit).length>0)for(const i in r.fileIntents.edit){const s=r.fileIntents.edit[i];this.app.sdkHost.registerFileIntent("edit",i,{extensionId:r.id,page:s.page,opts:s.opts||{}})}}}}}class pc extends vs{constructor(e,t){super(e,t),this.scripts=new Map,this.renderers=new Map,this.extensions=new dc(this),this.abortController=new AbortController,this.registerClientScript("help",async r=>{const i=Array.from(this.scripts.keys()).filter(a=>a!=="help").sort().map(a=>({title:"/"+a,id:a,args:[],classes:["btn-xs","rounded","bg-slate-300","text-black","hover:bg-slate-700","hover:text-white","w-32"]})),s=["Welcome to **Omnitool.ai**.","Greetings to **Omnitool.ai**.","Salutations, to **Omnitool.ai**.","Welcome, you have arrived at **Omnitool.ai**.","Hello and welcome to **Omnitool.ai**.","Hey there, welcome to **Omnitool.ai**.","We are pleased to welcome you to **Omnitool.ai**.","Thanks for trying **Omnitool.ai**.","Nice to see you at **Omnitool.ai**.","Good to have you at **Omnitool.ai**.","Pleased to meet you at **Omnitool.ai**.","Glad you're here at **Omnitool.ai**.","Happy to have you at **Omnitool.ai**.","Delighted to see you at **Omnitool.ai**.","Thank you for being here at **Omnitool.ai**.","It's a pleasure to welcome you to **Omnitool.ai**.","You've arrived at the right place, **Omnitool.ai**.","We've been expecting you at **Omnitool.ai**.","You're in good company at **Omnitool.ai**."],o=s[Math.floor(Math.random()*Math.random()*s.length)];return this.sendSystemMessage(o,"text/markdown",{commands:i}),{response:"",hide:!0}})}async init(){try{this.version=await(await fetch("/version")).text(),this.info(`Binding to version ${this.version}...`),this.info("Initializing Extension System..."),await this.extensions.init(),this.success("Extension System successfully initialized.")}catch(e){this.error("Unable to load extensions. Proceeding without.",e)}}registerClientScript(e,t){this.success("registering client script",e),this.scripts.set(e,t)}async sendSystemMessage(e,t="text/markdown",r=[],i=[],s="omni"){this.sendSystemMessages([{message:e,type:t}],r,i,s)}async sendSystemMessages(e,t=[],r=[],i="omni"){const s={type:"chat:system",from:i||"omni",flags:new Set(r)},o={content:e.map(l=>({value:l.message,type:l.type??"text/markdown"})),attachments:t},a={...s,body:o};this.emit("send:message",a)}async runBlock(e){return await this.services.get("command").runServerScript("runBlock",e)}async runScript(e,t,r){r??(r={fromChatWindow:!1});const i=this;if(!e)return{error:{message:"No script specified"}};if(this.debug("executing script",e,t),this.scripts.has(e)){const s=this.scripts.get(e);try{const o=await(s==null?void 0:s(t??[]))||{};if(o.response){const a=o.hide??!1;return r.fromChatWindow||a||await i.sendSystemMessage(o.response),{response:o.response,hide:a,result:o.result}}else return{error:o.error}}catch(o){return this.error("Error running client script",o),{error:{message:o.message}}}}else try{return await this.services.get("command").runServerScript(e,t)}catch(s){return this.error("Error running server script",s),{error:{message:s.message||s}}}}async onStart(){return!0}}class ev extends io{constructor(e,t,r){super(e,t,r||{id:e})}async login(e,t){const r=this.config;if(!e||!t)return null;try{const i=await We.post(r.host+r.authUrl,{username:e,password:t},{withCredentials:!0});return await this.emit("authenticated",i==null?void 0:i.data),i==null?void 0:i.data}catch(i){if(i.response.status===404)throw new Error("Login failed! Unable to connect with authentication service. (Error code 404.)");return this.error("Failed to connect to auth server "+i),null}}async register(e,t){const r=this.config;if(!e||!t)return null;try{const i=await We.put(r.host+r.signupUrl,{username:e,password:t},{withCredentials:!0});return await this.emit("authenticated",i==null?void 0:i.data),i==null?void 0:i.data}catch(i){return this.error("Failed to connect to auth server "+i),null}}async logout(){const e=this.config;this.debug("Logout URL ",e.host+e.logoutUrl);try{await We.post(e.host+e.logoutUrl,{},{withCredentials:!0}),await this.emit("authenticated",null)}catch(t){this.error("Failed to connect with auth server"+t)}}async getAuthenticatedUser(){const e=this.config;try{const t=await We.get(e.host+e.userUrl,{withCredentials:!0});return await this.emit("authenticated",t==null?void 0:t.data),t.data!=null?t==null?void 0:t.data:null}catch(t){return this.error("Failed to connect with auth server"+t),null}}async tryAutoLogin(){const e=this.config;try{const t=await We.get(`${e.host}/api/v1/auth/autologin`,{withCredentials:!0});return await this.emit("authenticated",t==null?void 0:t.data),t.data!=null?t==null?void 0:t.data:null}catch(t){return this.error("Failed to connect with auth server"+t),null}}create(){return this.info(`${this.id} create`),!0}async load(){return this.info(`${this.id} load`),!0}async start(){return this.info(`${this.id} start`),!0}async stop(){return this.info(`${this.id} stop`),!0}}var Xd=(n=>(n[n.User=0]="User",n[n.Omni=1]="Omni",n[n.AsyncJob=2]="AsyncJob",n))(Xd||{});class Bt{static GetMessageStorageType(e){return e.from!==void 0&&e.from==="omni"?1:e.sender!==void 0&&e.sender==="me"?0:2}static async IsValidImageUrl(e){var t;try{const r=await fetch(e,{method:"HEAD"});return r.ok?((t=r.headers.get("Content-Type"))==null?void 0:t.startsWith("image"))??!1:!1}catch{return!1}}static CreateAsyncJobServerPayload(e,t){return{message:e,sender:"asyncjob",ts:t}}static IsAsyncJobMessage(e){var t,r;try{return((r=(t=e.body)==null?void 0:t.content[0])==null?void 0:r.type)==="omni/job"}catch{return!1}}static GetAsyncJobIdFromMessage(e){try{return e.body.content[0].value}catch{return null}}static ShouldPersist(e){var r;if(this.GetMessageStorageType(e)===0||this.GetMessageStorageType(e)===2)return!0;const t=e;return Bt.HasChatContentProperty(t,"images")?!0:Bt.HasChatContentProperty(t,"commands")?!1:!!(Bt.HasChatContentProperty(t,"text")||((r=e.body)==null?void 0:r.content)!==void 0)}static HasChatContentProperty(e,t){var r;try{return((r=e.body.attachments[t])==null?void 0:r.length)>0}catch{return!1}}}const Qd=()=>new Intl.DateTimeFormat("en-US",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date);class ep{constructor(e,t){this._id=e.id,this._opts=t}get id(){return this._id}get opts(){return this._opts}}class pt extends ep{constructor(e,t){super(e,t)}load(){return Promise.resolve()}}class tv extends io{constructor(e,t,r){super(e,t,r||{id:e}),this._renderers=new Map,this.activeContextId=0,this.state=r.initialState??{},this.workbench=r.workbench,this._pendingAsyncJobUpdates=new Map}async registerRenderer(e){var t;this.info(`registering renderer ${e.id}`),this._renderers.set(e.id,e),await((t=e.load)==null?void 0:t.call(e))}renderMessage(e){return(e==null?void 0:e.length)===0?null:e.map(t=>this.renderContent(t)).join(`
`)}async onChatMessage(e){await this._onChatMessage(e),await this.updateChatServer(e,Date.now())}async _onChatMessage(e){var u,d,f,p,c,g;const t=e.body;if(!t)return;const{from:r,flags:i,workflowId:s}=e,{attachments:o,content:a}=t,l=this.renderMessage(a),h={sender:r||"omni",text:l,whenText:Qd(),attachments:0,workflowId:s??((d=(u=this.workbench)==null?void 0:u.activeWorkflow)==null?void 0:d.id),flags:i||new Set};for(const m in o)["sender","text","whenText","attachments"].includes(m)||(o.key&&((p=(f=o==null?void 0:o[m])==null?void 0:f.forEach)==null||p.call(f,y=>{var _;const w=y&&(y.fid??((_=y==null?void 0:y.ticket)==null?void 0:_.fid));w&&(y.url="/fid/"+w)})),h[m]=o[m],h.attachments+=isNaN((c=o[m])==null?void 0:c.length)?0:(g=o[m])==null?void 0:g.length);await this.emitGlobalEvent("chat_message_added",[h]),this.state.messages.push(h)}async updateChatServer(e,t){if(Bt.IsAsyncJobMessage(e)){const r=Bt.GetAsyncJobIdFromMessage(e);r!==null&&this._pendingAsyncJobUpdates.set(r,!0);return}Bt.ShouldPersist(e)&&(this.workbench===null||this.workbench.activeWorkflow===null||(e.workflowId=this.workbench.activeWorkflow.id,await We.put(`/api/v1/chat/${this.activeContextId}`,{payload:{msgstore:e,version:0,ts:t}},{withCredentials:!0}).then(r=>{},r=>{ae.error(r.message)})))}async clearChat(){await We.delete(`/api/v1/chat/${this.activeContextId}`,{withCredentials:!0}).then(e=>{},e=>{ae.error(e.message)})}async postUpdateChatServerForJobs(e,t,r){this._pendingAsyncJobUpdates.get(t)&&(await this.updateChatServer(e,r),this._pendingAsyncJobUpdates.delete(t))}renderContent(e){const t=this._renderers.get(e.type);return t!=null?t.render(e):`Error: Unknown chat renderer type ${e.type}`}create(){return this.info(`${this.id} create`),!0}async load(){return this.info(`${this.id} load`),!0}async start(){return this.info(`${this.id} start`),!0}async stop(){return this.info(`${this.id} stop`),!0}}const nv=(n,e,t=pc)=>new t(n,e);class Gn extends bi{constructor(){super(...arguments);W(this,"_errors",[]);W(this,"_dirty",0);W(this,"_flags",[])}get displayName(){let t=this.meta.name||this.id;return this.isDirty&&(t+="*"),this.readOnly&&(t+=" (read-only)"),this.copyOnWrite&&(t+=" (copy-on-write)"),t}hasFlag(t){if(t!==t.toLowerCase())throw new Error(`ClientWorkflow Flag "${t}" must be lower-case`);return this._flags.includes(t)}setFlag(t,r=!0){if(t!==t.toLowerCase())throw new Error(`ClientWorkflow Flag "${t}" must be lower-case`);if(r){this._flags.includes(t)||this._flags.push(t);return}this._flags=this._flags.filter(i=>i!==t)}clearFlag(t){this.setFlag(t,!1)}get isDirty(){return this._dirty!==0}setDirty(){this._dirty=1}get copyOnWrite(){return this.hasFlag("copyonwrite")}set copyOnWrite(t){this.setFlag("copyonwrite",t)}get readOnly(){return this.hasFlag("readonly")}set readOnly(t){this.setFlag("readonly",t)}static async clone(t){const i=(await We.post("/api/v1/workflow/clone",{...t},{withCredentials:!0})).data.workflow;return Gn.fromJSON(i)}async syncToServer(){if(this.readOnly)return!1;this.copyOnWrite&&(this.copyOnWrite=!1,this.id="");const t=new Date().getTime();this._dirty=t,this.meta.updated=Date.now();const r=window.Alpine.raw(this.toJSON());try{const i=await We({method:this.id?"put":"post",url:"/api/v1/workflow",data:r,withCredentials:!0});if(i.status!==200||!i.data.workflow)return!1;const s=i.data.workflow.id;if(!s)throw new Error("Server did not return a valid recipe Id");this.id&&this.id!==s&&ae.log("server updated our id unexpectedly",this.id,s),this.id=s}catch(i){return ae.log("error writing to server",i),!1}return this._dirty===t&&(this._dirty=0),!0}static fromJSON(t,r=void 0){const i=new Gn(t.id);return i.id=t.id,!i.id&&t._id&&(i.id=t._id.replace("wf:","")),i.setMeta(t.meta),i.setRete(t.rete),i.setAPI(t.api),r&&r.length>0?i._flags=r:t._flags&&(i._flags=t._flags),i}toJSON(){const t=super.toJSON();return t._flags=this._flags,t}}class tp{constructor(){W(this,"_activeRecipe",null);W(this,"nicknames",{});W(this,"_activeExtension");W(this,"showFloatingExtension",!1);W(this,"floatingExtensionX",window.screen.width/2);W(this,"floatingExtensionY",window.screen.height/2);W(this,"refreshTS",Date.now());W(this,"isLoading",!1)}get activeExtension(){return this._activeExtension}hideExtension(){this._activeExtension=void 0}showExtension(e,t,r="",i){var c,g,m;i??(i={}),r.length>0&&!r.endsWith(".html")&&(r=r+".html");const s=this.getClient().extensions.get(e);if(!s)return;this._activeExtension=s;const o=(i.displayMode??((c=s==null?void 0:s.extensionConfig)==null?void 0:c.displayMode))||"default";let a="";const l=Date.now();if(typeof t=="string")a=`/extensions/${e}/${r}?${t}&ts=${l}&o=${encodeURIComponent(JSON.stringify({mode:o,hideToolbar:i.hideToolbar}))}`;else if(!t||typeof t=="object"){t??(t={});const y="q="+encodeURIComponent(JSON.stringify(t)),w="o="+encodeURIComponent(JSON.stringify({mode:o,hideToolbar:i.hideToolbar}));a=`/extensions/${e}/${r}?${y}&${w}`,ae.debug("rev",new URLSearchParams(a.toString()).toString())}const h=i.singletonHash??(s.singleton?s.id:void 0),u=Object.assign({},{...s.extensionConfig.winbox||{x:"center",y:"center"},title:s.extensionConfig.title||s.id},i.winbox||{}),d=window.screen.height,f=window.screen.width;typeof u.height=="string"&&(u.height=parseInt(u.height)/100*d),typeof u.width=="string"&&(u.width=parseInt(u.width)/100*f);const p=this.getClient().toggleWindow(a,h,u);p&&((g=p.show)==null||g.call(p)),(m=this.getClient().extensions.get(e))!=null&&m.extensionConfig.minimizeChat&&this.getClient().uiSettings.toggleMinimized(!0)}refreshUI(){this.refreshTS=Date.now()}isSingletonActive(e){return!!this.getClient().getWindow(e)}getClient(){return window.client}getExtensions(){return this.getClient().extensions.all()}get activeWorkflow(){return this._activeRecipe}get activeRecipe(){return this._activeRecipe}set activeRecipe(e){this._activeRecipe=e}get activeRecipeId(){var e;return(e=this._activeRecipe)==null?void 0:e.id}getMetaDataBlock(){return this.activeWorkflow?Object.values(this.activeWorkflow.rete.nodes).find(t=>t.name==="omnitool.recipe_metadata"):void 0}updateMetaFromBlock(){if(!this.activeWorkflow)return;const e=this.getMetaDataBlock();e&&(this.activeWorkflow.meta.name=e.data.title,this.activeWorkflow.meta.description=e.data.description,this.activeWorkflow.meta.author=e.data.author,this.activeWorkflow.meta.help=e.data.help)}setDemoRecipe(e,t){this.getRecipeIdFromNickname(e),this.setNickname(e,t)}async _load(){this.updateNickNames(),this.setDemoRecipe("Bugbear","c0deba5e-417d-49df-96d3-8aeb8fc15402");const e=this.getClient(),t=i=>{for(const s in i)Array.isArray(i[s].connections)&&i[s].connections.length===0&&delete i[s].connections},r=function(i){for(const s in i)["inputs","controls","outputs"].forEach(o=>{Object.prototype.hasOwnProperty.call(i[s],o)&&t(i[s][o])});return i};return e.registerClientScript("explain",async i=>{if(!this.activeWorkflow)return;const s=i[0]||"beginner just learning omnitool and AI",o=await this.activeWorkflow.toJSON(),a=r(o.rete);await e.sendSystemMessage(` Analyzing the recipe to provide an explanation for a ${s}. Please wait...`);const l=o.meta.name,h=o.meta.pictureUrl;let u=`Acting as a smart, thoughtful, humble, and experienced teacher, given a Rete.js workflow, please explain using proper language and analogies for a ${s} what the purpose of the recipe this workflow represents is and how it operates.
Format your explanation using markdown.
Start with a Level 1 heading titled '${l}'.`;h&&(u+=` Add an image tag pointing to '/${h}' below the heading.`),u+=` Break the document into logical sections with Level 2 headings (Overview, Nodes Explanation, Recipe).
When referring to a "Rete Workflow", use the word "Recipe" instead.
When referring to a "Rete Node", use the word "Block" instead.
Explain the most critical and commonly misunderstood blocks in detail.
Do not include JSON notation or mention the JSON directly inside the markdown.
Remember that the user cannot see the node id numbers. The numbers for your use only. When referencing the blocks, use the block name, (or "x-omni-title") instead.
Close with a "Further Exploration" section that contains 1-2 bullet points with interesting aspects for the user to explore when looking to extend the recipe.`;const d=await e.runBlock({block:"omnitool.large_language_model",args:{Instruction:u,Prompt:JSON.stringify(a),Criteria:"Accurate"}});if(!(d!=null&&d.Reply)){await e.sendSystemMessage("Apologies, there was a problem analyzing the recipe.");return}let f=d.Reply;f=f.replace(/node/gi,"Block"),f=f.replace(/workflow/gi,"Recipe"),this.showExtension("omni-core-viewers",{markdown:f},"markdown",{displayMode:"floating"})}),e.registerClientScript("save",async()=>{if(this.canSave)try{return await this.save(),{response:"Recipe saved."}}catch(i){return await this.getClient().sendSystemMessage("Failed to save recipe"+i.message,"text/plain",{},["error"]),{error:"Failed to save"}}}),e.registerClientScript("dump",async()=>{if(this.activeRecipe==null)return;await this.syncToServer();const i=document.createElement("a");return i.style.display="none",i.href=`/api/v1/workflow/download/${this.activeRecipe.id}`,document.body.appendChild(i),i.click(),document.body.removeChild(i),"Recipe Exported"}),e.registerClientScript("load",async i=>{if(this.canSave&&await this.save(),i.length===0)return"Loads a recipe. Usage: /load <url>";const s=i[0];if(!Ha.isValidUrl(s))return"Invalid URL";const o=await Ha.fetchJSON(s);return await this.loadFromJSON(o),`Recipe loaded from  ${s}`}),e.registerClientScript("setname",async i=>{const s=i[0];if(!s)return{response:`**setname**  
Sets a nickname for the current recipe, allowing you to invoke it at any time by using **@nickname** in chat.  
Usage: **/setname** <name> 
`};this.deleteNickname(s);for(let a=0;a<10;a++){const l=this.getNickname();if(!l)break;this.deleteNickname(l)}return this.setNickname(s)?{response:`Recipe nickname set to **${s}**. You can now start this recipe from any chat by using **@${s}** <text>.`}:{response:"Failed to set nickname."}}),e.registerClientScript("unsetname",async i=>{if(i.length>0){const s=i[0];if(this.deleteNickname(s))return{response:"Recipe nickname removed."}}return{response:`**unsetsetname**  
Removes a nickname for a recipe previously set with /setname.  
Usage: **/unsetname** <name> 
`}}),e.registerClientScript("toggleFavorite",async i=>{if(i.length>0){const s=i[0];return window.localStorage.getItem(s)!==null?window.localStorage.removeItem(s):window.localStorage.setItem(s,new Date().getTime().toString()),!0}return!1}),!0}async load(){try{return await this._load()}catch{alert(`An unexpected error occurred while loading the workbench.

You will experience further errors that cannot be fixed.

Please reload the app and try again.`)}return!1}get displayName(){const e=this.activeWorkflow,t=this.getNickname();return e!=null?`${e.displayName} ${t?"(@"+t+")":""} `:"Welcome to Omnitool.ai!"}get canEdit(){return!this.readOnly}get canExecute(){return!!this.activeRecipe}get canExport(){return!!this.activeRecipe}get canFavorite(){return!!this.activeRecipe}get canSave(){return!this.readOnly}get canSaveAs(){return!!this.activeRecipe}get isBlank(){return!this.activeWorkflow||this.activeWorkflow.isBlank}get isFavorite(){return window.localStorage.getItem("fav-recipe"+this.activeRecipeId)!==null}isRunningActiveWorkflow(){return this.activeWorkflow!=null?this.getClient().jobs.getJobsforWorkflow(this.activeWorkflow.id).find(t=>t.state===fc.RUNNING):!1}get copyOnWrite(){var e;return((e=this.activeRecipe)==null?void 0:e.copyOnWrite)??!1}get readOnly(){var e;return((e=this.activeWorkflow)==null?void 0:e.readOnly)??!0}getScopedKeyFromUserKey(e){const t=e==null?void 0:e.trim();return t?`workbench:${t}`:""}setWorkbenchSetting(e,t){typeof t=="object"&&(t=JSON.stringify(t));const r=this.getScopedKeyFromUserKey(e);if(!r)return ae.error("Invalid workbench setting key: ",e),!1;if(!t){const i=window.localStorage.getItem(r);return window.localStorage.removeItem(r),ae.debug("Removed workbench setting: ",e),!!i}return window.localStorage.setItem(r,t),ae.info("Set workbench setting: ",e),!0}deleteWorkbenchSetting(e){return this.setWorkbenchSetting(e,"")}getWorkbenchSetting(e){const t=this.getScopedKeyFromUserKey(e);if(!t){ae.error("Invalid workbench setting key: ",e);return}const r=window.localStorage.getItem(t);try{return JSON.parse(r??"")}catch{}return r}getWorkbenchSettingKeys(e){const t=[],r=`workbench:${e}`;for(let i=0;i<window.localStorage.length;i++){const s=window.localStorage.key(i);s!=null&&s.startsWith(r)&&t.push(s.substring(r.length))}return t}getKeyFromNickname(e){const t=e.trim().toLowerCase().replace(/[^a-z0-9]/g,"");return t?`nicknames:${t}`:void 0}deleteNickname(e){const t=this.getKeyFromNickname(e);return this.deleteWorkbenchSetting(t)}setNickname(e,t){var o;e=e.trim(),t??(t=(o=this.activeWorkflow)==null?void 0:o.id);const r=this.getKeyFromNickname(e);if(!r)return!1;const i={nickname:e,id:t},s=this.setWorkbenchSetting(r,i);return this.updateNickNames(),s}getNickname(e){var r;if(e??(e=(r=this.activeRecipe)==null?void 0:r.id),!e)return;const t=this.getWorkbenchSettingKeys("nicknames:");for(let i=0;i<t.length;i++){const s=t[i],o=this.getWorkbenchSetting(`nicknames:${s}`);if(o&&o.id===e)return o.nickname}}updateNickNames(){const e=[];this.getWorkbenchSettingKeys("nicknames:").forEach(i=>{const s=this.getWorkbenchSetting(`nicknames:${i}`);s!=null&&s.nickname&&e.push(s)}),e.sort((i,s)=>i.nickname.localeCompare(s.nickname));const r={};e.forEach(i=>{r[i.nickname]=i}),this.nicknames=r}async syncToServer(){if(!this.activeRecipe)return ae.error("workbench.syncToServer(): No active recipe"),!1;if(this.writeActiveRecipeIdToLocalStorage(),!this.activeRecipe.isDirty)return!0;const e=await this.activeRecipe.syncToServer();return this.writeActiveRecipeIdToLocalStorage(),e}async saveAs(){if(!this.activeWorkflow){ae.error("saveAs(): No active recipe");return}const e=this.activeWorkflow;let t=prompt("Recipe name:",e.meta.name||"My Recipe");if(t=t?t.trim():null,!t)return;const r=this.getMetaDataBlock();r&&(r.data.title=t),e.meta.name=t,e.id="",e.readOnly=!1,e.copyOnWrite=!1,e.setDirty(),await this.save()}async save(){if(!this.activeWorkflow){ae.error("workbench.save(): No active recipe");return}this.updateMetaFromBlock();let e="Saving recipe...";await this.syncToServer()?(e=`Recipe "${this.activeWorkflow.meta.name}" saved.`,await this.loadFromCache(!1)):e=`Recipe "${this.activeWorkflow.meta.name}" (${this.activeWorkflow.id}) unable to save.`,await this.getClient().sendSystemMessage(e)}async forceSave(){this.activeRecipe&&this.activeRecipe.setDirty(),await this.save()}getRecipeIdFromNickname(e){const t=this.getKeyFromNickname(e);return t?this.getWorkbenchSetting(t):void 0}async executeByName(e,t){var i;if(e==="omni"){const s=(i=this.activeWorkflow)==null?void 0:i.id;return await this.executeById(s,t)}const r=this.getRecipeIdFromNickname(e);if(!r){await this.getClient().sendSystemMessage(`There is no recipe by the name of "*${e}*"!`);return}return t.xOmniNickName=e,await this.executeById(r.id,t)}async executeById(e,t){var o,a;if(ae.debug("workbench.executeById",e,t),((o=this.activeWorkflow)==null?void 0:o.id)===e){if(!this.readOnly&&!await this.syncToServer())return null;e=(a=this.activeWorkflow)==null?void 0:a.id}if(!e)throw new Error(`Invalid recipe id: ${e} Cannot execute.`);const r=this.getClient();t=JSON.parse(JSON.stringify(Object.assign({},r.clipboard,t))),r.clipboard={};const i={workflow:e,args:t};return(await We.post("/api/v1/workflow/exec",i,{withCredentials:!0})).data.result}async execute(e={}){if(this.activeWorkflow==null){ae.error(`execute(${e}): No active workflow`);return}return this.writeActiveRecipeIdToLocalStorage(),await this.executeById(this.activeWorkflow.id,e)}async loadFromCache(e=!0){const t=window.localStorage.getItem("active_recipe_id");await this.loadRecipe(t,e)}async remixRecipe(){const e=this.activeWorkflow;if(!e)throw new Error("Cannot remix empty recipe");if(!e.id)throw new Error("Cannot remix unsaved recipe");let t=prompt("Recipe name:",`My ${e.meta.name}`);if(t=t?t.trim():null,!t)return null;const r=JSON.parse(JSON.stringify(e.meta));r.name=t,delete r.template,r.tags&&Array.isArray(r.tags)&&(r.tags=r.tags.filter(s=>s!=="template"&&s!=="#template"));const i=await Gn.clone({id:e.id,meta:r});return i?(await this.loadRecipe(i.id),this.activeWorkflow):null}async newRecipe(e=""){var i;if(e||(e=prompt("Name for new recipe:","My Recipe"),e=e?e.trim():null),!e)return;await this.loadFromJSON({}),await this.getClient().runScript("add",["omnitool.recipe_metadata"],{fromChatWindow:!1});const t=this.getMetaDataBlock();t&&(t.data.title=e,this.updateMetaFromBlock()),(i=this.activeRecipe)==null||i.setDirty(),await this.syncToServer(),await this.loadFromCache();const r=this.activeRecipe?`Recipe "${this.activeRecipe.meta.name}" created.`:"Failed to create a new recipe.";await this.getClient().sendSystemMessage(r)}async loadFromJSON(e,t,r=!0){var s;this.activeRecipe=null,this.isLoading=!0,this.activeRecipe=Gn.fromJSON(e,t),this.writeActiveRecipeIdToLocalStorage();const i=!0;this.activeRecipe.readOnly&&i&&(this.activeRecipe.copyOnWrite=this.activeRecipe.readOnly,this.activeRecipe.readOnly=!1),await this.getClient().emit("workbench_workflow_loaded",(s=this.activeRecipe)==null?void 0:s.id),this.showRecipeHelp(),r&&await this.getClient().runScript("fit",{}),this.isLoading=!1}async loadRecipe(e,t=!0){if(this.activeRecipe=null,!e){console.log(`Unable to load recipe with id: ${e}`);return}let r;try{r=await We.get(`/api/v1/workflow/${e}`,{withCredentials:!0})}catch(o){console.log(`Error loading recipe with id: ${e}, error: ${o}`);return}const i=r.data.workflow,s=r.data.flags;await this.loadFromJSON(i,s,t)}async onLoadRecipeFromFileChange(e){var i,s,o,a,l,h,u;const t=((i=e==null?void 0:e.dataTransfer)==null?void 0:i.files)||((s=e==null?void 0:e.target)==null?void 0:s.files);let r;if(t.length>0){const d=t[0];if(d.name.endsWith(".json")&&d.type==="application/json")r=await new Promise((f,p)=>{const c=new FileReader;c.onload=g=>{var m;f(JSON.parse(((m=g==null?void 0:g.target)==null?void 0:m.result)??"{}"))},c.onerror=g=>{p(g)},c.readAsText(d)});else if(d.name.endsWith(".sql")){const f=await this.getClient().sdkHost.uploadSingleFile(d,"temporary");if(f&&(f.ticket||f.fid)){const p=await this.getClient().sdkHost.runServerScript("workflow",["import",f.fid??((o=f.ticket)==null?void 0:o.fid)]);p&&p.length>0&&(r=p[0])}}}r!=null&&r.id&&((a=r==null?void 0:r.meta)!=null&&a.name)&&((h=(l=r==null?void 0:r.rete)==null?void 0:l.id)!=null&&h.startsWith("mercs@"))&&(r.id="",await this.loadFromJSON(r),(u=this.activeWorkflow)==null||u.setDirty())}writeActiveRecipeIdToLocalStorage(){var t;const e=(t=this.activeWorkflow)==null?void 0:t.id;if(!e){window.localStorage.removeItem("active_recipe_id");return}window.localStorage.setItem("active_recipe_id",e)}generateAutoHelp(e){const t=`## New Recipe Checklist  
*Steps to take before running your recipe:*  

`,r=[{text:"Add a Recipe Metadata Block",check:()=>e.rete.nodes.find(o=>o.name==="omnitool.recipe_metadata")},{text:"Add a Chat Input Block",check:()=>e.rete.nodes.find(o=>o.name==="omnitool.chat_input")},{text:"Add a Chat Output Block",check:()=>e.rete.nodes.find(o=>o.name==="omnitool.chat_output")},{text:"Replace this Checklist by adding your own help information into the recipe metadata block",check:()=>!1}],i=`  

This checklist auto-updates every time the recipe is saved.`;return t+r.map(o=>o.check()?` ${o.text}`:` ${o.text}`).join(`  
`)+i}showTutorial(e){const t="workflow-tutorial";this.showExtension("omni-core-viewers",{video:"https://github.com/mercenaries-ai/omnitool-tutorials/releases/download/latest/quickstart.mp4"},"video.html",{singletonHash:t,winbox:{title:"Quickstart Video",minwidth:960,minheight:575,modal:e}})}showApiManagement(){this.showExtension("omni-core-collectionmanager",{type:"api"},void 0,{winbox:{title:"API Management",modal:!0},singletonHash:"omni-core-collectionmanager-api"})}toggleDevTool(){if(this.getClient().extensions.has("omni-extension-log-viewer")){const e="omni-extension-log-viewer";this.getClient().getWindow(e)?this.getClient().closeWindow(e):this.showExtension("omni-extension-log-viewer",{},void 0,{winbox:{title:"Developer Tool",x:"center",y:"bottom",width:1e3,height:200},singletonHash:"omni-extension-log-viewer"})}}showRecipeHelp(){var a,l;const e="workflow-intro",t=this.activeRecipe;if(!t){this.getClient().closeWindow(e);return}const r=(l=(a=t==null?void 0:t.meta)==null?void 0:a.help)==null?void 0:l.trim(),i=r?r.length?r:this.generateAutoHelp(t):this.generateAutoHelp(t),s="workflow-ui"+t.id,o=Object.values(window.Alpine.raw(t.rete.nodes)).find(h=>h.name==="omni-core-formio:formio.auto_ui");o&&o.data.enableUI&&this.showExtension("omni-core-formio",{recipe:{id:t.id,version:void 0}},o.data.editMode?"edit":"render",{singletonHash:s,winbox:{title:""+t.meta.name,x:"center",y:"center",minwidth:800,minheight:600,autosize:!0},hideToolbar:!0}),this.showExtension("omni-core-viewers",{markdown:i},"markdown",{singletonHash:e,winbox:{title:" '"+t.meta.name+"' - Information",x:"right",y:"bottom",minheight:450,minwidth:400,autosize:!0},hideToolbar:!0})}}var np=Object.create,ho=Object.defineProperty,rp=Object.getOwnPropertyDescriptor,gc=Object.getOwnPropertyNames,ip=Object.getPrototypeOf,sp=Object.prototype.hasOwnProperty,op=(n,e,t)=>e in n?ho(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Tn=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')}),q=(n,e)=>function(){return e||(0,n[gc(n)[0]])((e={exports:{}}).exports,e),e.exports},ap=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of gc(e))!sp.call(n,i)&&i!==t&&ho(n,i,{get:()=>e[i],enumerable:!(r=rp(e,i))||r.enumerable});return n},lp=(n,e,t)=>(t=n!=null?np(ip(n)):{},ap(e||!n||!n.__esModule?ho(t,"default",{value:n,enumerable:!0}):t,n)),ce=(n,e,t)=>(op(n,typeof e!="symbol"?e+"":e,t),t),cp=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},Wa=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},Es=(n,e,t)=>(cp(n,e,"access private method"),t),Oe=q({"../../node_modules/handlebars/dist/cjs/handlebars/utils.js"(n){n.__esModule=!0,n.extend=s,n.indexOf=h,n.escapeExpression=u,n.isEmpty=d,n.createFrame=f,n.blockParams=p,n.appendContextPath=c;var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},t=/[&<>"'`=]/g,r=/[&<>"'`=]/;function i(g){return e[g]}function s(g){for(var m=1;m<arguments.length;m++)for(var y in arguments[m])Object.prototype.hasOwnProperty.call(arguments[m],y)&&(g[y]=arguments[m][y]);return g}var o=Object.prototype.toString;n.toString=o;var a=function(m){return typeof m=="function"};a(/x/)&&(n.isFunction=a=function(g){return typeof g=="function"&&o.call(g)==="[object Function]"}),n.isFunction=a;var l=Array.isArray||function(g){return g&&typeof g=="object"?o.call(g)==="[object Array]":!1};n.isArray=l;function h(g,m){for(var y=0,w=g.length;y<w;y++)if(g[y]===m)return y;return-1}function u(g){if(typeof g!="string"){if(g&&g.toHTML)return g.toHTML();if(g==null)return"";if(!g)return g+"";g=""+g}return r.test(g)?g.replace(t,i):g}function d(g){return!g&&g!==0?!0:!!(l(g)&&g.length===0)}function f(g){var m=s({},g);return m._parent=g,m}function p(g,m){return g.path=m,g}function c(g,m){return(g?g+".":"")+m}}}),Ke=q({"../../node_modules/handlebars/dist/cjs/handlebars/exception.js"(n,e){n.__esModule=!0;var t=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function r(i,s){var o=s&&s.loc,a=void 0,l=void 0,h=void 0,u=void 0;o&&(a=o.start.line,l=o.end.line,h=o.start.column,u=o.end.column,i+=" - "+a+":"+h);for(var d=Error.prototype.constructor.call(this,i),f=0;f<t.length;f++)this[t[f]]=d[t[f]];Error.captureStackTrace&&Error.captureStackTrace(this,r);try{o&&(this.lineNumber=a,this.endLineNumber=l,Object.defineProperty?(Object.defineProperty(this,"column",{value:h,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:u,enumerable:!0})):(this.column=h,this.endColumn=u))}catch{}}r.prototype=new Error,n.default=r,e.exports=n.default}}),up=q({"../../node_modules/handlebars/dist/cjs/handlebars/helpers/block-helper-missing.js"(n,e){n.__esModule=!0;var t=Oe();n.default=function(r){r.registerHelper("blockHelperMissing",function(i,s){var o=s.inverse,a=s.fn;if(i===!0)return a(this);if(i===!1||i==null)return o(this);if(t.isArray(i))return i.length>0?(s.ids&&(s.ids=[s.name]),r.helpers.each(i,s)):o(this);if(s.data&&s.ids){var l=t.createFrame(s.data);l.contextPath=t.appendContextPath(s.data.contextPath,s.name),s={data:l}}return a(i,s)})},e.exports=n.default}}),hp=q({"../../node_modules/handlebars/dist/cjs/handlebars/helpers/each.js"(n,e){n.__esModule=!0;function t(o){return o&&o.__esModule?o:{default:o}}var r=Oe(),i=Ke(),s=t(i);n.default=function(o){o.registerHelper("each",function(a,l){if(!l)throw new s.default("Must pass iterator to #each");var h=l.fn,u=l.inverse,d=0,f="",p=void 0,c=void 0;l.data&&l.ids&&(c=r.appendContextPath(l.data.contextPath,l.ids[0])+"."),r.isFunction(a)&&(a=a.call(this)),l.data&&(p=r.createFrame(l.data));function g(b,v,E){p&&(p.key=b,p.index=v,p.first=v===0,p.last=!!E,c&&(p.contextPath=c+b)),f=f+h(a[b],{data:p,blockParams:r.blockParams([a[b],b],[c+b,null])})}if(a&&typeof a=="object")if(r.isArray(a))for(var m=a.length;d<m;d++)d in a&&g(d,d,d===a.length-1);else if(typeof Symbol=="function"&&a[Symbol.iterator]){for(var y=[],w=a[Symbol.iterator](),_=w.next();!_.done;_=w.next())y.push(_.value);a=y;for(var m=a.length;d<m;d++)g(d,d,d===a.length-1)}else(function(){var b=void 0;Object.keys(a).forEach(function(v){b!==void 0&&g(b,d-1),b=v,d++}),b!==void 0&&g(b,d-1,!0)})();return d===0&&(f=u(this)),f})},e.exports=n.default}}),fp=q({"../../node_modules/handlebars/dist/cjs/handlebars/helpers/helper-missing.js"(n,e){n.__esModule=!0;function t(s){return s&&s.__esModule?s:{default:s}}var r=Ke(),i=t(r);n.default=function(s){s.registerHelper("helperMissing",function(){if(arguments.length!==1)throw new i.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=n.default}}),dp=q({"../../node_modules/handlebars/dist/cjs/handlebars/helpers/if.js"(n,e){n.__esModule=!0;function t(o){return o&&o.__esModule?o:{default:o}}var r=Oe(),i=Ke(),s=t(i);n.default=function(o){o.registerHelper("if",function(a,l){if(arguments.length!=2)throw new s.default("#if requires exactly one argument");return r.isFunction(a)&&(a=a.call(this)),!l.hash.includeZero&&!a||r.isEmpty(a)?l.inverse(this):l.fn(this)}),o.registerHelper("unless",function(a,l){if(arguments.length!=2)throw new s.default("#unless requires exactly one argument");return o.helpers.if.call(this,a,{fn:l.inverse,inverse:l.fn,hash:l.hash})})},e.exports=n.default}}),pp=q({"../../node_modules/handlebars/dist/cjs/handlebars/helpers/log.js"(n,e){n.__esModule=!0,n.default=function(t){t.registerHelper("log",function(){for(var r=[void 0],i=arguments[arguments.length-1],s=0;s<arguments.length-1;s++)r.push(arguments[s]);var o=1;i.hash.level!=null?o=i.hash.level:i.data&&i.data.level!=null&&(o=i.data.level),r[0]=o,t.log.apply(t,r)})},e.exports=n.default}}),gp=q({"../../node_modules/handlebars/dist/cjs/handlebars/helpers/lookup.js"(n,e){n.__esModule=!0,n.default=function(t){t.registerHelper("lookup",function(r,i,s){return r&&s.lookupProperty(r,i)})},e.exports=n.default}}),mp=q({"../../node_modules/handlebars/dist/cjs/handlebars/helpers/with.js"(n,e){n.__esModule=!0;function t(o){return o&&o.__esModule?o:{default:o}}var r=Oe(),i=Ke(),s=t(i);n.default=function(o){o.registerHelper("with",function(a,l){if(arguments.length!=2)throw new s.default("#with requires exactly one argument");r.isFunction(a)&&(a=a.call(this));var h=l.fn;if(r.isEmpty(a))return l.inverse(this);var u=l.data;return l.data&&l.ids&&(u=r.createFrame(l.data),u.contextPath=r.appendContextPath(l.data.contextPath,l.ids[0])),h(a,{data:u,blockParams:r.blockParams([a],[u&&u.contextPath])})})},e.exports=n.default}}),mc=q({"../../node_modules/handlebars/dist/cjs/handlebars/helpers.js"(n){n.__esModule=!0,n.registerDefaultHelpers=m,n.moveHelperToHooks=y;function e(w){return w&&w.__esModule?w:{default:w}}var t=up(),r=e(t),i=hp(),s=e(i),o=fp(),a=e(o),l=dp(),h=e(l),u=pp(),d=e(u),f=gp(),p=e(f),c=mp(),g=e(c);function m(w){r.default(w),s.default(w),a.default(w),h.default(w),d.default(w),p.default(w),g.default(w)}function y(w,_,b){w.helpers[_]&&(w.hooks[_]=w.helpers[_],b||delete w.helpers[_])}}}),yp=q({"../../node_modules/handlebars/dist/cjs/handlebars/decorators/inline.js"(n,e){n.__esModule=!0;var t=Oe();n.default=function(r){r.registerDecorator("inline",function(i,s,o,a){var l=i;return s.partials||(s.partials={},l=function(h,u){var d=o.partials;o.partials=t.extend({},d,s.partials);var f=i(h,u);return o.partials=d,f}),s.partials[a.args[0]]=a.fn,l})},e.exports=n.default}}),wp=q({"../../node_modules/handlebars/dist/cjs/handlebars/decorators.js"(n){n.__esModule=!0,n.registerDefaultDecorators=i;function e(s){return s&&s.__esModule?s:{default:s}}var t=yp(),r=e(t);function i(s){r.default(s)}}}),yc=q({"../../node_modules/handlebars/dist/cjs/handlebars/logger.js"(n,e){n.__esModule=!0;var t=Oe(),r={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(s){if(typeof s=="string"){var o=t.indexOf(r.methodMap,s.toLowerCase());o>=0?s=o:s=parseInt(s,10)}return s},log:function(s){if(s=r.lookupLevel(s),typeof console<"u"&&r.lookupLevel(r.level)<=s){var o=r.methodMap[s];console[o]||(o="log");for(var a=arguments.length,l=Array(a>1?a-1:0),h=1;h<a;h++)l[h-1]=arguments[h];console[o].apply(console,l)}}};n.default=r,e.exports=n.default}}),vp=q({"../../node_modules/handlebars/dist/cjs/handlebars/internal/create-new-lookup-object.js"(n){n.__esModule=!0,n.createNewLookupObject=t;var e=Oe();function t(){for(var r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];return e.extend.apply(void 0,[Object.create(null)].concat(i))}}}),wc=q({"../../node_modules/handlebars/dist/cjs/handlebars/internal/proto-access.js"(n){n.__esModule=!0,n.createProtoAccessControl=o,n.resultIsAllowed=a,n.resetLoggedProperties=u;function e(d){return d&&d.__esModule?d:{default:d}}var t=vp(),r=yc(),i=e(r),s=Object.create(null);function o(d){var f=Object.create(null);f.constructor=!1,f.__defineGetter__=!1,f.__defineSetter__=!1,f.__lookupGetter__=!1;var p=Object.create(null);return p.__proto__=!1,{properties:{whitelist:t.createNewLookupObject(p,d.allowedProtoProperties),defaultValue:d.allowProtoPropertiesByDefault},methods:{whitelist:t.createNewLookupObject(f,d.allowedProtoMethods),defaultValue:d.allowProtoMethodsByDefault}}}function a(d,f,p){return l(typeof d=="function"?f.methods:f.properties,p)}function l(d,f){return d.whitelist[f]!==void 0?d.whitelist[f]===!0:d.defaultValue!==void 0?d.defaultValue:(h(f),!1)}function h(d){s[d]!==!0&&(s[d]=!0,i.default.log("error",'Handlebars: Access has been denied to resolve the property "'+d+`" because it is not an "own property" of its parent.
You can add a runtime option to disable the check or this warning:
See https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details`))}function u(){Object.keys(s).forEach(function(d){delete s[d]})}}}),fo=q({"../../node_modules/handlebars/dist/cjs/handlebars/base.js"(n){n.__esModule=!0,n.HandlebarsEnvironment=g;function e(y){return y&&y.__esModule?y:{default:y}}var t=Oe(),r=Ke(),i=e(r),s=mc(),o=wp(),a=yc(),l=e(a),h=wc(),u="4.7.8";n.VERSION=u;var d=8;n.COMPILER_REVISION=d;var f=7;n.LAST_COMPATIBLE_COMPILER_REVISION=f;var p={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};n.REVISION_CHANGES=p;var c="[object Object]";function g(y,w,_){this.helpers=y||{},this.partials=w||{},this.decorators=_||{},s.registerDefaultHelpers(this),o.registerDefaultDecorators(this)}g.prototype={constructor:g,logger:l.default,log:l.default.log,registerHelper:function(w,_){if(t.toString.call(w)===c){if(_)throw new i.default("Arg not supported with multiple helpers");t.extend(this.helpers,w)}else this.helpers[w]=_},unregisterHelper:function(w){delete this.helpers[w]},registerPartial:function(w,_){if(t.toString.call(w)===c)t.extend(this.partials,w);else{if(typeof _>"u")throw new i.default('Attempting to register a partial called "'+w+'" as undefined');this.partials[w]=_}},unregisterPartial:function(w){delete this.partials[w]},registerDecorator:function(w,_){if(t.toString.call(w)===c){if(_)throw new i.default("Arg not supported with multiple decorators");t.extend(this.decorators,w)}else this.decorators[w]=_},unregisterDecorator:function(w){delete this.decorators[w]},resetLoggedPropertyAccesses:function(){h.resetLoggedProperties()}};var m=l.default.log;n.log=m,n.createFrame=t.createFrame,n.logger=l.default}}),bp=q({"../../node_modules/handlebars/dist/cjs/handlebars/safe-string.js"(n,e){n.__esModule=!0;function t(r){this.string=r}t.prototype.toString=t.prototype.toHTML=function(){return""+this.string},n.default=t,e.exports=n.default}}),_p=q({"../../node_modules/handlebars/dist/cjs/handlebars/internal/wrapHelper.js"(n){n.__esModule=!0,n.wrapHelper=e;function e(t,r){if(typeof t!="function")return t;var i=function(){var o=arguments[arguments.length-1];return arguments[arguments.length-1]=r(o),t.apply(this,arguments)};return i}}}),kp=q({"../../node_modules/handlebars/dist/cjs/handlebars/runtime.js"(n){n.__esModule=!0,n.checkRevision=d,n.template=f,n.wrapProgram=p,n.resolvePartial=c,n.invokePartial=g,n.noop=m;function e(v){return v&&v.__esModule?v:{default:v}}function t(v){if(v&&v.__esModule)return v;var E={};if(v!=null)for(var k in v)Object.prototype.hasOwnProperty.call(v,k)&&(E[k]=v[k]);return E.default=v,E}var r=Oe(),i=t(r),s=Ke(),o=e(s),a=fo(),l=mc(),h=_p(),u=wc();function d(v){var E=v&&v[0]||1,k=a.COMPILER_REVISION;if(!(E>=a.LAST_COMPATIBLE_COMPILER_REVISION&&E<=a.COMPILER_REVISION))if(E<a.LAST_COMPATIBLE_COMPILER_REVISION){var D=a.REVISION_CHANGES[k],L=a.REVISION_CHANGES[E];throw new o.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+D+") or downgrade your runtime to an older version ("+L+").")}else throw new o.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+v[1]+").")}function f(v,E){if(!E)throw new o.default("No environment passed to template");if(!v||!v.main)throw new o.default("Unknown template object: "+typeof v);v.main.decorator=v.main_d,E.VM.checkRevision(v.compiler);var k=v.compiler&&v.compiler[0]===7;function D(S,A,O){O.hash&&(A=i.extend({},A,O.hash),O.ids&&(O.ids[0]=!0)),S=E.VM.resolvePartial.call(this,S,A,O);var R=i.extend({},O,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),H=E.VM.invokePartial.call(this,S,A,R);if(H==null&&E.compile&&(O.partials[O.name]=E.compile(S,v.compilerOptions,E),H=O.partials[O.name](A,R)),H!=null){if(O.indent){for(var J=H.split(`
`),Z=0,ue=J.length;Z<ue&&!(!J[Z]&&Z+1===ue);Z++)J[Z]=O.indent+J[Z];H=J.join(`
`)}return H}else throw new o.default("The partial "+O.name+" could not be compiled when running in runtime-only mode")}var L={strict:function(A,O,R){if(!A||!(O in A))throw new o.default('"'+O+'" not defined in '+A,{loc:R});return L.lookupProperty(A,O)},lookupProperty:function(A,O){var R=A[O];if(R==null||Object.prototype.hasOwnProperty.call(A,O)||u.resultIsAllowed(R,L.protoAccessControl,O))return R},lookup:function(A,O){for(var R=A.length,H=0;H<R;H++){var J=A[H]&&L.lookupProperty(A[H],O);if(J!=null)return A[H][O]}},lambda:function(A,O){return typeof A=="function"?A.call(O):A},escapeExpression:i.escapeExpression,invokePartial:D,fn:function(A){var O=v[A];return O.decorator=v[A+"_d"],O},programs:[],program:function(A,O,R,H,J){var Z=this.programs[A],ue=this.fn(A);return O||J||H||R?Z=p(this,A,ue,O,R,H,J):Z||(Z=this.programs[A]=p(this,A,ue)),Z},data:function(A,O){for(;A&&O--;)A=A._parent;return A},mergeIfNeeded:function(A,O){var R=A||O;return A&&O&&A!==O&&(R=i.extend({},O,A)),R},nullContext:Object.seal({}),noop:E.VM.noop,compilerInfo:v.compiler};function C(S){var A=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],O=A.data;C._setup(A),!A.partial&&v.useData&&(O=y(S,O));var R=void 0,H=v.useBlockParams?[]:void 0;v.useDepths&&(A.depths?R=S!=A.depths[0]?[S].concat(A.depths):A.depths:R=[S]);function J(Z){return""+v.main(L,Z,L.helpers,L.partials,O,H,R)}return J=w(v.main,J,L,A.depths||[],O,H),J(S,A)}return C.isTop=!0,C._setup=function(S){if(S.partial)L.protoAccessControl=S.protoAccessControl,L.helpers=S.helpers,L.partials=S.partials,L.decorators=S.decorators,L.hooks=S.hooks;else{var A=i.extend({},E.helpers,S.helpers);_(A,L),L.helpers=A,v.usePartial&&(L.partials=L.mergeIfNeeded(S.partials,E.partials)),(v.usePartial||v.useDecorators)&&(L.decorators=i.extend({},E.decorators,S.decorators)),L.hooks={},L.protoAccessControl=u.createProtoAccessControl(S);var O=S.allowCallsToHelperMissing||k;l.moveHelperToHooks(L,"helperMissing",O),l.moveHelperToHooks(L,"blockHelperMissing",O)}},C._child=function(S,A,O,R){if(v.useBlockParams&&!O)throw new o.default("must pass block params");if(v.useDepths&&!R)throw new o.default("must pass parent depths");return p(L,S,v[S],A,0,O,R)},C}function p(v,E,k,D,L,C,S){function A(O){var R=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],H=S;return S&&O!=S[0]&&!(O===v.nullContext&&S[0]===null)&&(H=[O].concat(S)),k(v,O,v.helpers,v.partials,R.data||D,C&&[R.blockParams].concat(C),H)}return A=w(k,A,v,S,D,C),A.program=E,A.depth=S?S.length:0,A.blockParams=L||0,A}function c(v,E,k){return v?!v.call&&!k.name&&(k.name=v,v=k.partials[v]):k.name==="@partial-block"?v=k.data["partial-block"]:v=k.partials[k.name],v}function g(v,E,k){var D=k.data&&k.data["partial-block"];k.partial=!0,k.ids&&(k.data.contextPath=k.ids[0]||k.data.contextPath);var L=void 0;if(k.fn&&k.fn!==m&&function(){k.data=a.createFrame(k.data);var C=k.fn;L=k.data["partial-block"]=function(A){var O=arguments.length<=1||arguments[1]===void 0?{}:arguments[1];return O.data=a.createFrame(O.data),O.data["partial-block"]=D,C(A,O)},C.partials&&(k.partials=i.extend({},k.partials,C.partials))}(),v===void 0&&L&&(v=L),v===void 0)throw new o.default("The partial "+k.name+" could not be found");if(v instanceof Function)return v(E,k)}function m(){return""}function y(v,E){return(!E||!("root"in E))&&(E=E?a.createFrame(E):{},E.root=v),E}function w(v,E,k,D,L,C){if(v.decorator){var S={};E=v.decorator(E,S,k,D&&D[0],L,C,D),i.extend(E,S)}return E}function _(v,E){Object.keys(v).forEach(function(k){var D=v[k];v[k]=b(D,E)})}function b(v,E){var k=E.lookupProperty;return h.wrapHelper(v,function(D){return i.extend({lookupProperty:k},D)})}}}),vc=q({"../../node_modules/handlebars/dist/cjs/handlebars/no-conflict.js"(n,e){n.__esModule=!0,n.default=function(t){(function(){typeof globalThis!="object"&&(Object.prototype.__defineGetter__("__magic__",function(){return this}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__)})();var r=globalThis.Handlebars;t.noConflict=function(){return globalThis.Handlebars===t&&(globalThis.Handlebars=r),t}},e.exports=n.default}}),xp=q({"../../node_modules/handlebars/dist/cjs/handlebars.runtime.js"(n,e){n.__esModule=!0;function t(w){return w&&w.__esModule?w:{default:w}}function r(w){if(w&&w.__esModule)return w;var _={};if(w!=null)for(var b in w)Object.prototype.hasOwnProperty.call(w,b)&&(_[b]=w[b]);return _.default=w,_}var i=fo(),s=r(i),o=bp(),a=t(o),l=Ke(),h=t(l),u=Oe(),d=r(u),f=kp(),p=r(f),c=vc(),g=t(c);function m(){var w=new s.HandlebarsEnvironment;return d.extend(w,s),w.SafeString=a.default,w.Exception=h.default,w.Utils=d,w.escapeExpression=d.escapeExpression,w.VM=p,w.template=function(_){return p.template(_,w)},w}var y=m();y.create=m,g.default(y),y.default=y,n.default=y,e.exports=n.default}}),bc=q({"../../node_modules/handlebars/dist/cjs/handlebars/compiler/ast.js"(n,e){n.__esModule=!0;var t={helpers:{helperExpression:function(i){return i.type==="SubExpression"||(i.type==="MustacheStatement"||i.type==="BlockStatement")&&!!(i.params&&i.params.length||i.hash)},scopedId:function(i){return/^\.|this\b/.test(i.original)},simpleId:function(i){return i.parts.length===1&&!t.helpers.scopedId(i)&&!i.depth}}};n.default=t,e.exports=n.default}}),Sp=q({"../../node_modules/handlebars/dist/cjs/handlebars/compiler/parser.js"(n,e){n.__esModule=!0;var t=function(){var r={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(a,l,h,u,d,f,p){var c=f.length-1;switch(d){case 1:return f[c-1];case 2:this.$=u.prepareProgram(f[c]);break;case 3:this.$=f[c];break;case 4:this.$=f[c];break;case 5:this.$=f[c];break;case 6:this.$=f[c];break;case 7:this.$=f[c];break;case 8:this.$=f[c];break;case 9:this.$={type:"CommentStatement",value:u.stripComment(f[c]),strip:u.stripFlags(f[c],f[c]),loc:u.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:f[c],value:f[c],loc:u.locInfo(this._$)};break;case 11:this.$=u.prepareRawBlock(f[c-2],f[c-1],f[c],this._$);break;case 12:this.$={path:f[c-3],params:f[c-2],hash:f[c-1]};break;case 13:this.$=u.prepareBlock(f[c-3],f[c-2],f[c-1],f[c],!1,this._$);break;case 14:this.$=u.prepareBlock(f[c-3],f[c-2],f[c-1],f[c],!0,this._$);break;case 15:this.$={open:f[c-5],path:f[c-4],params:f[c-3],hash:f[c-2],blockParams:f[c-1],strip:u.stripFlags(f[c-5],f[c])};break;case 16:this.$={path:f[c-4],params:f[c-3],hash:f[c-2],blockParams:f[c-1],strip:u.stripFlags(f[c-5],f[c])};break;case 17:this.$={path:f[c-4],params:f[c-3],hash:f[c-2],blockParams:f[c-1],strip:u.stripFlags(f[c-5],f[c])};break;case 18:this.$={strip:u.stripFlags(f[c-1],f[c-1]),program:f[c]};break;case 19:var g=u.prepareBlock(f[c-2],f[c-1],f[c],f[c],!1,this._$),m=u.prepareProgram([g],f[c-1].loc);m.chained=!0,this.$={strip:f[c-2].strip,program:m,chain:!0};break;case 20:this.$=f[c];break;case 21:this.$={path:f[c-1],strip:u.stripFlags(f[c-2],f[c])};break;case 22:this.$=u.prepareMustache(f[c-3],f[c-2],f[c-1],f[c-4],u.stripFlags(f[c-4],f[c]),this._$);break;case 23:this.$=u.prepareMustache(f[c-3],f[c-2],f[c-1],f[c-4],u.stripFlags(f[c-4],f[c]),this._$);break;case 24:this.$={type:"PartialStatement",name:f[c-3],params:f[c-2],hash:f[c-1],indent:"",strip:u.stripFlags(f[c-4],f[c]),loc:u.locInfo(this._$)};break;case 25:this.$=u.preparePartialBlock(f[c-2],f[c-1],f[c],this._$);break;case 26:this.$={path:f[c-3],params:f[c-2],hash:f[c-1],strip:u.stripFlags(f[c-4],f[c])};break;case 27:this.$=f[c];break;case 28:this.$=f[c];break;case 29:this.$={type:"SubExpression",path:f[c-3],params:f[c-2],hash:f[c-1],loc:u.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:f[c],loc:u.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:u.id(f[c-2]),value:f[c],loc:u.locInfo(this._$)};break;case 32:this.$=u.id(f[c-1]);break;case 33:this.$=f[c];break;case 34:this.$=f[c];break;case 35:this.$={type:"StringLiteral",value:f[c],original:f[c],loc:u.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(f[c]),original:Number(f[c]),loc:u.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:f[c]==="true",original:f[c]==="true",loc:u.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:u.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:u.locInfo(this._$)};break;case 40:this.$=f[c];break;case 41:this.$=f[c];break;case 42:this.$=u.preparePath(!0,f[c],this._$);break;case 43:this.$=u.preparePath(!1,f[c],this._$);break;case 44:f[c-2].push({part:u.id(f[c]),original:f[c],separator:f[c-1]}),this.$=f[c-2];break;case 45:this.$=[{part:u.id(f[c]),original:f[c]}];break;case 46:this.$=[];break;case 47:f[c-1].push(f[c]);break;case 48:this.$=[];break;case 49:f[c-1].push(f[c]);break;case 50:this.$=[];break;case 51:f[c-1].push(f[c]);break;case 58:this.$=[];break;case 59:f[c-1].push(f[c]);break;case 64:this.$=[];break;case 65:f[c-1].push(f[c]);break;case 70:this.$=[];break;case 71:f[c-1].push(f[c]);break;case 78:this.$=[];break;case 79:f[c-1].push(f[c]);break;case 82:this.$=[];break;case 83:f[c-1].push(f[c]);break;case 86:this.$=[];break;case 87:f[c-1].push(f[c]);break;case 90:this.$=[];break;case 91:f[c-1].push(f[c]);break;case 94:this.$=[];break;case 95:f[c-1].push(f[c]);break;case 98:this.$=[f[c]];break;case 99:f[c-1].push(f[c]);break;case 100:this.$=[f[c]];break;case 101:f[c-1].push(f[c]);break}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(a,l){throw new Error(a)},parse:function(a){var l=this,h=[0],u=[null],d=[],f=this.table,p="",c=0,g=0;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc>"u"&&(this.lexer.yylloc={});var m=this.lexer.yylloc;d.push(m);var y=this.lexer.options&&this.lexer.options.ranges;typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);function w(){var O;return O=l.lexer.lex()||1,typeof O!="number"&&(O=l.symbols_[O]||O),O}for(var _,b,v,E,k={},D,L,C,S;;){if(b=h[h.length-1],this.defaultActions[b]?v=this.defaultActions[b]:((_===null||typeof _>"u")&&(_=w()),v=f[b]&&f[b][_]),typeof v>"u"||!v.length||!v[0]){var A="";{S=[];for(D in f[b])this.terminals_[D]&&D>2&&S.push("'"+this.terminals_[D]+"'");this.lexer.showPosition?A="Parse error on line "+(c+1)+`:
`+this.lexer.showPosition()+`
Expecting `+S.join(", ")+", got '"+(this.terminals_[_]||_)+"'":A="Parse error on line "+(c+1)+": Unexpected "+(_==1?"end of input":"'"+(this.terminals_[_]||_)+"'"),this.parseError(A,{text:this.lexer.match,token:this.terminals_[_]||_,line:this.lexer.yylineno,loc:m,expected:S})}}if(v[0]instanceof Array&&v.length>1)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+_);switch(v[0]){case 1:h.push(_),u.push(this.lexer.yytext),d.push(this.lexer.yylloc),h.push(v[1]),_=null,g=this.lexer.yyleng,p=this.lexer.yytext,c=this.lexer.yylineno,m=this.lexer.yylloc;break;case 2:if(L=this.productions_[v[1]][1],k.$=u[u.length-L],k._$={first_line:d[d.length-(L||1)].first_line,last_line:d[d.length-1].last_line,first_column:d[d.length-(L||1)].first_column,last_column:d[d.length-1].last_column},y&&(k._$.range=[d[d.length-(L||1)].range[0],d[d.length-1].range[1]]),E=this.performAction.call(k,p,g,c,this.yy,v[1],u,d),typeof E<"u")return E;L&&(h=h.slice(0,-1*L*2),u=u.slice(0,-1*L),d=d.slice(0,-1*L)),h.push(this.productions_[v[1]][0]),u.push(k.$),d.push(k._$),C=f[h[h.length-2]][h[h.length-1]],h.push(C);break;case 3:return!0}}return!0}},i=function(){var o={EOF:1,parseError:function(l,h){if(this.yy.parser)this.yy.parser.parseError(l,h);else throw new Error(l)},setInput:function(l){return this._input=l,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var l=this._input[0];this.yytext+=l,this.yyleng++,this.offset++,this.match+=l,this.matched+=l;var h=l.match(/(?:\r\n?|\n).*/g);return h?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),l},unput:function(l){var h=l.length,u=l.split(/(?:\r\n?|\n)/g);this._input=l+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-h-1),this.offset-=h;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),u.length-1&&(this.yylineno-=u.length-1);var f=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:u?(u.length===d.length?this.yylloc.first_column:0)+d[d.length-u.length].length-u[0].length:this.yylloc.first_column-h},this.options.ranges&&(this.yylloc.range=[f[0],f[0]+this.yyleng-h]),this},more:function(){return this._more=!0,this},less:function(l){this.unput(this.match.slice(l))},pastInput:function(){var l=this.matched.substr(0,this.matched.length-this.match.length);return(l.length>20?"...":"")+l.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var l=this.match;return l.length<20&&(l+=this._input.substr(0,20-l.length)),(l.substr(0,20)+(l.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var l=this.pastInput(),h=new Array(l.length+1).join("-");return l+this.upcomingInput()+`
`+h+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var l,h,u,d,f;this._more||(this.yytext="",this.match="");for(var p=this._currentRules(),c=0;c<p.length&&(u=this._input.match(this.rules[p[c]]),!(u&&(!h||u[0].length>h[0].length)&&(h=u,d=c,!this.options.flex)));c++);return h?(f=h[0].match(/(?:\r\n?|\n).*/g),f&&(this.yylineno+=f.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:f?f[f.length-1].length-f[f.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+h[0].length},this.yytext+=h[0],this.match+=h[0],this.matches=h,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(h[0].length),this.matched+=h[0],l=this.performAction.call(this,this.yy,this,p[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),l||void 0):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var l=this.next();return typeof l<"u"?l:this.lex()},begin:function(l){this.conditionStack.push(l)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(l){this.begin(l)}};return o.options={},o.performAction=function(l,h,u,d){function f(p,c){return h.yytext=h.yytext.substring(p,h.yyleng-c+p)}switch(u){case 0:if(h.yytext.slice(-2)==="\\\\"?(f(0,1),this.begin("mu")):h.yytext.slice(-1)==="\\"?(f(0,1),this.begin("emu")):this.begin("mu"),h.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),this.conditionStack[this.conditionStack.length-1]==="raw"?15:(f(5,9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:return this.popState(),44;case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(h.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:return 72;case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return h.yytext=f(1,2).replace(/\\"/g,'"'),80;case 32:return h.yytext=f(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:return 82;case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return h.yytext=h.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},o.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],o.conditions={mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}},o}();r.lexer=i;function s(){this.yy={}}return s.prototype=r,r.Parser=s,new s}();n.default=t,e.exports=n.default}}),po=q({"../../node_modules/handlebars/dist/cjs/handlebars/compiler/visitor.js"(n,e){n.__esModule=!0;function t(h){return h&&h.__esModule?h:{default:h}}var r=Ke(),i=t(r);function s(){this.parents=[]}s.prototype={constructor:s,mutating:!1,acceptKey:function(u,d){var f=this.accept(u[d]);if(this.mutating){if(f&&!s.prototype[f.type])throw new i.default('Unexpected node type "'+f.type+'" found when accepting '+d+" on "+u.type);u[d]=f}},acceptRequired:function(u,d){if(this.acceptKey(u,d),!u[d])throw new i.default(u.type+" requires "+d)},acceptArray:function(u){for(var d=0,f=u.length;d<f;d++)this.acceptKey(u,d),u[d]||(u.splice(d,1),d--,f--)},accept:function(u){if(u){if(!this[u.type])throw new i.default("Unknown type: "+u.type,u);this.current&&this.parents.unshift(this.current),this.current=u;var d=this[u.type](u);if(this.current=this.parents.shift(),!this.mutating||d)return d;if(d!==!1)return u}},Program:function(u){this.acceptArray(u.body)},MustacheStatement:o,Decorator:o,BlockStatement:a,DecoratorBlock:a,PartialStatement:l,PartialBlockStatement:function(u){l.call(this,u),this.acceptKey(u,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:o,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(u){this.acceptArray(u.pairs)},HashPair:function(u){this.acceptRequired(u,"value")}};function o(h){this.acceptRequired(h,"path"),this.acceptArray(h.params),this.acceptKey(h,"hash")}function a(h){o.call(this,h),this.acceptKey(h,"program"),this.acceptKey(h,"inverse")}function l(h){this.acceptRequired(h,"name"),this.acceptArray(h.params),this.acceptKey(h,"hash")}n.default=s,e.exports=n.default}}),Ep=q({"../../node_modules/handlebars/dist/cjs/handlebars/compiler/whitespace-control.js"(n,e){n.__esModule=!0;function t(u){return u&&u.__esModule?u:{default:u}}var r=po(),i=t(r);function s(){var u=arguments.length<=0||arguments[0]===void 0?{}:arguments[0];this.options=u}s.prototype=new i.default,s.prototype.Program=function(u){var d=!this.options.ignoreStandalone,f=!this.isRootSeen;this.isRootSeen=!0;for(var p=u.body,c=0,g=p.length;c<g;c++){var m=p[c],y=this.accept(m);if(y){var w=o(p,c,f),_=a(p,c,f),b=y.openStandalone&&w,v=y.closeStandalone&&_,E=y.inlineStandalone&&w&&_;y.close&&l(p,c,!0),y.open&&h(p,c,!0),d&&E&&(l(p,c),h(p,c)&&m.type==="PartialStatement"&&(m.indent=/([ \t]+$)/.exec(p[c-1].original)[1])),d&&b&&(l((m.program||m.inverse).body),h(p,c)),d&&v&&(l(p,c),h((m.inverse||m.program).body))}}return u},s.prototype.BlockStatement=s.prototype.DecoratorBlock=s.prototype.PartialBlockStatement=function(u){this.accept(u.program),this.accept(u.inverse);var d=u.program||u.inverse,f=u.program&&u.inverse,p=f,c=f;if(f&&f.chained)for(p=f.body[0].program;c.chained;)c=c.body[c.body.length-1].program;var g={open:u.openStrip.open,close:u.closeStrip.close,openStandalone:a(d.body),closeStandalone:o((p||d).body)};if(u.openStrip.close&&l(d.body,null,!0),f){var m=u.inverseStrip;m.open&&h(d.body,null,!0),m.close&&l(p.body,null,!0),u.closeStrip.open&&h(c.body,null,!0),!this.options.ignoreStandalone&&o(d.body)&&a(p.body)&&(h(d.body),l(p.body))}else u.closeStrip.open&&h(d.body,null,!0);return g},s.prototype.Decorator=s.prototype.MustacheStatement=function(u){return u.strip},s.prototype.PartialStatement=s.prototype.CommentStatement=function(u){var d=u.strip||{};return{inlineStandalone:!0,open:d.open,close:d.close}};function o(u,d,f){d===void 0&&(d=u.length);var p=u[d-1],c=u[d-2];if(!p)return f;if(p.type==="ContentStatement")return(c||!f?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(p.original)}function a(u,d,f){d===void 0&&(d=-1);var p=u[d+1],c=u[d+2];if(!p)return f;if(p.type==="ContentStatement")return(c||!f?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(p.original)}function l(u,d,f){var p=u[d==null?0:d+1];if(!(!p||p.type!=="ContentStatement"||!f&&p.rightStripped)){var c=p.value;p.value=p.value.replace(f?/^\s+/:/^[ \t]*\r?\n?/,""),p.rightStripped=p.value!==c}}function h(u,d,f){var p=u[d==null?u.length-1:d-1];if(!(!p||p.type!=="ContentStatement"||!f&&p.leftStripped)){var c=p.value;return p.value=p.value.replace(f?/\s+$/:/[ \t]+$/,""),p.leftStripped=p.value!==c,p.leftStripped}}n.default=s,e.exports=n.default}}),Cp=q({"../../node_modules/handlebars/dist/cjs/handlebars/compiler/helpers.js"(n){n.__esModule=!0,n.SourceLocation=s,n.id=o,n.stripFlags=a,n.stripComment=l,n.preparePath=h,n.prepareMustache=u,n.prepareRawBlock=d,n.prepareBlock=f,n.prepareProgram=p,n.preparePartialBlock=c;function e(g){return g&&g.__esModule?g:{default:g}}var t=Ke(),r=e(t);function i(g,m){if(m=m.path?m.path.original:m,g.path.original!==m){var y={loc:g.path.loc};throw new r.default(g.path.original+" doesn't match "+m,y)}}function s(g,m){this.source=g,this.start={line:m.first_line,column:m.first_column},this.end={line:m.last_line,column:m.last_column}}function o(g){return/^\[.*\]$/.test(g)?g.substring(1,g.length-1):g}function a(g,m){return{open:g.charAt(2)==="~",close:m.charAt(m.length-3)==="~"}}function l(g){return g.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function h(g,m,y){y=this.locInfo(y);for(var w=g?"@":"",_=[],b=0,v=0,E=m.length;v<E;v++){var k=m[v].part,D=m[v].original!==k;if(w+=(m[v].separator||"")+k,!D&&(k===".."||k==="."||k==="this")){if(_.length>0)throw new r.default("Invalid path: "+w,{loc:y});k===".."&&b++}else _.push(k)}return{type:"PathExpression",data:g,depth:b,parts:_,original:w,loc:y}}function u(g,m,y,w,_,b){var v=w.charAt(3)||w.charAt(2),E=v!=="{"&&v!=="&",k=/\*/.test(w);return{type:k?"Decorator":"MustacheStatement",path:g,params:m,hash:y,escaped:E,strip:_,loc:this.locInfo(b)}}function d(g,m,y,w){i(g,y),w=this.locInfo(w);var _={type:"Program",body:m,strip:{},loc:w};return{type:"BlockStatement",path:g.path,params:g.params,hash:g.hash,program:_,openStrip:{},inverseStrip:{},closeStrip:{},loc:w}}function f(g,m,y,w,_,b){w&&w.path&&i(g,w);var v=/\*/.test(g.open);m.blockParams=g.blockParams;var E=void 0,k=void 0;if(y){if(v)throw new r.default("Unexpected inverse block on decorator",y);y.chain&&(y.program.body[0].closeStrip=w.strip),k=y.strip,E=y.program}return _&&(_=E,E=m,m=_),{type:v?"DecoratorBlock":"BlockStatement",path:g.path,params:g.params,hash:g.hash,program:m,inverse:E,openStrip:g.strip,inverseStrip:k,closeStrip:w&&w.strip,loc:this.locInfo(b)}}function p(g,m){if(!m&&g.length){var y=g[0].loc,w=g[g.length-1].loc;y&&w&&(m={source:y.source,start:{line:y.start.line,column:y.start.column},end:{line:w.end.line,column:w.end.column}})}return{type:"Program",body:g,strip:{},loc:m}}function c(g,m,y,w){return i(g,y),{type:"PartialBlockStatement",name:g.path,params:g.params,hash:g.hash,program:m,openStrip:g.strip,closeStrip:y&&y.strip,loc:this.locInfo(w)}}}}),Ap=q({"../../node_modules/handlebars/dist/cjs/handlebars/compiler/base.js"(n){n.__esModule=!0,n.parseWithoutProcessing=d,n.parse=f;function e(p){if(p&&p.__esModule)return p;var c={};if(p!=null)for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(c[g]=p[g]);return c.default=p,c}function t(p){return p&&p.__esModule?p:{default:p}}var r=Sp(),i=t(r),s=Ep(),o=t(s),a=Cp(),l=e(a),h=Oe();n.parser=i.default;var u={};h.extend(u,l);function d(p,c){if(p.type==="Program")return p;i.default.yy=u,u.locInfo=function(m){return new u.SourceLocation(c&&c.srcName,m)};var g=i.default.parse(p);return g}function f(p,c){var g=d(p,c),m=new o.default(c);return m.accept(g)}}}),Op=q({"../../node_modules/handlebars/dist/cjs/handlebars/compiler/compiler.js"(n){n.__esModule=!0,n.Compiler=l,n.precompile=h,n.compile=u;function e(p){return p&&p.__esModule?p:{default:p}}var t=Ke(),r=e(t),i=Oe(),s=bc(),o=e(s),a=[].slice;function l(){}l.prototype={compiler:l,equals:function(c){var g=this.opcodes.length;if(c.opcodes.length!==g)return!1;for(var m=0;m<g;m++){var y=this.opcodes[m],w=c.opcodes[m];if(y.opcode!==w.opcode||!d(y.args,w.args))return!1}g=this.children.length;for(var m=0;m<g;m++)if(!this.children[m].equals(c.children[m]))return!1;return!0},guid:0,compile:function(c,g){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=g,this.stringParams=g.stringParams,this.trackIds=g.trackIds,g.blockParams=g.blockParams||[],g.knownHelpers=i.extend(Object.create(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},g.knownHelpers),this.accept(c)},compileProgram:function(c){var g=new this.compiler,m=g.compile(c,this.options),y=this.guid++;return this.usePartial=this.usePartial||m.usePartial,this.children[y]=m,this.useDepths=this.useDepths||m.useDepths,y},accept:function(c){if(!this[c.type])throw new r.default("Unknown type: "+c.type,c);this.sourceNode.unshift(c);var g=this[c.type](c);return this.sourceNode.shift(),g},Program:function(c){this.options.blockParams.unshift(c.blockParams);for(var g=c.body,m=g.length,y=0;y<m;y++)this.accept(g[y]);return this.options.blockParams.shift(),this.isSimple=m===1,this.blockParams=c.blockParams?c.blockParams.length:0,this},BlockStatement:function(c){f(c);var g=c.program,m=c.inverse;g=g&&this.compileProgram(g),m=m&&this.compileProgram(m);var y=this.classifySexpr(c);y==="helper"?this.helperSexpr(c,g,m):y==="simple"?(this.simpleSexpr(c),this.opcode("pushProgram",g),this.opcode("pushProgram",m),this.opcode("emptyHash"),this.opcode("blockValue",c.path.original)):(this.ambiguousSexpr(c,g,m),this.opcode("pushProgram",g),this.opcode("pushProgram",m),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(c){var g=c.program&&this.compileProgram(c.program),m=this.setupFullMustacheParams(c,g,void 0),y=c.path;this.useDecorators=!0,this.opcode("registerDecorator",m.length,y.original)},PartialStatement:function(c){this.usePartial=!0;var g=c.program;g&&(g=this.compileProgram(c.program));var m=c.params;if(m.length>1)throw new r.default("Unsupported number of partial arguments: "+m.length,c);m.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):m.push({type:"PathExpression",parts:[],depth:0}));var y=c.name.original,w=c.name.type==="SubExpression";w&&this.accept(c.name),this.setupFullMustacheParams(c,g,void 0,!0);var _=c.indent||"";this.options.preventIndent&&_&&(this.opcode("appendContent",_),_=""),this.opcode("invokePartial",w,y,_),this.opcode("append")},PartialBlockStatement:function(c){this.PartialStatement(c)},MustacheStatement:function(c){this.SubExpression(c),c.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(c){this.DecoratorBlock(c)},ContentStatement:function(c){c.value&&this.opcode("appendContent",c.value)},CommentStatement:function(){},SubExpression:function(c){f(c);var g=this.classifySexpr(c);g==="simple"?this.simpleSexpr(c):g==="helper"?this.helperSexpr(c):this.ambiguousSexpr(c)},ambiguousSexpr:function(c,g,m){var y=c.path,w=y.parts[0],_=g!=null||m!=null;this.opcode("getContext",y.depth),this.opcode("pushProgram",g),this.opcode("pushProgram",m),y.strict=!0,this.accept(y),this.opcode("invokeAmbiguous",w,_)},simpleSexpr:function(c){var g=c.path;g.strict=!0,this.accept(g),this.opcode("resolvePossibleLambda")},helperSexpr:function(c,g,m){var y=this.setupFullMustacheParams(c,g,m),w=c.path,_=w.parts[0];if(this.options.knownHelpers[_])this.opcode("invokeKnownHelper",y.length,_);else{if(this.options.knownHelpersOnly)throw new r.default("You specified knownHelpersOnly, but used the unknown helper "+_,c);w.strict=!0,w.falsy=!0,this.accept(w),this.opcode("invokeHelper",y.length,w.original,o.default.helpers.simpleId(w))}},PathExpression:function(c){this.addDepth(c.depth),this.opcode("getContext",c.depth);var g=c.parts[0],m=o.default.helpers.scopedId(c),y=!c.depth&&!m&&this.blockParamIndex(g);y?this.opcode("lookupBlockParam",y,c.parts):g?c.data?(this.options.data=!0,this.opcode("lookupData",c.depth,c.parts,c.strict)):this.opcode("lookupOnContext",c.parts,c.falsy,c.strict,m):this.opcode("pushContext")},StringLiteral:function(c){this.opcode("pushString",c.value)},NumberLiteral:function(c){this.opcode("pushLiteral",c.value)},BooleanLiteral:function(c){this.opcode("pushLiteral",c.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(c){var g=c.pairs,m=0,y=g.length;for(this.opcode("pushHash");m<y;m++)this.pushParam(g[m].value);for(;m--;)this.opcode("assignToHash",g[m].key);this.opcode("popHash")},opcode:function(c){this.opcodes.push({opcode:c,args:a.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(c){c&&(this.useDepths=!0)},classifySexpr:function(c){var g=o.default.helpers.simpleId(c.path),m=g&&!!this.blockParamIndex(c.path.parts[0]),y=!m&&o.default.helpers.helperExpression(c),w=!m&&(y||g);if(w&&!y){var _=c.path.parts[0],b=this.options;b.knownHelpers[_]?y=!0:b.knownHelpersOnly&&(w=!1)}return y?"helper":w?"ambiguous":"simple"},pushParams:function(c){for(var g=0,m=c.length;g<m;g++)this.pushParam(c[g])},pushParam:function(c){var g=c.value!=null?c.value:c.original||"";if(this.stringParams)g.replace&&(g=g.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),c.depth&&this.addDepth(c.depth),this.opcode("getContext",c.depth||0),this.opcode("pushStringParam",g,c.type),c.type==="SubExpression"&&this.accept(c);else{if(this.trackIds){var m=void 0;if(c.parts&&!o.default.helpers.scopedId(c)&&!c.depth&&(m=this.blockParamIndex(c.parts[0])),m){var y=c.parts.slice(1).join(".");this.opcode("pushId","BlockParam",m,y)}else g=c.original||g,g.replace&&(g=g.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",c.type,g)}this.accept(c)}},setupFullMustacheParams:function(c,g,m,y){var w=c.params;return this.pushParams(w),this.opcode("pushProgram",g),this.opcode("pushProgram",m),c.hash?this.accept(c.hash):this.opcode("emptyHash",y),w},blockParamIndex:function(c){for(var g=0,m=this.options.blockParams.length;g<m;g++){var y=this.options.blockParams[g],w=y&&i.indexOf(y,c);if(y&&w>=0)return[g,w]}}};function h(p,c,g){if(p==null||typeof p!="string"&&p.type!=="Program")throw new r.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+p);c=c||{},"data"in c||(c.data=!0),c.compat&&(c.useDepths=!0);var m=g.parse(p,c),y=new g.Compiler().compile(m,c);return new g.JavaScriptCompiler().compile(y,c)}function u(p,c,g){if(c===void 0&&(c={}),p==null||typeof p!="string"&&p.type!=="Program")throw new r.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+p);c=i.extend({},c),"data"in c||(c.data=!0),c.compat&&(c.useDepths=!0);var m=void 0;function y(){var _=g.parse(p,c),b=new g.Compiler().compile(_,c),v=new g.JavaScriptCompiler().compile(b,c,void 0,!0);return g.template(v)}function w(_,b){return m||(m=y()),m.call(this,_,b)}return w._setup=function(_){return m||(m=y()),m._setup(_)},w._child=function(_,b,v,E){return m||(m=y()),m._child(_,b,v,E)},w}function d(p,c){if(p===c)return!0;if(i.isArray(p)&&i.isArray(c)&&p.length===c.length){for(var g=0;g<p.length;g++)if(!d(p[g],c[g]))return!1;return!0}}function f(p){if(!p.path.parts){var c=p.path;p.path={type:"PathExpression",data:!1,depth:0,parts:[c.original+""],original:c.original+"",loc:c.loc}}}}}),Tp=q({"../../node_modules/source-map/lib/base64.js"(n){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");n.encode=function(t){if(0<=t&&t<e.length)return e[t];throw new TypeError("Must be between 0 and 63: "+t)},n.decode=function(t){var r=65,i=90,s=97,o=122,a=48,l=57,h=43,u=47,d=26,f=52;return r<=t&&t<=i?t-r:s<=t&&t<=o?t-s+d:a<=t&&t<=l?t-a+f:t==h?62:t==u?63:-1}}}),_c=q({"../../node_modules/source-map/lib/base64-vlq.js"(n){var e=Tp(),t=5,r=1<<t,i=r-1,s=r;function o(l){return l<0?(-l<<1)+1:(l<<1)+0}function a(l){var h=(l&1)===1,u=l>>1;return h?-u:u}n.encode=function(h){var u="",d,f=o(h);do d=f&i,f>>>=t,f>0&&(d|=s),u+=e.encode(d);while(f>0);return u},n.decode=function(h,u,d){var f=h.length,p=0,c=0,g,m;do{if(u>=f)throw new Error("Expected more digits in base 64 VLQ value.");if(m=e.decode(h.charCodeAt(u++)),m===-1)throw new Error("Invalid base64 digit: "+h.charAt(u-1));g=!!(m&s),m&=i,p=p+(m<<c),c+=t}while(g);d.value=a(p),d.rest=u}}}),nr=q({"../../node_modules/source-map/lib/util.js"(n){function e(b,v,E){if(v in b)return b[v];if(arguments.length===3)return E;throw new Error('"'+v+'" is a required argument.')}n.getArg=e;var t=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,r=/^data:.+\,.+$/;function i(b){var v=b.match(t);return v?{scheme:v[1],auth:v[2],host:v[3],port:v[4],path:v[5]}:null}n.urlParse=i;function s(b){var v="";return b.scheme&&(v+=b.scheme+":"),v+="//",b.auth&&(v+=b.auth+"@"),b.host&&(v+=b.host),b.port&&(v+=":"+b.port),b.path&&(v+=b.path),v}n.urlGenerate=s;function o(b){var v=b,E=i(b);if(E){if(!E.path)return b;v=E.path}for(var k=n.isAbsolute(v),D=v.split(/\/+/),L,C=0,S=D.length-1;S>=0;S--)L=D[S],L==="."?D.splice(S,1):L===".."?C++:C>0&&(L===""?(D.splice(S+1,C),C=0):(D.splice(S,2),C--));return v=D.join("/"),v===""&&(v=k?"/":"."),E?(E.path=v,s(E)):v}n.normalize=o;function a(b,v){b===""&&(b="."),v===""&&(v=".");var E=i(v),k=i(b);if(k&&(b=k.path||"/"),E&&!E.scheme)return k&&(E.scheme=k.scheme),s(E);if(E||v.match(r))return v;if(k&&!k.host&&!k.path)return k.host=v,s(k);var D=v.charAt(0)==="/"?v:o(b.replace(/\/+$/,"")+"/"+v);return k?(k.path=D,s(k)):D}n.join=a,n.isAbsolute=function(b){return b.charAt(0)==="/"||t.test(b)};function l(b,v){b===""&&(b="."),b=b.replace(/\/$/,"");for(var E=0;v.indexOf(b+"/")!==0;){var k=b.lastIndexOf("/");if(k<0||(b=b.slice(0,k),b.match(/^([^\/]+:\/)?\/*$/)))return v;++E}return Array(E+1).join("../")+v.substr(b.length+1)}n.relative=l;var h=function(){var b=Object.create(null);return!("__proto__"in b)}();function u(b){return b}function d(b){return p(b)?"$"+b:b}n.toSetString=h?u:d;function f(b){return p(b)?b.slice(1):b}n.fromSetString=h?u:f;function p(b){if(!b)return!1;var v=b.length;if(v<9||b.charCodeAt(v-1)!==95||b.charCodeAt(v-2)!==95||b.charCodeAt(v-3)!==111||b.charCodeAt(v-4)!==116||b.charCodeAt(v-5)!==111||b.charCodeAt(v-6)!==114||b.charCodeAt(v-7)!==112||b.charCodeAt(v-8)!==95||b.charCodeAt(v-9)!==95)return!1;for(var E=v-10;E>=0;E--)if(b.charCodeAt(E)!==36)return!1;return!0}function c(b,v,E){var k=m(b.source,v.source);return k!==0||(k=b.originalLine-v.originalLine,k!==0)||(k=b.originalColumn-v.originalColumn,k!==0||E)||(k=b.generatedColumn-v.generatedColumn,k!==0)||(k=b.generatedLine-v.generatedLine,k!==0)?k:m(b.name,v.name)}n.compareByOriginalPositions=c;function g(b,v,E){var k=b.generatedLine-v.generatedLine;return k!==0||(k=b.generatedColumn-v.generatedColumn,k!==0||E)||(k=m(b.source,v.source),k!==0)||(k=b.originalLine-v.originalLine,k!==0)||(k=b.originalColumn-v.originalColumn,k!==0)?k:m(b.name,v.name)}n.compareByGeneratedPositionsDeflated=g;function m(b,v){return b===v?0:b===null?1:v===null?-1:b>v?1:-1}function y(b,v){var E=b.generatedLine-v.generatedLine;return E!==0||(E=b.generatedColumn-v.generatedColumn,E!==0)||(E=m(b.source,v.source),E!==0)||(E=b.originalLine-v.originalLine,E!==0)||(E=b.originalColumn-v.originalColumn,E!==0)?E:m(b.name,v.name)}n.compareByGeneratedPositionsInflated=y;function w(b){return JSON.parse(b.replace(/^\)]}'[^\n]*\n/,""))}n.parseSourceMapInput=w;function _(b,v,E){if(v=v||"",b&&(b[b.length-1]!=="/"&&v[0]!=="/"&&(b+="/"),v=b+v),E){var k=i(E);if(!k)throw new Error("sourceMapURL could not be parsed");if(k.path){var D=k.path.lastIndexOf("/");D>=0&&(k.path=k.path.substring(0,D+1))}v=a(s(k),v)}return o(v)}n.computeSourceURL=_}}),kc=q({"../../node_modules/source-map/lib/array-set.js"(n){var e=nr(),t=Object.prototype.hasOwnProperty,r=typeof Map<"u";function i(){this._array=[],this._set=r?new Map:Object.create(null)}i.fromArray=function(o,a){for(var l=new i,h=0,u=o.length;h<u;h++)l.add(o[h],a);return l},i.prototype.size=function(){return r?this._set.size:Object.getOwnPropertyNames(this._set).length},i.prototype.add=function(o,a){var l=r?o:e.toSetString(o),h=r?this.has(o):t.call(this._set,l),u=this._array.length;(!h||a)&&this._array.push(o),h||(r?this._set.set(o,u):this._set[l]=u)},i.prototype.has=function(o){if(r)return this._set.has(o);var a=e.toSetString(o);return t.call(this._set,a)},i.prototype.indexOf=function(o){if(r){var a=this._set.get(o);if(a>=0)return a}else{var l=e.toSetString(o);if(t.call(this._set,l))return this._set[l]}throw new Error('"'+o+'" is not in the set.')},i.prototype.at=function(o){if(o>=0&&o<this._array.length)return this._array[o];throw new Error("No element indexed by "+o)},i.prototype.toArray=function(){return this._array.slice()},n.ArraySet=i}}),Rp=q({"../../node_modules/source-map/lib/mapping-list.js"(n){var e=nr();function t(i,s){var o=i.generatedLine,a=s.generatedLine,l=i.generatedColumn,h=s.generatedColumn;return a>o||a==o&&h>=l||e.compareByGeneratedPositionsInflated(i,s)<=0}function r(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}r.prototype.unsortedForEach=function(s,o){this._array.forEach(s,o)},r.prototype.add=function(s){t(this._last,s)?(this._last=s,this._array.push(s)):(this._sorted=!1,this._array.push(s))},r.prototype.toArray=function(){return this._sorted||(this._array.sort(e.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},n.MappingList=r}}),xc=q({"../../node_modules/source-map/lib/source-map-generator.js"(n){var e=_c(),t=nr(),r=kc().ArraySet,i=Rp().MappingList;function s(o){o||(o={}),this._file=t.getArg(o,"file",null),this._sourceRoot=t.getArg(o,"sourceRoot",null),this._skipValidation=t.getArg(o,"skipValidation",!1),this._sources=new r,this._names=new r,this._mappings=new i,this._sourcesContents=null}s.prototype._version=3,s.fromSourceMap=function(a){var l=a.sourceRoot,h=new s({file:a.file,sourceRoot:l});return a.eachMapping(function(u){var d={generated:{line:u.generatedLine,column:u.generatedColumn}};u.source!=null&&(d.source=u.source,l!=null&&(d.source=t.relative(l,d.source)),d.original={line:u.originalLine,column:u.originalColumn},u.name!=null&&(d.name=u.name)),h.addMapping(d)}),a.sources.forEach(function(u){var d=u;l!==null&&(d=t.relative(l,u)),h._sources.has(d)||h._sources.add(d);var f=a.sourceContentFor(u);f!=null&&h.setSourceContent(u,f)}),h},s.prototype.addMapping=function(a){var l=t.getArg(a,"generated"),h=t.getArg(a,"original",null),u=t.getArg(a,"source",null),d=t.getArg(a,"name",null);this._skipValidation||this._validateMapping(l,h,u,d),u!=null&&(u=String(u),this._sources.has(u)||this._sources.add(u)),d!=null&&(d=String(d),this._names.has(d)||this._names.add(d)),this._mappings.add({generatedLine:l.line,generatedColumn:l.column,originalLine:h!=null&&h.line,originalColumn:h!=null&&h.column,source:u,name:d})},s.prototype.setSourceContent=function(a,l){var h=a;this._sourceRoot!=null&&(h=t.relative(this._sourceRoot,h)),l!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[t.toSetString(h)]=l):this._sourcesContents&&(delete this._sourcesContents[t.toSetString(h)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},s.prototype.applySourceMap=function(a,l,h){var u=l;if(l==null){if(a.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);u=a.file}var d=this._sourceRoot;d!=null&&(u=t.relative(d,u));var f=new r,p=new r;this._mappings.unsortedForEach(function(c){if(c.source===u&&c.originalLine!=null){var g=a.originalPositionFor({line:c.originalLine,column:c.originalColumn});g.source!=null&&(c.source=g.source,h!=null&&(c.source=t.join(h,c.source)),d!=null&&(c.source=t.relative(d,c.source)),c.originalLine=g.line,c.originalColumn=g.column,g.name!=null&&(c.name=g.name))}var m=c.source;m!=null&&!f.has(m)&&f.add(m);var y=c.name;y!=null&&!p.has(y)&&p.add(y)},this),this._sources=f,this._names=p,a.sources.forEach(function(c){var g=a.sourceContentFor(c);g!=null&&(h!=null&&(c=t.join(h,c)),d!=null&&(c=t.relative(d,c)),this.setSourceContent(c,g))},this)},s.prototype._validateMapping=function(a,l,h,u){if(l&&typeof l.line!="number"&&typeof l.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(a&&"line"in a&&"column"in a&&a.line>0&&a.column>=0&&!l&&!h&&!u)){if(a&&"line"in a&&"column"in a&&l&&"line"in l&&"column"in l&&a.line>0&&a.column>=0&&l.line>0&&l.column>=0&&h)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:a,source:h,original:l,name:u}))}},s.prototype._serializeMappings=function(){for(var a=0,l=1,h=0,u=0,d=0,f=0,p="",c,g,m,y,w=this._mappings.toArray(),_=0,b=w.length;_<b;_++){if(g=w[_],c="",g.generatedLine!==l)for(a=0;g.generatedLine!==l;)c+=";",l++;else if(_>0){if(!t.compareByGeneratedPositionsInflated(g,w[_-1]))continue;c+=","}c+=e.encode(g.generatedColumn-a),a=g.generatedColumn,g.source!=null&&(y=this._sources.indexOf(g.source),c+=e.encode(y-f),f=y,c+=e.encode(g.originalLine-1-u),u=g.originalLine-1,c+=e.encode(g.originalColumn-h),h=g.originalColumn,g.name!=null&&(m=this._names.indexOf(g.name),c+=e.encode(m-d),d=m)),p+=c}return p},s.prototype._generateSourcesContent=function(a,l){return a.map(function(h){if(!this._sourcesContents)return null;l!=null&&(h=t.relative(l,h));var u=t.toSetString(h);return Object.prototype.hasOwnProperty.call(this._sourcesContents,u)?this._sourcesContents[u]:null},this)},s.prototype.toJSON=function(){var a={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(a.file=this._file),this._sourceRoot!=null&&(a.sourceRoot=this._sourceRoot),this._sourcesContents&&(a.sourcesContent=this._generateSourcesContent(a.sources,a.sourceRoot)),a},s.prototype.toString=function(){return JSON.stringify(this.toJSON())},n.SourceMapGenerator=s}}),Ip=q({"../../node_modules/source-map/lib/binary-search.js"(n){n.GREATEST_LOWER_BOUND=1,n.LEAST_UPPER_BOUND=2;function e(t,r,i,s,o,a){var l=Math.floor((r-t)/2)+t,h=o(i,s[l],!0);return h===0?l:h>0?r-l>1?e(l,r,i,s,o,a):a==n.LEAST_UPPER_BOUND?r<s.length?r:-1:l:l-t>1?e(t,l,i,s,o,a):a==n.LEAST_UPPER_BOUND?l:t<0?-1:t}n.search=function(r,i,s,o){if(i.length===0)return-1;var a=e(-1,i.length,r,i,s,o||n.GREATEST_LOWER_BOUND);if(a<0)return-1;for(;a-1>=0&&s(i[a],i[a-1],!0)===0;)--a;return a}}}),Pp=q({"../../node_modules/source-map/lib/quick-sort.js"(n){function e(i,s,o){var a=i[s];i[s]=i[o],i[o]=a}function t(i,s){return Math.round(i+Math.random()*(s-i))}function r(i,s,o,a){if(o<a){var l=t(o,a),h=o-1;e(i,l,a);for(var u=i[a],d=o;d<a;d++)s(i[d],u)<=0&&(h+=1,e(i,h,d));e(i,h+1,d);var f=h+1;r(i,s,o,f-1),r(i,s,f+1,a)}}n.quickSort=function(i,s){r(i,s,0,i.length-1)}}}),Lp=q({"../../node_modules/source-map/lib/source-map-consumer.js"(n){var e=nr(),t=Ip(),r=kc().ArraySet,i=_c(),s=Pp().quickSort;function o(u,d){var f=u;return typeof u=="string"&&(f=e.parseSourceMapInput(u)),f.sections!=null?new h(f,d):new a(f,d)}o.fromSourceMap=function(u,d){return a.fromSourceMap(u,d)},o.prototype._version=3,o.prototype.__generatedMappings=null,Object.defineProperty(o.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),o.prototype.__originalMappings=null,Object.defineProperty(o.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),o.prototype._charIsMappingSeparator=function(d,f){var p=d.charAt(f);return p===";"||p===","},o.prototype._parseMappings=function(d,f){throw new Error("Subclasses must implement _parseMappings")},o.GENERATED_ORDER=1,o.ORIGINAL_ORDER=2,o.GREATEST_LOWER_BOUND=1,o.LEAST_UPPER_BOUND=2,o.prototype.eachMapping=function(d,f,p){var c=f||null,g=p||o.GENERATED_ORDER,m;switch(g){case o.GENERATED_ORDER:m=this._generatedMappings;break;case o.ORIGINAL_ORDER:m=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var y=this.sourceRoot;m.map(function(w){var _=w.source===null?null:this._sources.at(w.source);return _=e.computeSourceURL(y,_,this._sourceMapURL),{source:_,generatedLine:w.generatedLine,generatedColumn:w.generatedColumn,originalLine:w.originalLine,originalColumn:w.originalColumn,name:w.name===null?null:this._names.at(w.name)}},this).forEach(d,c)},o.prototype.allGeneratedPositionsFor=function(d){var f=e.getArg(d,"line"),p={source:e.getArg(d,"source"),originalLine:f,originalColumn:e.getArg(d,"column",0)};if(p.source=this._findSourceIndex(p.source),p.source<0)return[];var c=[],g=this._findMapping(p,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,t.LEAST_UPPER_BOUND);if(g>=0){var m=this._originalMappings[g];if(d.column===void 0)for(var y=m.originalLine;m&&m.originalLine===y;)c.push({line:e.getArg(m,"generatedLine",null),column:e.getArg(m,"generatedColumn",null),lastColumn:e.getArg(m,"lastGeneratedColumn",null)}),m=this._originalMappings[++g];else for(var w=m.originalColumn;m&&m.originalLine===f&&m.originalColumn==w;)c.push({line:e.getArg(m,"generatedLine",null),column:e.getArg(m,"generatedColumn",null),lastColumn:e.getArg(m,"lastGeneratedColumn",null)}),m=this._originalMappings[++g]}return c},n.SourceMapConsumer=o;function a(u,d){var f=u;typeof u=="string"&&(f=e.parseSourceMapInput(u));var p=e.getArg(f,"version"),c=e.getArg(f,"sources"),g=e.getArg(f,"names",[]),m=e.getArg(f,"sourceRoot",null),y=e.getArg(f,"sourcesContent",null),w=e.getArg(f,"mappings"),_=e.getArg(f,"file",null);if(p!=this._version)throw new Error("Unsupported version: "+p);m&&(m=e.normalize(m)),c=c.map(String).map(e.normalize).map(function(b){return m&&e.isAbsolute(m)&&e.isAbsolute(b)?e.relative(m,b):b}),this._names=r.fromArray(g.map(String),!0),this._sources=r.fromArray(c,!0),this._absoluteSources=this._sources.toArray().map(function(b){return e.computeSourceURL(m,b,d)}),this.sourceRoot=m,this.sourcesContent=y,this._mappings=w,this._sourceMapURL=d,this.file=_}a.prototype=Object.create(o.prototype),a.prototype.consumer=o,a.prototype._findSourceIndex=function(u){var d=u;if(this.sourceRoot!=null&&(d=e.relative(this.sourceRoot,d)),this._sources.has(d))return this._sources.indexOf(d);var f;for(f=0;f<this._absoluteSources.length;++f)if(this._absoluteSources[f]==u)return f;return-1},a.fromSourceMap=function(d,f){var p=Object.create(a.prototype),c=p._names=r.fromArray(d._names.toArray(),!0),g=p._sources=r.fromArray(d._sources.toArray(),!0);p.sourceRoot=d._sourceRoot,p.sourcesContent=d._generateSourcesContent(p._sources.toArray(),p.sourceRoot),p.file=d._file,p._sourceMapURL=f,p._absoluteSources=p._sources.toArray().map(function(k){return e.computeSourceURL(p.sourceRoot,k,f)});for(var m=d._mappings.toArray().slice(),y=p.__generatedMappings=[],w=p.__originalMappings=[],_=0,b=m.length;_<b;_++){var v=m[_],E=new l;E.generatedLine=v.generatedLine,E.generatedColumn=v.generatedColumn,v.source&&(E.source=g.indexOf(v.source),E.originalLine=v.originalLine,E.originalColumn=v.originalColumn,v.name&&(E.name=c.indexOf(v.name)),w.push(E)),y.push(E)}return s(p.__originalMappings,e.compareByOriginalPositions),p},a.prototype._version=3,Object.defineProperty(a.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function l(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}a.prototype._parseMappings=function(d,f){for(var p=1,c=0,g=0,m=0,y=0,w=0,_=d.length,b=0,v={},E={},k=[],D=[],L,C,S,A,O;b<_;)if(d.charAt(b)===";")p++,b++,c=0;else if(d.charAt(b)===",")b++;else{for(L=new l,L.generatedLine=p,A=b;A<_&&!this._charIsMappingSeparator(d,A);A++);if(C=d.slice(b,A),S=v[C],S)b+=C.length;else{for(S=[];b<A;)i.decode(d,b,E),O=E.value,b=E.rest,S.push(O);if(S.length===2)throw new Error("Found a source, but no line and column");if(S.length===3)throw new Error("Found a source and line, but no column");v[C]=S}L.generatedColumn=c+S[0],c=L.generatedColumn,S.length>1&&(L.source=y+S[1],y+=S[1],L.originalLine=g+S[2],g=L.originalLine,L.originalLine+=1,L.originalColumn=m+S[3],m=L.originalColumn,S.length>4&&(L.name=w+S[4],w+=S[4])),D.push(L),typeof L.originalLine=="number"&&k.push(L)}s(D,e.compareByGeneratedPositionsDeflated),this.__generatedMappings=D,s(k,e.compareByOriginalPositions),this.__originalMappings=k},a.prototype._findMapping=function(d,f,p,c,g,m){if(d[p]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+d[p]);if(d[c]<0)throw new TypeError("Column must be greater than or equal to 0, got "+d[c]);return t.search(d,f,g,m)},a.prototype.computeColumnSpans=function(){for(var d=0;d<this._generatedMappings.length;++d){var f=this._generatedMappings[d];if(d+1<this._generatedMappings.length){var p=this._generatedMappings[d+1];if(f.generatedLine===p.generatedLine){f.lastGeneratedColumn=p.generatedColumn-1;continue}}f.lastGeneratedColumn=1/0}},a.prototype.originalPositionFor=function(d){var f={generatedLine:e.getArg(d,"line"),generatedColumn:e.getArg(d,"column")},p=this._findMapping(f,this._generatedMappings,"generatedLine","generatedColumn",e.compareByGeneratedPositionsDeflated,e.getArg(d,"bias",o.GREATEST_LOWER_BOUND));if(p>=0){var c=this._generatedMappings[p];if(c.generatedLine===f.generatedLine){var g=e.getArg(c,"source",null);g!==null&&(g=this._sources.at(g),g=e.computeSourceURL(this.sourceRoot,g,this._sourceMapURL));var m=e.getArg(c,"name",null);return m!==null&&(m=this._names.at(m)),{source:g,line:e.getArg(c,"originalLine",null),column:e.getArg(c,"originalColumn",null),name:m}}}return{source:null,line:null,column:null,name:null}},a.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(d){return d==null}):!1},a.prototype.sourceContentFor=function(d,f){if(!this.sourcesContent)return null;var p=this._findSourceIndex(d);if(p>=0)return this.sourcesContent[p];var c=d;this.sourceRoot!=null&&(c=e.relative(this.sourceRoot,c));var g;if(this.sourceRoot!=null&&(g=e.urlParse(this.sourceRoot))){var m=c.replace(/^file:\/\//,"");if(g.scheme=="file"&&this._sources.has(m))return this.sourcesContent[this._sources.indexOf(m)];if((!g.path||g.path=="/")&&this._sources.has("/"+c))return this.sourcesContent[this._sources.indexOf("/"+c)]}if(f)return null;throw new Error('"'+c+'" is not in the SourceMap.')},a.prototype.generatedPositionFor=function(d){var f=e.getArg(d,"source");if(f=this._findSourceIndex(f),f<0)return{line:null,column:null,lastColumn:null};var p={source:f,originalLine:e.getArg(d,"line"),originalColumn:e.getArg(d,"column")},c=this._findMapping(p,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,e.getArg(d,"bias",o.GREATEST_LOWER_BOUND));if(c>=0){var g=this._originalMappings[c];if(g.source===p.source)return{line:e.getArg(g,"generatedLine",null),column:e.getArg(g,"generatedColumn",null),lastColumn:e.getArg(g,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},n.BasicSourceMapConsumer=a;function h(u,d){var f=u;typeof u=="string"&&(f=e.parseSourceMapInput(u));var p=e.getArg(f,"version"),c=e.getArg(f,"sections");if(p!=this._version)throw new Error("Unsupported version: "+p);this._sources=new r,this._names=new r;var g={line:-1,column:0};this._sections=c.map(function(m){if(m.url)throw new Error("Support for url field in sections not implemented.");var y=e.getArg(m,"offset"),w=e.getArg(y,"line"),_=e.getArg(y,"column");if(w<g.line||w===g.line&&_<g.column)throw new Error("Section offsets must be ordered and non-overlapping.");return g=y,{generatedOffset:{generatedLine:w+1,generatedColumn:_+1},consumer:new o(e.getArg(m,"map"),d)}})}h.prototype=Object.create(o.prototype),h.prototype.constructor=o,h.prototype._version=3,Object.defineProperty(h.prototype,"sources",{get:function(){for(var u=[],d=0;d<this._sections.length;d++)for(var f=0;f<this._sections[d].consumer.sources.length;f++)u.push(this._sections[d].consumer.sources[f]);return u}}),h.prototype.originalPositionFor=function(d){var f={generatedLine:e.getArg(d,"line"),generatedColumn:e.getArg(d,"column")},p=t.search(f,this._sections,function(g,m){var y=g.generatedLine-m.generatedOffset.generatedLine;return y||g.generatedColumn-m.generatedOffset.generatedColumn}),c=this._sections[p];return c?c.consumer.originalPositionFor({line:f.generatedLine-(c.generatedOffset.generatedLine-1),column:f.generatedColumn-(c.generatedOffset.generatedLine===f.generatedLine?c.generatedOffset.generatedColumn-1:0),bias:d.bias}):{source:null,line:null,column:null,name:null}},h.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(d){return d.consumer.hasContentsOfAllSources()})},h.prototype.sourceContentFor=function(d,f){for(var p=0;p<this._sections.length;p++){var c=this._sections[p],g=c.consumer.sourceContentFor(d,!0);if(g)return g}if(f)return null;throw new Error('"'+d+'" is not in the SourceMap.')},h.prototype.generatedPositionFor=function(d){for(var f=0;f<this._sections.length;f++){var p=this._sections[f];if(p.consumer._findSourceIndex(e.getArg(d,"source"))!==-1){var c=p.consumer.generatedPositionFor(d);if(c){var g={line:c.line+(p.generatedOffset.generatedLine-1),column:c.column+(p.generatedOffset.generatedLine===c.line?p.generatedOffset.generatedColumn-1:0)};return g}}}return{line:null,column:null}},h.prototype._parseMappings=function(d,f){this.__generatedMappings=[],this.__originalMappings=[];for(var p=0;p<this._sections.length;p++)for(var c=this._sections[p],g=c.consumer._generatedMappings,m=0;m<g.length;m++){var y=g[m],w=c.consumer._sources.at(y.source);w=e.computeSourceURL(c.consumer.sourceRoot,w,this._sourceMapURL),this._sources.add(w),w=this._sources.indexOf(w);var _=null;y.name&&(_=c.consumer._names.at(y.name),this._names.add(_),_=this._names.indexOf(_));var b={source:w,generatedLine:y.generatedLine+(c.generatedOffset.generatedLine-1),generatedColumn:y.generatedColumn+(c.generatedOffset.generatedLine===y.generatedLine?c.generatedOffset.generatedColumn-1:0),originalLine:y.originalLine,originalColumn:y.originalColumn,name:_};this.__generatedMappings.push(b),typeof b.originalLine=="number"&&this.__originalMappings.push(b)}s(this.__generatedMappings,e.compareByGeneratedPositionsDeflated),s(this.__originalMappings,e.compareByOriginalPositions)},n.IndexedSourceMapConsumer=h}}),Mp=q({"../../node_modules/source-map/lib/source-node.js"(n){var e=xc().SourceMapGenerator,t=nr(),r=/(\r?\n)/,i=10,s="$$$isSourceNode$$$";function o(a,l,h,u,d){this.children=[],this.sourceContents={},this.line=a??null,this.column=l??null,this.source=h??null,this.name=d??null,this[s]=!0,u!=null&&this.add(u)}o.fromStringWithSourceMap=function(l,h,u){var d=new o,f=l.split(r),p=0,c=function(){var _=v(),b=v()||"";return _+b;function v(){return p<f.length?f[p++]:void 0}},g=1,m=0,y=null;return h.eachMapping(function(_){if(y!==null)if(g<_.generatedLine)w(y,c()),g++,m=0;else{var b=f[p]||"",v=b.substr(0,_.generatedColumn-m);f[p]=b.substr(_.generatedColumn-m),m=_.generatedColumn,w(y,v),y=_;return}for(;g<_.generatedLine;)d.add(c()),g++;if(m<_.generatedColumn){var b=f[p]||"";d.add(b.substr(0,_.generatedColumn)),f[p]=b.substr(_.generatedColumn),m=_.generatedColumn}y=_},this),p<f.length&&(y&&w(y,c()),d.add(f.splice(p).join(""))),h.sources.forEach(function(_){var b=h.sourceContentFor(_);b!=null&&(u!=null&&(_=t.join(u,_)),d.setSourceContent(_,b))}),d;function w(_,b){if(_===null||_.source===void 0)d.add(b);else{var v=u?t.join(u,_.source):_.source;d.add(new o(_.originalLine,_.originalColumn,v,b,_.name))}}},o.prototype.add=function(l){if(Array.isArray(l))l.forEach(function(h){this.add(h)},this);else if(l[s]||typeof l=="string")l&&this.children.push(l);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+l);return this},o.prototype.prepend=function(l){if(Array.isArray(l))for(var h=l.length-1;h>=0;h--)this.prepend(l[h]);else if(l[s]||typeof l=="string")this.children.unshift(l);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+l);return this},o.prototype.walk=function(l){for(var h,u=0,d=this.children.length;u<d;u++)h=this.children[u],h[s]?h.walk(l):h!==""&&l(h,{source:this.source,line:this.line,column:this.column,name:this.name})},o.prototype.join=function(l){var h,u,d=this.children.length;if(d>0){for(h=[],u=0;u<d-1;u++)h.push(this.children[u]),h.push(l);h.push(this.children[u]),this.children=h}return this},o.prototype.replaceRight=function(l,h){var u=this.children[this.children.length-1];return u[s]?u.replaceRight(l,h):typeof u=="string"?this.children[this.children.length-1]=u.replace(l,h):this.children.push("".replace(l,h)),this},o.prototype.setSourceContent=function(l,h){this.sourceContents[t.toSetString(l)]=h},o.prototype.walkSourceContents=function(l){for(var h=0,u=this.children.length;h<u;h++)this.children[h][s]&&this.children[h].walkSourceContents(l);for(var d=Object.keys(this.sourceContents),h=0,u=d.length;h<u;h++)l(t.fromSetString(d[h]),this.sourceContents[d[h]])},o.prototype.toString=function(){var l="";return this.walk(function(h){l+=h}),l},o.prototype.toStringWithSourceMap=function(l){var h={code:"",line:1,column:0},u=new e(l),d=!1,f=null,p=null,c=null,g=null;return this.walk(function(m,y){h.code+=m,y.source!==null&&y.line!==null&&y.column!==null?((f!==y.source||p!==y.line||c!==y.column||g!==y.name)&&u.addMapping({source:y.source,original:{line:y.line,column:y.column},generated:{line:h.line,column:h.column},name:y.name}),f=y.source,p=y.line,c=y.column,g=y.name,d=!0):d&&(u.addMapping({generated:{line:h.line,column:h.column}}),f=null,d=!1);for(var w=0,_=m.length;w<_;w++)m.charCodeAt(w)===i?(h.line++,h.column=0,w+1===_?(f=null,d=!1):d&&u.addMapping({source:y.source,original:{line:y.line,column:y.column},generated:{line:h.line,column:h.column},name:y.name})):h.column++}),this.walkSourceContents(function(m,y){u.setSourceContent(m,y)}),{code:h.code,map:u}},n.SourceNode=o}}),Np=q({"../../node_modules/source-map/source-map.js"(n){n.SourceMapGenerator=xc().SourceMapGenerator,n.SourceMapConsumer=Lp().SourceMapConsumer,n.SourceNode=Mp().SourceNode}}),Dp=q({"../../node_modules/handlebars/dist/cjs/handlebars/compiler/code-gen.js"(n,e){n.__esModule=!0;var t=Oe(),r=void 0;try{(typeof define!="function"||!define.amd)&&(i=Np(),r=i.SourceNode)}catch{}var i;r||(r=function(a,l,h,u){this.src="",u&&this.add(u)},r.prototype={add:function(l){t.isArray(l)&&(l=l.join("")),this.src+=l},prepend:function(l){t.isArray(l)&&(l=l.join("")),this.src=l+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}});function s(a,l,h){if(t.isArray(a)){for(var u=[],d=0,f=a.length;d<f;d++)u.push(l.wrap(a[d],h));return u}else if(typeof a=="boolean"||typeof a=="number")return a+"";return a}function o(a){this.srcFile=a,this.source=[]}o.prototype={isEmpty:function(){return!this.source.length},prepend:function(l,h){this.source.unshift(this.wrap(l,h))},push:function(l,h){this.source.push(this.wrap(l,h))},merge:function(){var l=this.empty();return this.each(function(h){l.add(["  ",h,`
`])}),l},each:function(l){for(var h=0,u=this.source.length;h<u;h++)l(this.source[h])},empty:function(){var l=this.currentLocation||{start:{}};return new r(l.start.line,l.start.column,this.srcFile)},wrap:function(l){var h=arguments.length<=1||arguments[1]===void 0?this.currentLocation||{start:{}}:arguments[1];return l instanceof r?l:(l=s(l,this,h),new r(h.start.line,h.start.column,this.srcFile,l))},functionCall:function(l,h,u){return u=this.generateList(u),this.wrap([l,h?"."+h+"(":"(",u,")"])},quotedString:function(l){return'"'+(l+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(l){var h=this,u=[];Object.keys(l).forEach(function(f){var p=s(l[f],h);p!=="undefined"&&u.push([h.quotedString(f),":",p])});var d=this.generateList(u);return d.prepend("{"),d.add("}"),d},generateList:function(l){for(var h=this.empty(),u=0,d=l.length;u<d;u++)u&&h.add(","),h.add(s(l[u],this));return h},generateArray:function(l){var h=this.generateList(l);return h.prepend("["),h.add("]"),h}},n.default=o,e.exports=n.default}}),$p=q({"../../node_modules/handlebars/dist/cjs/handlebars/compiler/javascript-compiler.js"(n,e){n.__esModule=!0;function t(f){return f&&f.__esModule?f:{default:f}}var r=fo(),i=Ke(),s=t(i),o=Oe(),a=Dp(),l=t(a);function h(f){this.value=f}function u(){}u.prototype={nameLookup:function(p,c){return this.internalNameLookup(p,c)},depthedLookup:function(p){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(p),")"]},compilerInfo:function(){var p=r.COMPILER_REVISION,c=r.REVISION_CHANGES[p];return[p,c]},appendToBuffer:function(p,c,g){return o.isArray(p)||(p=[p]),p=this.source.wrap(p,c),this.environment.isSimple?["return ",p,";"]:g?["buffer += ",p,";"]:(p.appendToBuffer=!0,p)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(p,c){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",p,",",JSON.stringify(c),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(p,c,g,m){this.environment=p,this.options=c,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!m,this.name=this.environment.name,this.isChild=!!g,this.context=g||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(p,c),this.useDepths=this.useDepths||p.useDepths||p.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||p.useBlockParams;var y=p.opcodes,w=void 0,_=void 0,b=void 0,v=void 0;for(b=0,v=y.length;b<v;b++)w=y[b],this.source.currentLocation=w.loc,_=_||w.loc,this[w.opcode].apply(this,w.args);if(this.source.currentLocation=_,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new s.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),`;
`]),this.decorators.push("return fn;"),m?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend(`function(fn, props, container, depth0, data, blockParams, depths) {
`),this.decorators.push(`}
`),this.decorators=this.decorators.merge()));var E=this.createFunctionContext(m);if(this.isChild)return E;var k={compiler:this.compilerInfo(),main:E};this.decorators&&(k.main_d=this.decorators,k.useDecorators=!0);var D=this.context,L=D.programs,C=D.decorators;for(b=0,v=L.length;b<v;b++)L[b]&&(k[b]=L[b],C[b]&&(k[b+"_d"]=C[b],k.useDecorators=!0));return this.environment.usePartial&&(k.usePartial=!0),this.options.data&&(k.useData=!0),this.useDepths&&(k.useDepths=!0),this.useBlockParams&&(k.useBlockParams=!0),this.options.compat&&(k.compat=!0),m?k.compilerOptions=this.options:(k.compiler=JSON.stringify(k.compiler),this.source.currentLocation={start:{line:1,column:0}},k=this.objectLiteral(k),c.srcName?(k=k.toStringWithSourceMap({file:c.destName}),k.map=k.map&&k.map.toString()):k=k.toString()),k},preamble:function(){this.lastContext=0,this.source=new l.default(this.options.srcName),this.decorators=new l.default(this.options.srcName)},createFunctionContext:function(p){var c=this,g="",m=this.stackVars.concat(this.registers.list);m.length>0&&(g+=", "+m.join(", "));var y=0;Object.keys(this.aliases).forEach(function(b){var v=c.aliases[b];v.children&&v.referenceCount>1&&(g+=", alias"+ ++y+"="+b,v.children[0]="alias"+y)}),this.lookupPropertyFunctionIsUsed&&(g+=", "+this.lookupPropertyFunctionVarDeclaration());var w=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&w.push("blockParams"),this.useDepths&&w.push("depths");var _=this.mergeSource(g);return p?(w.push(_),Function.apply(this,w)):this.source.wrap(["function(",w.join(","),`) {
  `,_,"}"])},mergeSource:function(p){var c=this.environment.isSimple,g=!this.forceBuffer,m=void 0,y=void 0,w=void 0,_=void 0;return this.source.each(function(b){b.appendToBuffer?(w?b.prepend("  + "):w=b,_=b):(w&&(y?w.prepend("buffer += "):m=!0,_.add(";"),w=_=void 0),y=!0,c||(g=!1))}),g?w?(w.prepend("return "),_.add(";")):y||this.source.push('return "";'):(p+=", buffer = "+(m?"":this.initializeBuffer()),w?(w.prepend("return buffer + "),_.add(";")):this.source.push("return buffer;")),p&&this.source.prepend("var "+p.substring(2)+(m?"":`;
`)),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return`
      lookupProperty = container.lookupProperty || function(parent, propertyName) {
        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {
          return parent[propertyName];
        }
        return undefined
    }
    `.trim()},blockValue:function(p){var c=this.aliasable("container.hooks.blockHelperMissing"),g=[this.contextName(0)];this.setupHelperArgs(p,0,g);var m=this.popStack();g.splice(1,0,m),this.push(this.source.functionCall(c,"call",g))},ambiguousBlockValue:function(){var p=this.aliasable("container.hooks.blockHelperMissing"),c=[this.contextName(0)];this.setupHelperArgs("",0,c,!0),this.flushInline();var g=this.topStack();c.splice(1,0,g),this.pushSource(["if (!",this.lastHelper,") { ",g," = ",this.source.functionCall(p,"call",c),"}"])},appendContent:function(p){this.pendingContent?p=this.pendingContent+p:this.pendingLocation=this.source.currentLocation,this.pendingContent=p},append:function(){if(this.isInline())this.replaceStack(function(c){return[" != null ? ",c,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var p=this.popStack();this.pushSource(["if (",p," != null) { ",this.appendToBuffer(p,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(p){this.lastContext=p},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(p,c,g,m){var y=0;!m&&this.options.compat&&!this.lastContext?this.push(this.depthedLookup(p[y++])):this.pushContext(),this.resolvePath("context",p,y,c,g)},lookupBlockParam:function(p,c){this.useBlockParams=!0,this.push(["blockParams[",p[0],"][",p[1],"]"]),this.resolvePath("context",c,1)},lookupData:function(p,c,g){p?this.pushStackLiteral("container.data(data, "+p+")"):this.pushStackLiteral("data"),this.resolvePath("data",c,0,!0,g)},resolvePath:function(p,c,g,m,y){var w=this;if(this.options.strict||this.options.assumeObjects){this.push(d(this.options.strict&&y,this,c,g,p));return}for(var _=c.length;g<_;g++)this.replaceStack(function(b){var v=w.nameLookup(b,c[g],p);return m?[" && ",v]:[" != null ? ",v," : ",b]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(p,c){this.pushContext(),this.pushString(c),c!=="SubExpression"&&(typeof p=="string"?this.pushString(p):this.pushStackLiteral(p))},emptyHash:function(p){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(p?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var p=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(p.ids)),this.stringParams&&(this.push(this.objectLiteral(p.contexts)),this.push(this.objectLiteral(p.types))),this.push(this.objectLiteral(p.values))},pushString:function(p){this.pushStackLiteral(this.quotedString(p))},pushLiteral:function(p){this.pushStackLiteral(p)},pushProgram:function(p){p!=null?this.pushStackLiteral(this.programExpression(p)):this.pushStackLiteral(null)},registerDecorator:function(p,c){var g=this.nameLookup("decorators",c,"decorator"),m=this.setupHelperArgs(c,p);this.decorators.push(["fn = ",this.decorators.functionCall(g,"",["fn","props","container",m])," || fn;"])},invokeHelper:function(p,c,g){var m=this.popStack(),y=this.setupHelper(p,c),w=[];g&&w.push(y.name),w.push(m),this.options.strict||w.push(this.aliasable("container.hooks.helperMissing"));var _=["(",this.itemsSeparatedBy(w,"||"),")"],b=this.source.functionCall(_,"call",y.callParams);this.push(b)},itemsSeparatedBy:function(p,c){var g=[];g.push(p[0]);for(var m=1;m<p.length;m++)g.push(c,p[m]);return g},invokeKnownHelper:function(p,c){var g=this.setupHelper(p,c);this.push(this.source.functionCall(g.name,"call",g.callParams))},invokeAmbiguous:function(p,c){this.useRegister("helper");var g=this.popStack();this.emptyHash();var m=this.setupHelper(0,p,c),y=this.lastHelper=this.nameLookup("helpers",p,"helper"),w=["(","(helper = ",y," || ",g,")"];this.options.strict||(w[0]="(helper = ",w.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",w,m.paramsInit?["),(",m.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",m.callParams)," : helper))"])},invokePartial:function(p,c,g){var m=[],y=this.setupParams(c,1,m);p&&(c=this.popStack(),delete y.name),g&&(y.indent=JSON.stringify(g)),y.helpers="helpers",y.partials="partials",y.decorators="container.decorators",p?m.unshift(c):m.unshift(this.nameLookup("partials",c,"partial")),this.options.compat&&(y.depths="depths"),y=this.objectLiteral(y),m.push(y),this.push(this.source.functionCall("container.invokePartial","",m))},assignToHash:function(p){var c=this.popStack(),g=void 0,m=void 0,y=void 0;this.trackIds&&(y=this.popStack()),this.stringParams&&(m=this.popStack(),g=this.popStack());var w=this.hash;g&&(w.contexts[p]=g),m&&(w.types[p]=m),y&&(w.ids[p]=y),w.values[p]=c},pushId:function(p,c,g){p==="BlockParam"?this.pushStackLiteral("blockParams["+c[0]+"].path["+c[1]+"]"+(g?" + "+JSON.stringify("."+g):"")):p==="PathExpression"?this.pushString(c):p==="SubExpression"?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:u,compileChildren:function(p,c){for(var g=p.children,m=void 0,y=void 0,w=0,_=g.length;w<_;w++){m=g[w],y=new this.compiler;var b=this.matchExistingProgram(m);if(b==null){this.context.programs.push("");var v=this.context.programs.length;m.index=v,m.name="program"+v,this.context.programs[v]=y.compile(m,c,this.context,!this.precompile),this.context.decorators[v]=y.decorators,this.context.environments[v]=m,this.useDepths=this.useDepths||y.useDepths,this.useBlockParams=this.useBlockParams||y.useBlockParams,m.useDepths=this.useDepths,m.useBlockParams=this.useBlockParams}else m.index=b.index,m.name="program"+b.index,this.useDepths=this.useDepths||b.useDepths,this.useBlockParams=this.useBlockParams||b.useBlockParams}},matchExistingProgram:function(p){for(var c=0,g=this.context.environments.length;c<g;c++){var m=this.context.environments[c];if(m&&m.equals(p))return m}},programExpression:function(p){var c=this.environment.children[p],g=[c.index,"data",c.blockParams];return(this.useBlockParams||this.useDepths)&&g.push("blockParams"),this.useDepths&&g.push("depths"),"container.program("+g.join(", ")+")"},useRegister:function(p){this.registers[p]||(this.registers[p]=!0,this.registers.list.push(p))},push:function(p){return p instanceof h||(p=this.source.wrap(p)),this.inlineStack.push(p),p},pushStackLiteral:function(p){this.push(new h(p))},pushSource:function(p){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),p&&this.source.push(p)},replaceStack:function(p){var c=["("],g=void 0,m=void 0,y=void 0;if(!this.isInline())throw new s.default("replaceStack on non-inline");var w=this.popStack(!0);if(w instanceof h)g=[w.value],c=["(",g],y=!0;else{m=!0;var _=this.incrStack();c=["((",this.push(_)," = ",w,")"],g=this.topStack()}var b=p.call(this,g);y||this.popStack(),m&&this.stackSlot--,this.push(c.concat(b,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var p=this.inlineStack;this.inlineStack=[];for(var c=0,g=p.length;c<g;c++){var m=p[c];if(m instanceof h)this.compileStack.push(m);else{var y=this.incrStack();this.pushSource([y," = ",m,";"]),this.compileStack.push(y)}}},isInline:function(){return this.inlineStack.length},popStack:function(p){var c=this.isInline(),g=(c?this.inlineStack:this.compileStack).pop();if(!p&&g instanceof h)return g.value;if(!c){if(!this.stackSlot)throw new s.default("Invalid stack pop");this.stackSlot--}return g},topStack:function(){var p=this.isInline()?this.inlineStack:this.compileStack,c=p[p.length-1];return c instanceof h?c.value:c},contextName:function(p){return this.useDepths&&p?"depths["+p+"]":"depth"+p},quotedString:function(p){return this.source.quotedString(p)},objectLiteral:function(p){return this.source.objectLiteral(p)},aliasable:function(p){var c=this.aliases[p];return c?(c.referenceCount++,c):(c=this.aliases[p]=this.source.wrap(p),c.aliasable=!0,c.referenceCount=1,c)},setupHelper:function(p,c,g){var m=[],y=this.setupHelperArgs(c,p,m,g),w=this.nameLookup("helpers",c,"helper"),_=this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})");return{params:m,paramsInit:y,name:w,callParams:[_].concat(m)}},setupParams:function(p,c,g){var m={},y=[],w=[],_=[],b=!g,v=void 0;b&&(g=[]),m.name=this.quotedString(p),m.hash=this.popStack(),this.trackIds&&(m.hashIds=this.popStack()),this.stringParams&&(m.hashTypes=this.popStack(),m.hashContexts=this.popStack());var E=this.popStack(),k=this.popStack();(k||E)&&(m.fn=k||"container.noop",m.inverse=E||"container.noop");for(var D=c;D--;)v=this.popStack(),g[D]=v,this.trackIds&&(_[D]=this.popStack()),this.stringParams&&(w[D]=this.popStack(),y[D]=this.popStack());return b&&(m.args=this.source.generateArray(g)),this.trackIds&&(m.ids=this.source.generateArray(_)),this.stringParams&&(m.types=this.source.generateArray(w),m.contexts=this.source.generateArray(y)),this.options.data&&(m.data="data"),this.useBlockParams&&(m.blockParams="blockParams"),m},setupHelperArgs:function(p,c,g,m){var y=this.setupParams(p,c,g);return y.loc=JSON.stringify(this.source.currentLocation),y=this.objectLiteral(y),m?(this.useRegister("options"),g.push("options"),["options=",y]):g?(g.push(y),""):y}},function(){for(var f="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),p=u.RESERVED_WORDS={},c=0,g=f.length;c<g;c++)p[f[c]]=!0}(),u.isValidJavaScriptVariableName=function(f){return!u.RESERVED_WORDS[f]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(f)};function d(f,p,c,g,m){var y=p.popStack(),w=c.length;for(f&&w--;g<w;g++)y=p.nameLookup(y,c[g],m);return f?[p.aliasable("container.strict"),"(",y,", ",p.quotedString(c[g]),", ",JSON.stringify(p.source.currentLocation)," )"]:y}n.default=u,e.exports=n.default}}),Bp=q({"../../node_modules/handlebars/dist/cjs/handlebars.js"(n,e){n.__esModule=!0;function t(w){return w&&w.__esModule?w:{default:w}}var r=xp(),i=t(r),s=bc(),o=t(s),a=Ap(),l=Op(),h=$p(),u=t(h),d=po(),f=t(d),p=vc(),c=t(p),g=i.default.create;function m(){var w=g();return w.compile=function(_,b){return l.compile(_,b,w)},w.precompile=function(_,b){return l.precompile(_,b,w)},w.AST=o.default,w.Compiler=l.Compiler,w.JavaScriptCompiler=u.default,w.Parser=a.parser,w.parse=a.parse,w.parseWithoutProcessing=a.parseWithoutProcessing,w}var y=m();y.create=m,c.default(y),y.Visitor=f.default,y.default=y,n.default=y,e.exports=n.default}}),Fp=q({"../../node_modules/handlebars/dist/cjs/handlebars/compiler/printer.js"(n){n.__esModule=!0,n.print=i,n.PrintVisitor=s;function e(o){return o&&o.__esModule?o:{default:o}}var t=po(),r=e(t);function i(o){return new s().accept(o)}function s(){this.padding=0}s.prototype=new r.default,s.prototype.pad=function(o){for(var a="",l=0,h=this.padding;l<h;l++)a+="  ";return a+=o+`
`,a},s.prototype.Program=function(o){var a="",l=o.body,h=void 0,u=void 0;if(o.blockParams){var d="BLOCK PARAMS: [";for(h=0,u=o.blockParams.length;h<u;h++)d+=" "+o.blockParams[h];d+=" ]",a+=this.pad(d)}for(h=0,u=l.length;h<u;h++)a+=this.accept(l[h]);return this.padding--,a},s.prototype.MustacheStatement=function(o){return this.pad("{{ "+this.SubExpression(o)+" }}")},s.prototype.Decorator=function(o){return this.pad("{{ DIRECTIVE "+this.SubExpression(o)+" }}")},s.prototype.BlockStatement=s.prototype.DecoratorBlock=function(o){var a="";return a+=this.pad((o.type==="DecoratorBlock"?"DIRECTIVE ":"")+"BLOCK:"),this.padding++,a+=this.pad(this.SubExpression(o)),o.program&&(a+=this.pad("PROGRAM:"),this.padding++,a+=this.accept(o.program),this.padding--),o.inverse&&(o.program&&this.padding++,a+=this.pad("{{^}}"),this.padding++,a+=this.accept(o.inverse),this.padding--,o.program&&this.padding--),this.padding--,a},s.prototype.PartialStatement=function(o){var a="PARTIAL:"+o.name.original;return o.params[0]&&(a+=" "+this.accept(o.params[0])),o.hash&&(a+=" "+this.accept(o.hash)),this.pad("{{> "+a+" }}")},s.prototype.PartialBlockStatement=function(o){var a="PARTIAL BLOCK:"+o.name.original;return o.params[0]&&(a+=" "+this.accept(o.params[0])),o.hash&&(a+=" "+this.accept(o.hash)),a+=" "+this.pad("PROGRAM:"),this.padding++,a+=this.accept(o.program),this.padding--,this.pad("{{> "+a+" }}")},s.prototype.ContentStatement=function(o){return this.pad("CONTENT[ '"+o.value+"' ]")},s.prototype.CommentStatement=function(o){return this.pad("{{! '"+o.value+"' }}")},s.prototype.SubExpression=function(o){for(var a=o.params,l=[],h=void 0,u=0,d=a.length;u<d;u++)l.push(this.accept(a[u]));return a="["+l.join(", ")+"]",h=o.hash?" "+this.accept(o.hash):"",this.accept(o.path)+" "+a+h},s.prototype.PathExpression=function(o){var a=o.parts.join("/");return(o.data?"@":"")+"PATH:"+a},s.prototype.StringLiteral=function(o){return'"'+o.value+'"'},s.prototype.NumberLiteral=function(o){return"NUMBER{"+o.value+"}"},s.prototype.BooleanLiteral=function(o){return"BOOLEAN{"+o.value+"}"},s.prototype.UndefinedLiteral=function(){return"UNDEFINED"},s.prototype.NullLiteral=function(){return"NULL"},s.prototype.Hash=function(o){for(var a=o.pairs,l=[],h=0,u=a.length;h<u;h++)l.push(this.accept(a[h]));return"HASH{"+l.join(", ")+"}"},s.prototype.HashPair=function(o){return o.key+"="+this.accept(o.value)}}}),zp=q({"../../node_modules/handlebars/lib/index.js"(n,e){var t=Bp().default,r=Fp();t.PrintVisitor=r.PrintVisitor,t.print=r.print,e.exports=t;function i(s,o){var a=Tn("fs"),l=a.readFileSync(o,"utf8");s.exports=t.compile(l)}typeof Tn<"u"&&Tn.extensions&&(Tn.extensions[".handlebars"]=i,Tn.extensions[".hbs"]=i)}}),Sc=class Dr{static isPlaceholder(e){return(e==null?void 0:e.onclick)!=null}static isAudio(e){var t;return e&&!Dr.isPlaceholder(e)&&((t=e==null?void 0:e.mimeType)==null?void 0:t.startsWith("audio/"))||e.mimeType=="application/ogg"}static isImage(e){var t;return e&&!Dr.isPlaceholder(e)&&((t=e==null?void 0:e.mimeType)==null?void 0:t.startsWith("image/"))}static isDocument(e){var t,r;return e&&!Dr.isPlaceholder(e)&&(((t=e==null?void 0:e.mimeType)==null?void 0:t.startsWith("text/"))||((r=e==null?void 0:e.mimeType)==null?void 0:r.startsWith("application/pdf")))}},jp=(n=>(n.image="image",n.audio="audio",n.document="document",n.video="video",n.file="file",n))(jp||{}),Up=class Ec{constructor(e){var r;if(this.fid=e.fid||((r=e.ticket)==null?void 0:r.fid),!this.fid)throw new Error("Invalid resource, fid missing");this.ticket=e.ticket,this.fileName=e.fileName,this.size=e.size,this.data=e.data,this.url=e.url,this.mimeType=e.mimeType,this.expires=e.expires,this.meta=e.meta||{},this.meta.created=this.meta.created||Date.now();let t=this.fileName.split(".").pop();this.furl=`fid://${this.fid}.${t}`,this.fileType=Ec.determineFileTypeFromMimeType(this.mimeType)||e.fileType||"file"}static determineFileTypeFromMimeType(e){const t=["audio","document","image","video","file"];if(e){let r=e.split("/")[0];if(t.includes(r))return r;if(r.startsWith("text/"))return"document";if(r==="application/ogg")return"audio";if(r==="application/pdf")return"document";if(r==="video/")return"video"}}isAudio(){var e,t;return this.fileType==="audio"?!0:this.mimeType?((e=this.mimeType)==null?void 0:e.startsWith("audio/"))||((t=this.mimeType)==null?void 0:t.startsWith("application/ogg")):!1}isVideo(){var e;return this.fileType==="video"?!0:this.mimeType?(e=this.mimeType)==null?void 0:e.startsWith("video/"):!1}isImage(){var e;return this.fileType==="image"?!0:this.mimeType?(e=this.mimeType)==null?void 0:e.startsWith("image/"):!1}isDocument(){var e,t;return this.fileType==="document"?!0:this.mimeType?((e=this.mimeType)==null?void 0:e.startsWith("text/"))||((t=this.mimeType)==null?void 0:t.startsWith("application/pdf")):!1}asBase64(e){if(this.data instanceof Buffer)return e?`data:${this.mimeType};base64,${this.data.toString("base64")}`:this.data.toString("base64");if(typeof this.data=="string")return this.data}},Hp=class{constructor(n=(e,t)=>window.fetch(e,t)){this.fetch=n}async executeRequest(n,e){return await this.fetch(n,e)}},wt=new WeakMap,It=new WeakMap,ut=new WeakMap,Kr=Symbol("anyProducer"),qa=Promise.resolve(),Zr=Symbol("listenerAdded"),Yr=Symbol("listenerRemoved"),Xr=!1,ns=!1;function sn(n){if(typeof n!="string"&&typeof n!="symbol"&&typeof n!="number")throw new TypeError("`eventName` must be a string, symbol, or number")}function vr(n){if(typeof n!="function")throw new TypeError("listener must be a function")}function on(n,e){const t=It.get(n);if(t.has(e))return t.get(e)}function Fn(n,e){const t=typeof e=="string"||typeof e=="symbol"||typeof e=="number"?e:Kr,r=ut.get(n);if(r.has(t))return r.get(t)}function Wp(n,e,t){const r=ut.get(n);if(r.has(e))for(const i of r.get(e))i.enqueue(t);if(r.has(Kr)){const i=Promise.all([e,t]);for(const s of r.get(Kr))s.enqueue(i)}}function Va(n,e){e=Array.isArray(e)?e:[e];let t=!1,r=()=>{},i=[];const s={enqueue(o){i.push(o),r()},finish(){t=!0,r()}};for(const o of e){let a=Fn(n,o);a||(a=new Set,ut.get(n).set(o,a)),a.add(s)}return{async next(){return i?i.length===0?t?(i=void 0,this.next()):(await new Promise(o=>{r=o}),this.next()):{done:!1,value:await i.shift()}:{done:!0}},async return(o){i=void 0;for(const a of e){const l=Fn(n,a);l&&(l.delete(s),l.size===0&&ut.get(n).delete(a))}return r(),arguments.length>0?{done:!0,value:await o}:{done:!0}},[Symbol.asyncIterator](){return this}}}function Ja(n){if(n===void 0)return Ga;if(!Array.isArray(n))throw new TypeError("`methodNames` must be an array of strings");for(const e of n)if(!Ga.includes(e))throw typeof e!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${e} is not Emittery method`);return n}var cn=n=>n===Zr||n===Yr;function br(n,e,t){if(cn(e))try{Xr=!0,n.emit(e,t)}finally{Xr=!1}}var Ci=class Cs{static mixin(e,t){return t=Ja(t),r=>{if(typeof r!="function")throw new TypeError("`target` must be function");for(const o of t)if(r.prototype[o]!==void 0)throw new Error(`The property \`${o}\` already exists on \`target\``);function i(){return Object.defineProperty(this,e,{enumerable:!1,value:new Cs}),this[e]}Object.defineProperty(r.prototype,e,{enumerable:!1,get:i});const s=o=>function(...a){return this[e][o](...a)};for(const o of t)Object.defineProperty(r.prototype,o,{enumerable:!1,value:s(o)});return r}}static get isDebugEnabled(){var t;if(typeof((t=globalThis.process)==null?void 0:t.env)!="object")return ns;const{env:e}=globalThis.process??{env:{}};return e.DEBUG==="emittery"||e.DEBUG==="*"||ns}static set isDebugEnabled(e){ns=e}constructor(e={}){wt.set(this,new Set),It.set(this,new Map),ut.set(this,new Map),ut.get(this).set(Kr,new Set),this.debug=e.debug??{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(t,r,i,s)=>{try{s=JSON.stringify(s)}catch{s=`Object with the following keys failed to stringify: ${Object.keys(s).join(",")}`}(typeof i=="symbol"||typeof i=="number")&&(i=i.toString());const o=new Date,a=`${o.getHours()}:${o.getMinutes()}:${o.getSeconds()}.${o.getMilliseconds()}`;console.log(`[${a}][emittery:${t}][${r}] Event Name: ${i}
	data: ${s}`)})}logIfDebugEnabled(e,t,r){(Cs.isDebugEnabled||this.debug.enabled)&&this.debug.logger(e,this.debug.name,t,r)}on(e,t){vr(t),e=Array.isArray(e)?e:[e];for(const r of e){sn(r);let i=on(this,r);i||(i=new Set,It.get(this).set(r,i)),i.add(t),this.logIfDebugEnabled("subscribe",r,void 0),cn(r)||br(this,Zr,{eventName:r,listener:t})}return this.off.bind(this,e,t)}off(e,t){vr(t),e=Array.isArray(e)?e:[e];for(const r of e){sn(r);const i=on(this,r);i&&(i.delete(t),i.size===0&&It.get(this).delete(r)),this.logIfDebugEnabled("unsubscribe",r,void 0),cn(r)||br(this,Yr,{eventName:r,listener:t})}}once(e){let t;const r=new Promise(i=>{t=this.on(e,s=>{t(),i(s)})});return r.off=t,r}events(e){e=Array.isArray(e)?e:[e];for(const t of e)sn(t);return Va(this,e)}async emit(e,t){if(sn(e),cn(e)&&!Xr)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emit",e,t),Wp(this,e,t);const r=on(this,e)??new Set,i=wt.get(this),s=[...r],o=cn(e)?[]:[...i];await qa,await Promise.all([...s.map(async a=>{if(r.has(a))return a(t)}),...o.map(async a=>{if(i.has(a))return a(e,t)})])}async emitSerial(e,t){if(sn(e),cn(e)&&!Xr)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emitSerial",e,t);const r=on(this,e)??new Set,i=wt.get(this),s=[...r],o=[...i];await qa;for(const a of s)r.has(a)&&await a(t);for(const a of o)i.has(a)&&await a(e,t)}onAny(e){return vr(e),this.logIfDebugEnabled("subscribeAny",void 0,void 0),wt.get(this).add(e),br(this,Zr,{listener:e}),this.offAny.bind(this,e)}anyEvent(){return Va(this)}offAny(e){vr(e),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),br(this,Yr,{listener:e}),wt.get(this).delete(e)}clearListeners(e){e=Array.isArray(e)?e:[e];for(const t of e)if(this.logIfDebugEnabled("clear",t,void 0),typeof t=="string"||typeof t=="symbol"||typeof t=="number"){const r=on(this,t);r&&r.clear();const i=Fn(this,t);if(i){for(const s of i)s.finish();i.clear()}}else{wt.get(this).clear();for(const[r,i]of It.get(this).entries())i.clear(),It.get(this).delete(r);for(const[r,i]of ut.get(this).entries()){for(const s of i)s.finish();i.clear(),ut.get(this).delete(r)}}}listenerCount(e){var r,i,s;e=Array.isArray(e)?e:[e];let t=0;for(const o of e){if(typeof o=="string"){t+=wt.get(this).size+(((r=on(this,o))==null?void 0:r.size)??0)+(((i=Fn(this,o))==null?void 0:i.size)??0)+(((s=Fn(this))==null?void 0:s.size)??0);continue}typeof o<"u"&&sn(o),t+=wt.get(this).size;for(const a of It.get(this).values())t+=a.size;for(const a of ut.get(this).values())t+=a.size}return t}bindMethods(e,t){if(typeof e!="object"||e===null)throw new TypeError("`target` must be an object");t=Ja(t);for(const r of t){if(e[r]!==void 0)throw new Error(`The property \`${r}\` already exists on \`target\``);Object.defineProperty(e,r,{enumerable:!1,value:this[r].bind(this)})}}},Ga=Object.getOwnPropertyNames(Ci.prototype).filter(n=>n!=="constructor");Object.defineProperty(Ci,"listenerAdded",{value:Zr,writable:!1,enumerable:!0,configurable:!1});Object.defineProperty(Ci,"listenerRemoved",{value:Yr,writable:!1,enumerable:!0,configurable:!1});var go=class{constructor(){this.messageHandlers={},this._isClient=!1,this.Resource=Sc,this.events=new Ci,this.intentMap=new Map,this._messageListenerHandler=n=>{if(n.origin!==window.location.origin){console.warn(`Dropping Message received from an unknown origin: ${n.origin}`);return}try{const e=n.data,t=this.messageHandlers[e.type];t?t.call(this,e,n.source):console.warn(`No handler found for message type: ${e.type}`)}catch(e){console.error("Error processing the message:",e)}},this._initMessageListener(),this._httpClient=new Hp}unload(){window.removeEventListener("message",this._messageListenerHandler),console.log("Message listener removed.")}_initMessageListener(){window.addEventListener("message",this._messageListenerHandler,!1),console.log("Message listener initialized.")}addMessageHandler(n,e){this.messageHandlers[n]=e}getLocalValue(n,e){let t=n;this._isClient?t="omni/"+this._extensionId+"/"+n:t="omni/host/"+n;let r=globalThis.localStorage.getItem(t);if(r!==null){let i=JSON.parse(r),s=i.value;switch(i.type){case"boolean":s=s==="true";break;case"object":case"number":case"string":break;default:return console.warn("Unsupported value type",i.type,"on",n),null}return s}return null}setLocalValue(n,e){if(n==null||n.length==0)throw new Error("Invalid null Key passed into setLocalValue");let t=n;if(this._isClient?t="omni/"+this._extensionId+"/"+n:t="omni/host/"+n,e==null){globalThis.localStorage.removeItem(t);return}const r=typeof e;switch(r){case"number":case"string":case"object":break;case"boolean":break;default:console.warn("Unsupported value type",r,"on",n);return}globalThis.localStorage.setItem(t,JSON.stringify({type:r,value:e}))}send(n,e){this._isClient?(console.log("Sending message from client:",n),n.token=this.token,n=JSON.parse(JSON.stringify(n)),window.parent.postMessage(n,"*")):console.warn("Attempted to send a message from the host without specifying a target.")}async runServerScript(n,e){return await(await this._httpClient.executeRequest("/api/v1/mercenaries/runscript/"+n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json()}canEditFile(n){return n?this.intentMap.has(`file:edit:${n.mimeType}`):!1}canViewFile(n){return n?this.intentMap.has(`file:show:${n.mimeType}`):!1}async getFileObject(n){try{const t=await(await this._httpClient.executeRequest("/fid/"+n+"?obj=true",{method:"GET",headers:{"Content-Type":"application/json"}})).json();return t?(console.log("getFileObject",t),new Up(t)):(console.warn(`No valid file object found for fid ${n}`),null)}catch(e){return console.error(e),null}}async getFileBlob(n){try{return await(await this._httpClient.executeRequest("/fid/"+n+"?download=true")).blob()}catch(e){return console.error(e),null}}async uploadFiles(n,e="temporary"){if((n==null?void 0:n.length)>0){let t=await Promise.all(Array.from(n).map(async r=>{this.uploadSingleFile(r,e)}));return t=t.filter(r=>r),t}else return[]}async uploadSingleFile(n,e="temporary"){const t=new FormData;t.append("storageType",e),t.append("file",n,n.name||Date.now().toString());try{const r=await fetch("/fid",{method:"POST",body:t});if(r.ok){const i=await r.json();return i.length>0&&i[0].ticket&&i[0].fid?i[0]:(console.warn("Failed to upload file",{data:i,file:n}),null)}else return console.warn("Failed to upload file",{response:r,file:n}),null}catch(r){return console.error("Failed to upload file",{error:r,file:n}),null}}async startRecipe(n,e){const r=await(await fetch("/api/v1/workflow/exec",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({workflow:n,args:e})})).json();if(r.status==="JOB_STARTED")return{...r}}async downloadFile(n,e){const t=n.fid,r=e||n.fileName;fetch("/fid/"+t+"?download=true").then(i=>i.blob()).then(i=>{const s=URL.createObjectURL(i),o=document.createElement("a");o.href=s,o.download=r,document.body.appendChild(o),o.click(),document.body.removeChild(o)}).catch(i=>console.error(i))}};go.Resource=Sc;var qp=class extends go{constructor(n){super(),this._isClient=!0,this._extensionId=n;const e=new URLSearchParams(location.search);this.options=JSON.parse(e.get("o")||"{}"),this.args=JSON.parse(e.get("q")||"{}"),e.has("omniHash")?this.token=e.get("omniHash"):(console.warn("No omniHash found in the query string, this is not a window opened by OmniHost"),this.token=n+new Date().getTime().toString())}get extensionId(){return this._extensionId}init({subscriptions:n}={subscriptions:[]}){console.log("OmniSDKClient initialized for "+this.extensionId+".");const e=window.localStorage.getItem("omni-intentMap");if(e){const t=JSON.parse(e);t&&t.length>0&&(this.intentMap=new Map(t))}return this.addMessageHandler("host_cscript_response",this._handleClientScriptResponse),this.addMessageHandler("host_sync_data",this._handleSyncData),n.includes("custom_extension_event")&&this.addMessageHandler("custom_extension_event",this._handleCustomEvent),n.includes("host_chat_message_received")&&this.addMessageHandler("host_chat_message_received",this._handleChatMessageReceived),this.register(),this}register(){this.token&&this.send({type:"client_registration",token:this.token})}deregister(n){this.send({type:"client_deregistration",token:n})}sendChatMessage(n,e="text/markdown",t,r){const i={type:"client_send_chat",message:{content:n,type:e,attachments:t,flags:r}};this.send(i)}async runClientScript(n,e){const t={type:"client_run_cscript",script:n,args:e,invokeId:this.extensionId+new Date().getTime().toString()};return new Promise((r,i)=>{this.send(t),this.events.once("host_cscript_response:"+t.invokeId).then(s=>{r(s)})})}async _handleCustomEvent(n){if(n.type!=="custom_extension_event")return;const e=n;e.extensionId===this.extensionId&&await this.events.emit("custom_event",{eventId:e.eventId,eventArgs:e.eventArgs})}async _handleSyncData(n){if(n.type!=="host_sync_data")return;const e=n;this.intentMap=new Map(e.frame),await this.events.emit("data_updated",[{property:"intentMap"}])}async _handleChatMessageReceived(n){if(n.type!=="host_chat_message_received")return;const e=n;await this.events.emit("chat_message_received",[e.message])}async _handleClientScriptResponse(n){if(n.type!=="host_cscript_response")return;const e=n;await this.events.emit("host_cscript_response:"+e.invokeId,e.result)}showExtension(n,e,t="",r={},i="open"){const s={type:"client_show_extension",extensionId:n,action:i,args:e,page:t,opts:r};this.send(s)}hide(){const n={type:"client_window_message",action:"hide",args:{}};this.send(n)}show(){const n={type:"client_window_message",action:"show",args:{}};this.send(n)}close(){const n={type:"client_window_message",action:"close",args:{}};this.send(n)}signalIntent(n,e,t,r={}){const i={type:"client_signal_intent",intent:n,target:e,opts:r||{},payload:t};this.send(i)}showToast(n,e){const t={type:"client_show_toast",message:n,options:e};this.send(t)}showTopBanner(n,e,t){const r={type:"client_show_top_banner",bannerTitle:n,bannerDescription:e,options:t};this.send(r)}openRecipeInEditor(n,e){const t={type:"client_load_recipe",recipeId:n,recipeVersion:e};this.send(t)}async runExtensionScript(n,e){e??(e={});const t=await this._httpClient.executeRequest(`/api/v1/mercenaries/runscript/${this.extensionId}:`+n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Server error: HTTP status "+t.status);return await t.json()}},Vp=class extends go{constructor(n){super(),this.registeredFrames={},this._app=n}get app(){return this._app}init(){return console.log("OmniSDKHost initialized."),this.addMessageHandler("client_registration",this._handleRegistration),this.addMessageHandler("client_deregistration",this._handleDeregistration),this.addMessageHandler("client_send_chat",this._handleSendChatMessage),this.addMessageHandler("client_run_cscript",this._handleRunClientScript),this.addMessageHandler("client_signal_intent",this._handleSignalIntent),this.addMessageHandler("client_window_message",this._handleWindowMessage),this.addMessageHandler("client_show_toast",this._handleShowToast),this.addMessageHandler("client_show_extension",this._handleShowExtension),this.addMessageHandler("client_load_recipe",this._handleLoadRecipe),this.addMessageHandler("client_show_top_banner",this._handleShowTopBanner),this}registerFileIntent(n,e,t){const r=`file:${n}:${e}`;console.log(`Registering file intent ${r}, handler: `,t),this.intentMap.has(r)?this.intentMap.get(r).push(t):this.intentMap.set(r,[t]),window.localStorage.setItem("omni-intentMap",JSON.stringify(Array.from(this.intentMap.entries())))}signalFileIntent(n,e,t){var s;const r=(s=e.mimeType)==null?void 0:s.split(";")[0].trim();let i=this.intentMap.get(`file:${n}:${r}`)||[];if(i.length==0&&(i=Array.from(this.intentMap.entries()).map(([o,a])=>{const[l,h,u]=o.split(":");if(l==="file"&&h===n&&u.endsWith("*")&&(r!=null&&r.startsWith(u.substring(0,u.length-1))))return a[0]}).filter(o=>o!==void 0)),i.length>0){console.log(i[0]);const{extensionId:o,page:a,hOpts:l}=i[0];console.log(`Showing ${n} intent for ${r} with extension ${o} and page ${a}`),this.app.workbench.showExtension(o,{file:e},a,Object.assign({},t,l))}else console.warn(`No handler found for intent ${n} and mime type ${e.mimeType}`)}signalCustomEvent(n,e,t){const r={type:"custom_extension_event",extensionId:n,eventId:e,eventArgs:t};this.send(r)}signalChatMessageReceived(n){n.workflowId||(n.workflowId="System");const e={type:"host_chat_message_received",message:n};this.send(e,"*")}deregister(n){n&&this.registeredFrames[n]?(console.log(`Iframe with token ${n} deregistered!`),delete this.registeredFrames[n]):console.warn(`No registered frame with token ${n}`)}async _handleRunClientScript(n){if(n.type!=="client_run_cscript")return;const e=n,t=e.script,r=e.args,i=await this.app.runScript(t,r),s={type:"host_cscript_response",invokeId:e.invokeId,result:i};this.send(s,n.token)}_handleWindowMessage(n){if(n.type!=="client_window_message")return;const e=n,t=e.action;e.args;const r=e.token;t==="close"&&this.app.closeWindow(r)}sendChatMessage(n,e="text/markdown",t,r){const i={type:"client_send_chat",message:{content:n,type:e,attachments:t,flags:r}};this._handleSendChatMessage(i)}_handleSendChatMessage(n){if(n.type!=="client_send_chat")return;const e=n.message;this.app.sendSystemMessage(e.content,e.type,e.attachments,e.flags)}_handleShowExtension(n){if(n.type!=="client_show_extension")return;const e=n,{action:t,args:r,extensionId:i,page:s,opts:o}=e;t==="open"?this.app.workbench.showExtension(i,r,s,o):t==="close"&&alert("hideExtension Not implemented")}_handleRegistration(n,e){if(n.type!=="client_registration")return;const t=n;e&&t.token&&"postMessage"in e&&!this.registeredFrames[t.token]&&(this.registeredFrames[t.token]={contentWindow:e,registeredAt:new Date},console.log(`Iframe with token ${t.token} registered!`),this.send({type:"host_sync_data",packet:"intentMap",frame:Array.from(this.intentMap.entries())},t.token))}_handleShowToast(n){if(n.type!=="client_show_toast")return;const e=n,{message:t,options:r}=e;this.app.showToast(t,r)}_handleSignalIntent(n){var t,r,i;if(n.type!=="client_signal_intent")return;const e=n;if((t=e.payload)!=null&&t.fid||(i=(r=e.payload)==null?void 0:r.ticket)!=null&&i.fid){this.signalFileIntent(e.intent,e.payload,e.opts);return}e.intent==="show"||e.intent==="edit"?this.app.workbench.showExtension(e.target,e.payload,void 0,e.opts):e.intent==="hide"?this.app.workbench.hideExtension(e.target):console.warn(`Invalid intent ${e.intent}`,e)}_handleDeregistration(n){if(n.type!=="client_deregistration")return;const e=n;e.token&&this.registeredFrames[e.token]&&this.deregister(e.token)}_handleLoadRecipe(n){if(n.type!=="client_load_recipe")return;const e=n;this.app.workbench.loadRecipe(e.recipeId,e.recipeVersion)}_handleShowTopBanner(n){if(n.type!=="client_show_top_banner")return;const e=n,{bannerTitle:t,bannerDescription:r,options:i}=e;this.app.showTopBanner(t,r,i)}send(n,e="*"){if(n.token=e,n=JSON.parse(JSON.stringify(n)),e==="*")for(const t of Object.values(this.registeredFrames))t.contentWindow.postMessage(n,"*");else{const t=this.registeredFrames[e];t?t.contentWindow.postMessage(n,"*"):console.warn(`No registered frame with token ${e}`)}}},rs=lp(zp(),1);function mo(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var qt=mo();function Cc(n){qt=n}var Ac=/[&<>"']/,Jp=new RegExp(Ac.source,"g"),Oc=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Gp=new RegExp(Oc.source,"g"),Kp={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ka=n=>Kp[n];function Me(n,e){if(e){if(Ac.test(n))return n.replace(Jp,Ka)}else if(Oc.test(n))return n.replace(Gp,Ka);return n}var Zp=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Yp(n){return n.replace(Zp,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}var Xp=/(^|[^\[])\^/g;function ee(n,e){n=typeof n=="string"?n:n.source,e=e||"";const t={replace:(r,i)=>(i=typeof i=="object"&&"source"in i?i.source:i,i=i.replace(Xp,"$1"),n=n.replace(r,i),t),getRegex:()=>new RegExp(n,e)};return t}function Za(n){try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}var Qr={exec:()=>null};function Ya(n,e){const t=n.replace(/\|/g,(s,o,a)=>{let l=!1,h=o;for(;--h>=0&&a[h]==="\\";)l=!l;return l?"|":" |"}),r=t.split(/ \|/);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function _r(n,e,t){const r=n.length;if(r===0)return"";let i=0;for(;i<r;){const s=n.charAt(r-i-1);if(s===e&&!t)i++;else if(s!==e&&t)i++;else break}return n.slice(0,r-i)}function Qp(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let r=0;r<n.length;r++)if(n[r]==="\\")r++;else if(n[r]===e[0])t++;else if(n[r]===e[1]&&(t--,t<0))return r;return-1}function Xa(n,e,t,r){const i=e.href,s=e.title?Me(e.title):null,o=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){r.state.inLink=!0;const a={type:"link",raw:t,href:i,title:s,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,a}return{type:"image",raw:t,href:i,title:s,text:Me(o)}}function eg(n,e){const t=n.match(/^(\s+)(?:```)/);if(t===null)return e;const r=t[1];return e.split(`
`).map(i=>{const s=i.match(/^\s+/);if(s===null)return i;const[o]=s;return o.length>=r.length?i.slice(r.length):i}).join(`
`)}var ei=class{constructor(e){ce(this,"options"),ce(this,"rules"),ce(this,"lexer"),this.options=e||qt}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:_r(r,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const r=t[0],i=eg(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(/#$/.test(r)){const i=_r(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const r=_r(t[0].replace(/^ *>[ \t]?/gm,""),`
`),i=this.lexer.state.top;this.lexer.state.top=!0;const s=this.lexer.blockTokens(r);return this.lexer.state.top=i,{type:"blockquote",raw:t[0],tokens:s,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim();const i=r.length>1,s={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");const o=new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`);let a="",l="",h=!1;for(;e;){let u=!1;if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;a=t[0],e=e.substring(a.length);let d=t[2].split(`
`,1)[0].replace(/^\t+/,y=>" ".repeat(3*y.length)),f=e.split(`
`,1)[0],p=0;this.options.pedantic?(p=2,l=d.trimStart()):(p=t[2].search(/[^ ]/),p=p>4?1:p,l=d.slice(p),p+=t[1].length);let c=!1;if(!d&&/^ *$/.test(f)&&(a+=f+`
`,e=e.substring(f.length+1),u=!0),!u){const y=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),w=new RegExp(`^ {0,${Math.min(3,p-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),_=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:\`\`\`|~~~)`),b=new RegExp(`^ {0,${Math.min(3,p-1)}}#`);for(;e;){const v=e.split(`
`,1)[0];if(f=v,this.options.pedantic&&(f=f.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),_.test(f)||b.test(f)||y.test(f)||w.test(e))break;if(f.search(/[^ ]/)>=p||!f.trim())l+=`
`+f.slice(p);else{if(c||d.search(/[^ ]/)>=4||_.test(d)||b.test(d)||w.test(d))break;l+=`
`+f}!c&&!f.trim()&&(c=!0),a+=v+`
`,e=e.substring(v.length+1),d=f.slice(p)}}s.loose||(h?s.loose=!0:/\n *\n *$/.test(a)&&(h=!0));let g=null,m;this.options.gfm&&(g=/^\[[ xX]\] /.exec(l),g&&(m=g[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:a,task:!!g,checked:m,loose:!1,text:l,tokens:[]}),s.raw+=a}s.items[s.items.length-1].raw=a.trimEnd(),s.items[s.items.length-1].text=l.trimEnd(),s.raw=s.raw.trimEnd();for(let u=0;u<s.items.length;u++)if(this.lexer.state.top=!1,s.items[u].tokens=this.lexer.blockTokens(s.items[u].text,[]),!s.loose){const d=s.items[u].tokens.filter(p=>p.type==="space"),f=d.length>0&&d.some(p=>/\n.*\n/.test(p.raw));s.loose=f}if(s.loose)for(let u=0;u<s.items.length;u++)s.items[u].loose=!0;return s}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const r=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline._escapes,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:i,title:s}}}table(e){const t=this.rules.block.table.exec(e);if(t){if(!/[:|]/.test(t[2]))return;const r={type:"table",raw:t[0],header:Ya(t[1]).map(i=>({text:i,tokens:[]})),align:t[2].replace(/^\||\| *$/g,"").split("|"),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(r.header.length===r.align.length){let i=r.align.length,s,o,a,l;for(s=0;s<i;s++){const h=r.align[s];h&&(/^ *-+: *$/.test(h)?r.align[s]="right":/^ *:-+: *$/.test(h)?r.align[s]="center":/^ *:-+ *$/.test(h)?r.align[s]="left":r.align[s]=null)}for(i=r.rows.length,s=0;s<i;s++)r.rows[s]=Ya(r.rows[s],r.header.length).map(h=>({text:h,tokens:[]}));for(i=r.header.length,o=0;o<i;o++)r.header[o].tokens=this.lexer.inline(r.header[o].text);for(i=r.rows.length,o=0;o<i;o++)for(l=r.rows[o],a=0;a<l.length;a++)l[a].tokens=this.lexer.inline(l[a].text);return r}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Me(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const o=_r(r.slice(0,-1),"\\");if((r.length-o.length)%2===0)return}else{const o=Qp(t[2],"()");if(o>-1){const l=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,l).trim(),t[3]=""}}let i=t[2],s="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);o&&(i=o[1],s=o[3])}else s=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(r)?i=i.slice(1):i=i.slice(1,-1)),Xa(t,{href:i&&i.replace(this.rules.inline._escapes,"$1"),title:s&&s.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let i=(r[2]||r[1]).replace(/\s+/g," ");if(i=t[i.toLowerCase()],!i){const s=r[0].charAt(0);return{type:"text",raw:s,text:s}}return Xa(r,i,r[0],this.lexer)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrong.lDelim.exec(e);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const o=[...i[0]].length-1;let a,l,h=o,u=0;const d=i[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(d.lastIndex=0,t=t.slice(-1*e.length+o);(i=d.exec(t))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(l=[...a].length,i[3]||i[4]){h+=l;continue}else if((i[5]||i[6])&&o%3&&!((o+l)%3)){u+=l;continue}if(h-=l,h>0)continue;l=Math.min(l,l+h+u);const f=[...i[0]][0].length,p=e.slice(0,o+i.index+f+l);if(Math.min(o,l)%2){const g=p.slice(1,-1);return{type:"em",raw:p,text:g,tokens:this.lexer.inlineTokens(g)}}const c=p.slice(2,-2);return{type:"strong",raw:p,text:c,tokens:this.lexer.inlineTokens(c)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(/\n/g," ");const i=/[^ ]/.test(r),s=/^ /.test(r)&&/ $/.test(r);return i&&s&&(r=r.substring(1,r.length-1)),r=Me(r,!0),{type:"codespan",raw:t[0],text:r}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let r,i;return t[2]==="@"?(r=Me(t[1]),i="mailto:"+r):(r=Me(t[1]),i=r),{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let r,i;if(t[2]==="@")r=Me(t[0]),i="mailto:"+r;else{let s;do s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])[0];while(s!==t[0]);r=Me(t[0]),t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let r;return this.lexer.state.inRawBlock?r=t[0]:r=Me(t[0]),{type:"text",raw:t[0],text:r}}}},z={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Qr,lheading:/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};z._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;z._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;z.def=ee(z.def).replace("label",z._label).replace("title",z._title).getRegex();z.bullet=/(?:[*+-]|\d{1,9}[.)])/;z.listItemStart=ee(/^( *)(bull) */).replace("bull",z.bullet).getRegex();z.list=ee(z.list).replace(/bull/g,z.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+z.def.source+")").getRegex();z._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";z._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;z.html=ee(z.html,"i").replace("comment",z._comment).replace("tag",z._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();z.lheading=ee(z.lheading).replace(/bull/g,z.bullet).getRegex();z.paragraph=ee(z._paragraph).replace("hr",z.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",z._tag).getRegex();z.blockquote=ee(z.blockquote).replace("paragraph",z.paragraph).getRegex();z.normal={...z};z.gfm={...z.normal,table:"^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"};z.gfm.table=ee(z.gfm.table).replace("hr",z.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",z._tag).getRegex();z.gfm.paragraph=ee(z._paragraph).replace("hr",z.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",z.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",z._tag).getRegex();z.pedantic={...z.normal,html:ee(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",z._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Qr,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ee(z.normal._paragraph).replace("hr",z.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",z.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};var M={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Qr,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Qr,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/};M._punctuation="\\p{P}$+<=>`^|~";M.punctuation=ee(M.punctuation,"u").replace(/punctuation/g,M._punctuation).getRegex();M.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g;M.anyPunctuation=/\\[punct]/g;M._escapes=/\\([punct])/g;M._comment=ee(z._comment).replace("(?:-->|$)","-->").getRegex();M.emStrong.lDelim=ee(M.emStrong.lDelim,"u").replace(/punct/g,M._punctuation).getRegex();M.emStrong.rDelimAst=ee(M.emStrong.rDelimAst,"gu").replace(/punct/g,M._punctuation).getRegex();M.emStrong.rDelimUnd=ee(M.emStrong.rDelimUnd,"gu").replace(/punct/g,M._punctuation).getRegex();M.anyPunctuation=ee(M.anyPunctuation,"gu").replace(/punct/g,M._punctuation).getRegex();M._escapes=ee(M._escapes,"gu").replace(/punct/g,M._punctuation).getRegex();M._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;M._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;M.autolink=ee(M.autolink).replace("scheme",M._scheme).replace("email",M._email).getRegex();M._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;M.tag=ee(M.tag).replace("comment",M._comment).replace("attribute",M._attribute).getRegex();M._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;M._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;M._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;M.link=ee(M.link).replace("label",M._label).replace("href",M._href).replace("title",M._title).getRegex();M.reflink=ee(M.reflink).replace("label",M._label).replace("ref",z._label).getRegex();M.nolink=ee(M.nolink).replace("ref",z._label).getRegex();M.reflinkSearch=ee(M.reflinkSearch,"g").replace("reflink",M.reflink).replace("nolink",M.nolink).getRegex();M.normal={...M};M.pedantic={...M.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:ee(/^!?\[(label)\]\((.*?)\)/).replace("label",M._label).getRegex(),reflink:ee(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",M._label).getRegex()};M.gfm={...M.normal,escape:ee(M.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/};M.gfm.url=ee(M.gfm.url,"i").replace("email",M.gfm._extended_email).getRegex();M.breaks={...M.gfm,br:ee(M.br).replace("{2,}","*").getRegex(),text:ee(M.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};var Mt=class As{constructor(e){ce(this,"tokens"),ce(this,"options"),ce(this,"state"),ce(this,"tokenizer"),ce(this,"inlineQueue"),this.tokens=[],this.tokens.links=Object.create(null),this.options=e||qt,this.options.tokenizer=this.options.tokenizer||new ei,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:z.normal,inline:M.normal};this.options.pedantic?(t.block=z.pedantic,t.inline=M.pedantic):this.options.gfm&&(t.block=z.gfm,this.options.breaks?t.inline=M.breaks:t.inline=M.gfm),this.tokenizer.rules=t}static get rules(){return{block:z,inline:M}}static lex(e,t){return new As(t).lex(e)}static lexInline(e,t){return new As(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);let t;for(;t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(a,l,h)=>l+"    ".repeat(h.length));let r,i,s,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(r=a.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),r.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=e.slice(1);let h;this.options.extensions.startBlock.forEach(u=>{h=u.call({lexer:this},l),typeof h=="number"&&h>=0&&(a=Math.min(a,h))}),a<1/0&&a>=0&&(s=e.substring(0,a+1))}if(this.state.top&&(r=this.tokenizer.paragraph(s))){i=t[t.length-1],o&&i.type==="paragraph"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r),o=s.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&i.type==="text"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r,i,s,o=e,a,l,h;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(l||(h=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(r=u.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.emStrong(e,o,h)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.autolink(e)){e=e.substring(r.raw.length),t.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e))){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const d=e.slice(1);let f;this.options.extensions.startInline.forEach(p=>{f=p.call({lexer:this},d),typeof f=="number"&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(s=e.substring(0,u+1))}if(r=this.tokenizer.inlineText(s)){e=e.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(h=r.raw.slice(-1)),l=!0,i=t[t.length-1],i&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return t}},ti=class{constructor(e){ce(this,"options"),this.options=e||qt}code(e,t,r){var s;const i=(s=(t||"").match(/^\S*/))==null?void 0:s[0];return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="language-'+Me(i)+'">'+(r?e:Me(e,!0))+`</code></pre>
`:"<pre><code>"+(r?e:Me(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,t){return e}heading(e,t,r){return`<h${t}>${e}</h${t}>
`}hr(){return`<hr>
`}list(e,t,r){const i=t?"ol":"ul",s=t&&r!==1?' start="'+r+'"':"";return"<"+i+s+`>
`+e+"</"+i+`>
`}listitem(e,t,r){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>
`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,t){const r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+e+`</${r}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,r){const i=Za(e);if(i===null)return r;e=i;let s='<a href="'+e+'"';return t&&(s+=' title="'+t+'"'),s+=">"+r+"</a>",s}image(e,t,r){const i=Za(e);if(i===null)return r;e=i;let s=`<img src="${e}" alt="${r}"`;return t&&(s+=` title="${t}"`),s+=">",s}text(e){return e}},yo=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,r){return""+r}image(e,t,r){return""+r}br(){return""}},Nt=class Os{constructor(e){ce(this,"options"),ce(this,"renderer"),ce(this,"textRenderer"),this.options=e||qt,this.options.renderer=this.options.renderer||new ti,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new yo}static parse(e,t){return new Os(t).parse(e)}static parseInline(e,t){return new Os(t).parseInline(e)}parse(e,t=!0){let r="";for(let i=0;i<e.length;i++){const s=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const o=s,a=this.options.extensions.renderers[o.type].call({parser:this},o);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){r+=a||"";continue}}switch(s.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{const o=s;r+=this.renderer.heading(this.parseInline(o.tokens),o.depth,Yp(this.parseInline(o.tokens,this.textRenderer)));continue}case"code":{const o=s;r+=this.renderer.code(o.text,o.lang,!!o.escaped);continue}case"table":{const o=s;let a="",l="";for(let u=0;u<o.header.length;u++)l+=this.renderer.tablecell(this.parseInline(o.header[u].tokens),{header:!0,align:o.align[u]});a+=this.renderer.tablerow(l);let h="";for(let u=0;u<o.rows.length;u++){const d=o.rows[u];l="";for(let f=0;f<d.length;f++)l+=this.renderer.tablecell(this.parseInline(d[f].tokens),{header:!1,align:o.align[f]});h+=this.renderer.tablerow(l)}r+=this.renderer.table(a,h);continue}case"blockquote":{const o=s,a=this.parse(o.tokens);r+=this.renderer.blockquote(a);continue}case"list":{const o=s,a=o.ordered,l=o.start,h=o.loose;let u="";for(let d=0;d<o.items.length;d++){const f=o.items[d],p=f.checked,c=f.task;let g="";if(f.task){const m=this.renderer.checkbox(!!p);h?f.tokens.length>0&&f.tokens[0].type==="paragraph"?(f.tokens[0].text=m+" "+f.tokens[0].text,f.tokens[0].tokens&&f.tokens[0].tokens.length>0&&f.tokens[0].tokens[0].type==="text"&&(f.tokens[0].tokens[0].text=m+" "+f.tokens[0].tokens[0].text)):f.tokens.unshift({type:"text",text:m+" "}):g+=m+" "}g+=this.parse(f.tokens,h),u+=this.renderer.listitem(g,c,!!p)}r+=this.renderer.list(u,a,l);continue}case"html":{const o=s;r+=this.renderer.html(o.text,o.block);continue}case"paragraph":{const o=s;r+=this.renderer.paragraph(this.parseInline(o.tokens));continue}case"text":{let o=s,a=o.tokens?this.parseInline(o.tokens):o.text;for(;i+1<e.length&&e[i+1].type==="text";)o=e[++i],a+=`
`+(o.tokens?this.parseInline(o.tokens):o.text);r+=t?this.renderer.paragraph(a):a;continue}default:{const o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return r}parseInline(e,t){t=t||this.renderer;let r="";for(let i=0;i<e.length;i++){const s=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const o=this.options.extensions.renderers[s.type].call({parser:this},s);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){r+=o||"";continue}}switch(s.type){case"escape":{const o=s;r+=t.text(o.text);break}case"html":{const o=s;r+=t.html(o.text);break}case"link":{const o=s;r+=t.link(o.href,o.title,this.parseInline(o.tokens,t));break}case"image":{const o=s;r+=t.image(o.href,o.title,o.text);break}case"strong":{const o=s;r+=t.strong(this.parseInline(o.tokens,t));break}case"em":{const o=s;r+=t.em(this.parseInline(o.tokens,t));break}case"codespan":{const o=s;r+=t.codespan(o.text);break}case"br":{r+=t.br();break}case"del":{const o=s;r+=t.del(this.parseInline(o.tokens,t));break}case"text":{const o=s;r+=t.text(o.text);break}default:{const o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return r}},zn=class{constructor(e){ce(this,"options"),this.options=e||qt}preprocess(e){return e}postprocess(e){return e}};ce(zn,"passThroughHooks",new Set(["preprocess","postprocess"]));var $r,Ts,wo,Tc,tg=class{constructor(...e){Wa(this,$r),Wa(this,wo),ce(this,"defaults",mo()),ce(this,"options",this.setOptions),ce(this,"parse",Es(this,$r,Ts).call(this,Mt.lex,Nt.parse)),ce(this,"parseInline",Es(this,$r,Ts).call(this,Mt.lexInline,Nt.parseInline)),ce(this,"Parser",Nt),ce(this,"Renderer",ti),ce(this,"TextRenderer",yo),ce(this,"Lexer",Mt),ce(this,"Tokenizer",ei),ce(this,"Hooks",zn),this.use(...e)}walkTokens(e,t){var i,s;let r=[];for(const o of e)switch(r=r.concat(t.call(this,o)),o.type){case"table":{const a=o;for(const l of a.header)r=r.concat(this.walkTokens(l.tokens,t));for(const l of a.rows)for(const h of l)r=r.concat(this.walkTokens(h.tokens,t));break}case"list":{const a=o;r=r.concat(this.walkTokens(a.items,t));break}default:{const a=o;(s=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&s[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{r=r.concat(this.walkTokens(a[l],t))}):a.tokens&&(r=r.concat(this.walkTokens(a.tokens,t)))}}return r}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{const i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const o=t.renderers[s.name];o?t.renderers[s.name]=function(...a){let l=s.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:t.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=t[s.level];o?o.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),i.extensions=t),r.renderer){const s=this.defaults.renderer||new ti(this.defaults);for(const o in r.renderer){const a=r.renderer[o],l=o,h=s[l];s[l]=(...u)=>{let d=a.apply(s,u);return d===!1&&(d=h.apply(s,u)),d||""}}i.renderer=s}if(r.tokenizer){const s=this.defaults.tokenizer||new ei(this.defaults);for(const o in r.tokenizer){const a=r.tokenizer[o],l=o,h=s[l];s[l]=(...u)=>{let d=a.apply(s,u);return d===!1&&(d=h.apply(s,u)),d}}i.tokenizer=s}if(r.hooks){const s=this.defaults.hooks||new zn;for(const o in r.hooks){const a=r.hooks[o],l=o,h=s[l];zn.passThroughHooks.has(o)?s[l]=u=>{if(this.defaults.async)return Promise.resolve(a.call(s,u)).then(f=>h.call(s,f));const d=a.call(s,u);return h.call(s,d)}:s[l]=(...u)=>{let d=a.apply(s,u);return d===!1&&(d=h.apply(s,u)),d}}i.hooks=s}if(r.walkTokens){const s=this.defaults.walkTokens,o=r.walkTokens;i.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),s&&(l=l.concat(s.call(this,a))),l}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Mt.lex(e,t??this.defaults)}parser(e,t){return Nt.parse(e,t??this.defaults)}};$r=new WeakSet;Ts=function(n,e){return(t,r)=>{const i={...r},s={...this.defaults,...i};this.defaults.async===!0&&i.async===!1&&(s.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),s.async=!0);const o=Es(this,wo,Tc).call(this,!!s.silent,!!s.async);if(typeof t>"u"||t===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(s.hooks&&(s.hooks.options=s),s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(t):t).then(a=>n(a,s)).then(a=>s.walkTokens?Promise.all(this.walkTokens(a,s.walkTokens)).then(()=>a):a).then(a=>e(a,s)).then(a=>s.hooks?s.hooks.postprocess(a):a).catch(o);try{s.hooks&&(t=s.hooks.preprocess(t));const a=n(t,s);s.walkTokens&&this.walkTokens(a,s.walkTokens);let l=e(a,s);return s.hooks&&(l=s.hooks.postprocess(l)),l}catch(a){return o(a)}}};wo=new WeakSet;Tc=function(n,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,n){const r="<p>An error occurred:</p><pre>"+Me(t.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(t);throw t}};var Ht=new tg;function X(n,e){return Ht.parse(n,e)}X.options=X.setOptions=function(n){return Ht.setOptions(n),X.defaults=Ht.defaults,Cc(X.defaults),X};X.getDefaults=mo;X.defaults=qt;X.use=function(...n){return Ht.use(...n),X.defaults=Ht.defaults,Cc(X.defaults),X};X.walkTokens=function(n,e){return Ht.walkTokens(n,e)};X.parseInline=Ht.parseInline;X.Parser=Nt;X.parser=Nt.parse;X.Renderer=ti;X.TextRenderer=yo;X.Lexer=Mt;X.lexer=Mt.lex;X.Tokenizer=ei;X.Hooks=zn;X.parse=X;X.options;X.setOptions;X.use;X.walkTokens;X.parseInline;Nt.parse;Mt.lex;var Rc=new X.Renderer;Rc.link=function(n,e,t){return X.Renderer.prototype.link.apply(this,arguments).replace("<a","<a target='_blank'")};var ng=class{constructor(){this.SafeString=rs.default.SafeString,this.asyncResolvers={},this.handlebars=rs.default.create()}registerAsyncResolver(n,e){this.asyncResolvers[n]=e}registerToken(n,e){this.handlebars.registerHelper(n,e)}async getAsyncDataForDirective(n,e){const t=await this.asyncResolvers[n];if(!t)throw new Error(`No resolver registered for directive: ${n}`);return await t(e)}extractDirectiveData(n){var e,t,r;if(n.type==="MustacheStatement"||n.type==="BlockStatement"){const i=(e=n.path)==null?void 0:e.original,s=(r=(t=n.params)==null?void 0:t[0])==null?void 0:r.original;return{name:i,param:s}}return{}}async preprocessData(n,e){let t={};for(const[r,i]of e.entries()){const s=rs.default.parse(i),o=this.extractDirectiveData(s.body[0]),a=o==null?void 0:o.name,l=o==null?void 0:o.param;a&&l&&(n=n.replace(r,i))}return{content:n,data:t}}extractTokens(n){const e=/{{\s*([a-zA-Z0-9_-]+)\s*([^}]*)\s*}}/g,t=new Map;let r=0;return{modifiedContent:n.replace(e,s=>{const o=`TOKEN_${++r}`;return t.set(o,s),o}),tokens:t}}injectTokens(n,e){let t=n;return e.forEach((r,i)=>{t=t.replace(i,r)}),t}async render(n,e={}){let{modifiedContent:t,tokens:r}=this.extractTokens(n);const i=X.parse(t,{renderer:Rc});let{content:s,data:o}=await this.preprocessData(i,r);return s=this.injectTokens(s,r),this.handlebars.compile(s)(Object.assign({},o,e))}};/*! @license DOMPurify 3.0.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.6/LICENSE */const{entries:Ic,setPrototypeOf:Qa,isFrozen:rg,getPrototypeOf:ig,getOwnPropertyDescriptor:Pc}=Object;let{freeze:xe,seal:Je,create:Lc}=Object,{apply:Rs,construct:Is}=typeof Reflect<"u"&&Reflect;xe||(xe=function(e){return e});Je||(Je=function(e){return e});Rs||(Rs=function(e,t,r){return e.apply(t,r)});Is||(Is=function(e,t){return new e(...t)});const kr=je(Array.prototype.forEach),el=je(Array.prototype.pop),Rn=je(Array.prototype.push),Br=je(String.prototype.toLowerCase),is=je(String.prototype.toString),sg=je(String.prototype.match),In=je(String.prototype.replace),og=je(String.prototype.indexOf),ag=je(String.prototype.trim),Le=je(RegExp.prototype.test),Pn=lg(TypeError);function je(n){return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return Rs(n,e,r)}}function lg(n){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Is(n,t)}}function V(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Br;Qa&&Qa(n,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const s=t(i);s!==i&&(rg(e)||(e[r]=s),i=s)}n[i]=!0}return n}function an(n){const e=Lc(null);for(const[t,r]of Ic(n))Pc(n,t)!==void 0&&(e[t]=r);return e}function xr(n,e){for(;n!==null;){const r=Pc(n,e);if(r){if(r.get)return je(r.get);if(typeof r.value=="function")return je(r.value)}n=ig(n)}function t(r){return console.warn("fallback value for",r),null}return t}const tl=xe(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ss=xe(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),os=xe(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),cg=xe(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),as=xe(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ug=xe(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),nl=xe(["#text"]),rl=xe(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),ls=xe(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),il=xe(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Sr=xe(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),hg=Je(/\{\{[\w\W]*|[\w\W]*\}\}/gm),fg=Je(/<%[\w\W]*|[\w\W]*%>/gm),dg=Je(/\${[\w\W]*}/gm),pg=Je(/^data-[\-\w.\u00B7-\uFFFF]/),gg=Je(/^aria-[\-\w]+$/),Mc=Je(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),mg=Je(/^(?:\w+script|data):/i),yg=Je(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Nc=Je(/^html$/i);var sl=Object.freeze({__proto__:null,MUSTACHE_EXPR:hg,ERB_EXPR:fg,TMPLIT_EXPR:dg,DATA_ATTR:pg,ARIA_ATTR:gg,IS_ALLOWED_URI:Mc,IS_SCRIPT_OR_DATA:mg,ATTR_WHITESPACE:yg,DOCTYPE_NAME:Nc});const wg=function(){return typeof window>"u"?null:window},vg=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(r=t.getAttribute(i));const s="dompurify"+(r?"#"+r:"");try{return e.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}};function Dc(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:wg();const e=B=>Dc(B);if(e.version="3.0.6",e.removed=[],!n||!n.document||n.document.nodeType!==9)return e.isSupported=!1,e;let{document:t}=n;const r=t,i=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:h,NamedNodeMap:u=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:d,DOMParser:f,trustedTypes:p}=n,c=l.prototype,g=xr(c,"cloneNode"),m=xr(c,"nextSibling"),y=xr(c,"childNodes"),w=xr(c,"parentNode");if(typeof o=="function"){const B=t.createElement("template");B.content&&B.content.ownerDocument&&(t=B.content.ownerDocument)}let _,b="";const{implementation:v,createNodeIterator:E,createDocumentFragment:k,getElementsByTagName:D}=t,{importNode:L}=r;let C={};e.isSupported=typeof Ic=="function"&&typeof w=="function"&&v&&v.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:S,ERB_EXPR:A,TMPLIT_EXPR:O,DATA_ATTR:R,ARIA_ATTR:H,IS_SCRIPT_OR_DATA:J,ATTR_WHITESPACE:Z}=sl;let{IS_ALLOWED_URI:ue}=sl,U=null;const de=V({},[...tl,...ss,...os,...as,...nl]);let Y=null;const gt=V({},[...rl,...ls,...il,...Sr]);let re=Object.seal(Lc(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),$e=null,Be=null,kn=!0,Gt=!0,xn=!1,Sn=!0,Ye=!1,Ue=!1,Kt=!1,Bi=!1,Zt=!1,cr=!1,ur=!1,Xo=!0,Qo=!1;const yh="user-content-";let Fi=!0,En=!1,Yt={},Xt=null;const ea=V({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ta=null;const na=V({},["audio","video","img","source","image","track"]);let zi=null;const ra=V({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),hr="http://www.w3.org/1998/Math/MathML",fr="http://www.w3.org/2000/svg",st="http://www.w3.org/1999/xhtml";let Qt=st,ji=!1,Ui=null;const wh=V({},[hr,fr,st],is);let At=null;const vh=["application/xhtml+xml","text/html"],bh="text/html";let ge=null,en=null;const _h=t.createElement("form"),ia=function(x){return x instanceof RegExp||x instanceof Function},Hi=function(){let x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(en&&en===x)){if((!x||typeof x!="object")&&(x={}),x=an(x),At=vh.indexOf(x.PARSER_MEDIA_TYPE)===-1?At=bh:At=x.PARSER_MEDIA_TYPE,ge=At==="application/xhtml+xml"?is:Br,U="ALLOWED_TAGS"in x?V({},x.ALLOWED_TAGS,ge):de,Y="ALLOWED_ATTR"in x?V({},x.ALLOWED_ATTR,ge):gt,Ui="ALLOWED_NAMESPACES"in x?V({},x.ALLOWED_NAMESPACES,is):wh,zi="ADD_URI_SAFE_ATTR"in x?V(an(ra),x.ADD_URI_SAFE_ATTR,ge):ra,ta="ADD_DATA_URI_TAGS"in x?V(an(na),x.ADD_DATA_URI_TAGS,ge):na,Xt="FORBID_CONTENTS"in x?V({},x.FORBID_CONTENTS,ge):ea,$e="FORBID_TAGS"in x?V({},x.FORBID_TAGS,ge):{},Be="FORBID_ATTR"in x?V({},x.FORBID_ATTR,ge):{},Yt="USE_PROFILES"in x?x.USE_PROFILES:!1,kn=x.ALLOW_ARIA_ATTR!==!1,Gt=x.ALLOW_DATA_ATTR!==!1,xn=x.ALLOW_UNKNOWN_PROTOCOLS||!1,Sn=x.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ye=x.SAFE_FOR_TEMPLATES||!1,Ue=x.WHOLE_DOCUMENT||!1,Zt=x.RETURN_DOM||!1,cr=x.RETURN_DOM_FRAGMENT||!1,ur=x.RETURN_TRUSTED_TYPE||!1,Bi=x.FORCE_BODY||!1,Xo=x.SANITIZE_DOM!==!1,Qo=x.SANITIZE_NAMED_PROPS||!1,Fi=x.KEEP_CONTENT!==!1,En=x.IN_PLACE||!1,ue=x.ALLOWED_URI_REGEXP||Mc,Qt=x.NAMESPACE||st,re=x.CUSTOM_ELEMENT_HANDLING||{},x.CUSTOM_ELEMENT_HANDLING&&ia(x.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(re.tagNameCheck=x.CUSTOM_ELEMENT_HANDLING.tagNameCheck),x.CUSTOM_ELEMENT_HANDLING&&ia(x.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(re.attributeNameCheck=x.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),x.CUSTOM_ELEMENT_HANDLING&&typeof x.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(re.allowCustomizedBuiltInElements=x.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ye&&(Gt=!1),cr&&(Zt=!0),Yt&&(U=V({},[...nl]),Y=[],Yt.html===!0&&(V(U,tl),V(Y,rl)),Yt.svg===!0&&(V(U,ss),V(Y,ls),V(Y,Sr)),Yt.svgFilters===!0&&(V(U,os),V(Y,ls),V(Y,Sr)),Yt.mathMl===!0&&(V(U,as),V(Y,il),V(Y,Sr))),x.ADD_TAGS&&(U===de&&(U=an(U)),V(U,x.ADD_TAGS,ge)),x.ADD_ATTR&&(Y===gt&&(Y=an(Y)),V(Y,x.ADD_ATTR,ge)),x.ADD_URI_SAFE_ATTR&&V(zi,x.ADD_URI_SAFE_ATTR,ge),x.FORBID_CONTENTS&&(Xt===ea&&(Xt=an(Xt)),V(Xt,x.FORBID_CONTENTS,ge)),Fi&&(U["#text"]=!0),Ue&&V(U,["html","head","body"]),U.table&&(V(U,["tbody"]),delete $e.tbody),x.TRUSTED_TYPES_POLICY){if(typeof x.TRUSTED_TYPES_POLICY.createHTML!="function")throw Pn('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof x.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Pn('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');_=x.TRUSTED_TYPES_POLICY,b=_.createHTML("")}else _===void 0&&(_=vg(p,i)),_!==null&&typeof b=="string"&&(b=_.createHTML(""));xe&&xe(x),en=x}},sa=V({},["mi","mo","mn","ms","mtext"]),oa=V({},["foreignobject","desc","title","annotation-xml"]),kh=V({},["title","style","font","a","script"]),dr=V({},ss);V(dr,os),V(dr,cg);const Wi=V({},as);V(Wi,ug);const xh=function(x){let I=w(x);(!I||!I.tagName)&&(I={namespaceURI:Qt,tagName:"template"});const $=Br(x.tagName),oe=Br(I.tagName);return Ui[x.namespaceURI]?x.namespaceURI===fr?I.namespaceURI===st?$==="svg":I.namespaceURI===hr?$==="svg"&&(oe==="annotation-xml"||sa[oe]):!!dr[$]:x.namespaceURI===hr?I.namespaceURI===st?$==="math":I.namespaceURI===fr?$==="math"&&oa[oe]:!!Wi[$]:x.namespaceURI===st?I.namespaceURI===fr&&!oa[oe]||I.namespaceURI===hr&&!sa[oe]?!1:!Wi[$]&&(kh[$]||!dr[$]):!!(At==="application/xhtml+xml"&&Ui[x.namespaceURI]):!1},Ot=function(x){Rn(e.removed,{element:x});try{x.parentNode.removeChild(x)}catch{x.remove()}},qi=function(x,I){try{Rn(e.removed,{attribute:I.getAttributeNode(x),from:I})}catch{Rn(e.removed,{attribute:null,from:I})}if(I.removeAttribute(x),x==="is"&&!Y[x])if(Zt||cr)try{Ot(I)}catch{}else try{I.setAttribute(x,"")}catch{}},aa=function(x){let I=null,$=null;if(Bi)x="<remove></remove>"+x;else{const be=sg(x,/^[\r\n\t ]+/);$=be&&be[0]}At==="application/xhtml+xml"&&Qt===st&&(x='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+x+"</body></html>");const oe=_?_.createHTML(x):x;if(Qt===st)try{I=new f().parseFromString(oe,At)}catch{}if(!I||!I.documentElement){I=v.createDocument(Qt,"template",null);try{I.documentElement.innerHTML=ji?b:oe}catch{}}const ve=I.body||I.documentElement;return x&&$&&ve.insertBefore(t.createTextNode($),ve.childNodes[0]||null),Qt===st?D.call(I,Ue?"html":"body")[0]:Ue?I.documentElement:ve},la=function(x){return E.call(x.ownerDocument||x,x,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT,null)},Sh=function(x){return x instanceof d&&(typeof x.nodeName!="string"||typeof x.textContent!="string"||typeof x.removeChild!="function"||!(x.attributes instanceof u)||typeof x.removeAttribute!="function"||typeof x.setAttribute!="function"||typeof x.namespaceURI!="string"||typeof x.insertBefore!="function"||typeof x.hasChildNodes!="function")},ca=function(x){return typeof a=="function"&&x instanceof a},ot=function(x,I,$){C[x]&&kr(C[x],oe=>{oe.call(e,I,$,en)})},ua=function(x){let I=null;if(ot("beforeSanitizeElements",x,null),Sh(x))return Ot(x),!0;const $=ge(x.nodeName);if(ot("uponSanitizeElement",x,{tagName:$,allowedTags:U}),x.hasChildNodes()&&!ca(x.firstElementChild)&&Le(/<[/\w]/g,x.innerHTML)&&Le(/<[/\w]/g,x.textContent))return Ot(x),!0;if(!U[$]||$e[$]){if(!$e[$]&&fa($)&&(re.tagNameCheck instanceof RegExp&&Le(re.tagNameCheck,$)||re.tagNameCheck instanceof Function&&re.tagNameCheck($)))return!1;if(Fi&&!Xt[$]){const oe=w(x)||x.parentNode,ve=y(x)||x.childNodes;if(ve&&oe){const be=ve.length;for(let Se=be-1;Se>=0;--Se)oe.insertBefore(g(ve[Se],!0),m(x))}}return Ot(x),!0}return x instanceof l&&!xh(x)||($==="noscript"||$==="noembed"||$==="noframes")&&Le(/<\/no(script|embed|frames)/i,x.innerHTML)?(Ot(x),!0):(Ye&&x.nodeType===3&&(I=x.textContent,kr([S,A,O],oe=>{I=In(I,oe," ")}),x.textContent!==I&&(Rn(e.removed,{element:x.cloneNode()}),x.textContent=I)),ot("afterSanitizeElements",x,null),!1)},ha=function(x,I,$){if(Xo&&(I==="id"||I==="name")&&($ in t||$ in _h))return!1;if(!(Gt&&!Be[I]&&Le(R,I))){if(!(kn&&Le(H,I))){if(!Y[I]||Be[I]){if(!(fa(x)&&(re.tagNameCheck instanceof RegExp&&Le(re.tagNameCheck,x)||re.tagNameCheck instanceof Function&&re.tagNameCheck(x))&&(re.attributeNameCheck instanceof RegExp&&Le(re.attributeNameCheck,I)||re.attributeNameCheck instanceof Function&&re.attributeNameCheck(I))||I==="is"&&re.allowCustomizedBuiltInElements&&(re.tagNameCheck instanceof RegExp&&Le(re.tagNameCheck,$)||re.tagNameCheck instanceof Function&&re.tagNameCheck($))))return!1}else if(!zi[I]){if(!Le(ue,In($,Z,""))){if(!((I==="src"||I==="xlink:href"||I==="href")&&x!=="script"&&og($,"data:")===0&&ta[x])){if(!(xn&&!Le(J,In($,Z,"")))){if($)return!1}}}}}}return!0},fa=function(x){return x.indexOf("-")>0},da=function(x){ot("beforeSanitizeAttributes",x,null);const{attributes:I}=x;if(!I)return;const $={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Y};let oe=I.length;for(;oe--;){const ve=I[oe],{name:be,namespaceURI:Se,value:Tt}=ve,Cn=ge(be);let Ee=be==="value"?Tt:ag(Tt);if($.attrName=Cn,$.attrValue=Ee,$.keepAttr=!0,$.forceKeepAttr=void 0,ot("uponSanitizeAttribute",x,$),Ee=$.attrValue,$.forceKeepAttr||(qi(be,x),!$.keepAttr))continue;if(!Sn&&Le(/\/>/i,Ee)){qi(be,x);continue}Ye&&kr([S,A,O],ga=>{Ee=In(Ee,ga," ")});const pa=ge(x.nodeName);if(ha(pa,Cn,Ee)){if(Qo&&(Cn==="id"||Cn==="name")&&(qi(be,x),Ee=yh+Ee),_&&typeof p=="object"&&typeof p.getAttributeType=="function"&&!Se)switch(p.getAttributeType(pa,Cn)){case"TrustedHTML":{Ee=_.createHTML(Ee);break}case"TrustedScriptURL":{Ee=_.createScriptURL(Ee);break}}try{Se?x.setAttributeNS(Se,be,Ee):x.setAttribute(be,Ee),el(e.removed)}catch{}}}ot("afterSanitizeAttributes",x,null)},Eh=function B(x){let I=null;const $=la(x);for(ot("beforeSanitizeShadowDOM",x,null);I=$.nextNode();)ot("uponSanitizeShadowNode",I,null),!ua(I)&&(I.content instanceof s&&B(I.content),da(I));ot("afterSanitizeShadowDOM",x,null)};return e.sanitize=function(B){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},I=null,$=null,oe=null,ve=null;if(ji=!B,ji&&(B="<!-->"),typeof B!="string"&&!ca(B))if(typeof B.toString=="function"){if(B=B.toString(),typeof B!="string")throw Pn("dirty is not a string, aborting")}else throw Pn("toString is not a function");if(!e.isSupported)return B;if(Kt||Hi(x),e.removed=[],typeof B=="string"&&(En=!1),En){if(B.nodeName){const Tt=ge(B.nodeName);if(!U[Tt]||$e[Tt])throw Pn("root node is forbidden and cannot be sanitized in-place")}}else if(B instanceof a)I=aa("<!---->"),$=I.ownerDocument.importNode(B,!0),$.nodeType===1&&$.nodeName==="BODY"||$.nodeName==="HTML"?I=$:I.appendChild($);else{if(!Zt&&!Ye&&!Ue&&B.indexOf("<")===-1)return _&&ur?_.createHTML(B):B;if(I=aa(B),!I)return Zt?null:ur?b:""}I&&Bi&&Ot(I.firstChild);const be=la(En?B:I);for(;oe=be.nextNode();)ua(oe)||(oe.content instanceof s&&Eh(oe.content),da(oe));if(En)return B;if(Zt){if(cr)for(ve=k.call(I.ownerDocument);I.firstChild;)ve.appendChild(I.firstChild);else ve=I;return(Y.shadowroot||Y.shadowrootmode)&&(ve=L.call(r,ve,!0)),ve}let Se=Ue?I.outerHTML:I.innerHTML;return Ue&&U["!doctype"]&&I.ownerDocument&&I.ownerDocument.doctype&&I.ownerDocument.doctype.name&&Le(Nc,I.ownerDocument.doctype.name)&&(Se="<!DOCTYPE "+I.ownerDocument.doctype.name+`>
`+Se),Ye&&kr([S,A,O],Tt=>{Se=In(Se,Tt," ")}),_&&ur?_.createHTML(Se):Se},e.setConfig=function(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Hi(B),Kt=!0},e.clearConfig=function(){en=null,Kt=!1},e.isValidAttribute=function(B,x,I){en||Hi({});const $=ge(B),oe=ge(x);return ha($,oe,I)},e.addHook=function(B,x){typeof x=="function"&&(C[B]=C[B]||[],Rn(C[B],x))},e.removeHook=function(B){if(C[B])return el(C[B])},e.removeHooks=function(B){C[B]&&(C[B]=[])},e.removeAllHooks=function(){C={}},e}var jn=Dc();function vo(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Vt=vo();function $c(n){Vt=n}const Bc=/[&<>"']/,bg=new RegExp(Bc.source,"g"),Fc=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,_g=new RegExp(Fc.source,"g"),kg={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ol=n=>kg[n];function Ne(n,e){if(e){if(Bc.test(n))return n.replace(bg,ol)}else if(Fc.test(n))return n.replace(_g,ol);return n}const xg=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Sg(n){return n.replace(xg,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const Eg=/(^|[^\[])\^/g;function te(n,e){n=typeof n=="string"?n:n.source,e=e||"";const t={replace:(r,i)=>(i=typeof i=="object"&&"source"in i?i.source:i,i=i.replace(Eg,"$1"),n=n.replace(r,i),t),getRegex:()=>new RegExp(n,e)};return t}function al(n){try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const ni={exec:()=>null};function ll(n,e){const t=n.replace(/\|/g,(s,o,a)=>{let l=!1,h=o;for(;--h>=0&&a[h]==="\\";)l=!l;return l?"|":" |"}),r=t.split(/ \|/);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function Er(n,e,t){const r=n.length;if(r===0)return"";let i=0;for(;i<r;){const s=n.charAt(r-i-1);if(s===e&&!t)i++;else if(s!==e&&t)i++;else break}return n.slice(0,r-i)}function Cg(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let r=0;r<n.length;r++)if(n[r]==="\\")r++;else if(n[r]===e[0])t++;else if(n[r]===e[1]&&(t--,t<0))return r;return-1}function cl(n,e,t,r){const i=e.href,s=e.title?Ne(e.title):null,o=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){r.state.inLink=!0;const a={type:"link",raw:t,href:i,title:s,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,a}return{type:"image",raw:t,href:i,title:s,text:Ne(o)}}function Ag(n,e){const t=n.match(/^(\s+)(?:```)/);if(t===null)return e;const r=t[1];return e.split(`
`).map(i=>{const s=i.match(/^\s+/);if(s===null)return i;const[o]=s;return o.length>=r.length?i.slice(r.length):i}).join(`
`)}class ri{constructor(e){W(this,"options");W(this,"rules");W(this,"lexer");this.options=e||Vt}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:Er(r,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const r=t[0],i=Ag(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(/#$/.test(r)){const i=Er(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const r=Er(t[0].replace(/^ *>[ \t]?/gm,""),`
`),i=this.lexer.state.top;this.lexer.state.top=!0;const s=this.lexer.blockTokens(r);return this.lexer.state.top=i,{type:"blockquote",raw:t[0],tokens:s,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim();const i=r.length>1,s={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");const o=new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`);let a="",l="",h=!1;for(;e;){let u=!1;if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;a=t[0],e=e.substring(a.length);let d=t[2].split(`
`,1)[0].replace(/^\t+/,y=>" ".repeat(3*y.length)),f=e.split(`
`,1)[0],p=0;this.options.pedantic?(p=2,l=d.trimStart()):(p=t[2].search(/[^ ]/),p=p>4?1:p,l=d.slice(p),p+=t[1].length);let c=!1;if(!d&&/^ *$/.test(f)&&(a+=f+`
`,e=e.substring(f.length+1),u=!0),!u){const y=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),w=new RegExp(`^ {0,${Math.min(3,p-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),_=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:\`\`\`|~~~)`),b=new RegExp(`^ {0,${Math.min(3,p-1)}}#`);for(;e;){const v=e.split(`
`,1)[0];if(f=v,this.options.pedantic&&(f=f.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),_.test(f)||b.test(f)||y.test(f)||w.test(e))break;if(f.search(/[^ ]/)>=p||!f.trim())l+=`
`+f.slice(p);else{if(c||d.search(/[^ ]/)>=4||_.test(d)||b.test(d)||w.test(d))break;l+=`
`+f}!c&&!f.trim()&&(c=!0),a+=v+`
`,e=e.substring(v.length+1),d=f.slice(p)}}s.loose||(h?s.loose=!0:/\n *\n *$/.test(a)&&(h=!0));let g=null,m;this.options.gfm&&(g=/^\[[ xX]\] /.exec(l),g&&(m=g[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:a,task:!!g,checked:m,loose:!1,text:l,tokens:[]}),s.raw+=a}s.items[s.items.length-1].raw=a.trimEnd(),s.items[s.items.length-1].text=l.trimEnd(),s.raw=s.raw.trimEnd();for(let u=0;u<s.items.length;u++)if(this.lexer.state.top=!1,s.items[u].tokens=this.lexer.blockTokens(s.items[u].text,[]),!s.loose){const d=s.items[u].tokens.filter(p=>p.type==="space"),f=d.length>0&&d.some(p=>/\n.*\n/.test(p.raw));s.loose=f}if(s.loose)for(let u=0;u<s.items.length;u++)s.items[u].loose=!0;return s}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const r=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline._escapes,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:i,title:s}}}table(e){const t=this.rules.block.table.exec(e);if(t){if(!/[:|]/.test(t[2]))return;const r={type:"table",raw:t[0],header:ll(t[1]).map(i=>({text:i,tokens:[]})),align:t[2].replace(/^\||\| *$/g,"").split("|"),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(r.header.length===r.align.length){let i=r.align.length,s,o,a,l;for(s=0;s<i;s++){const h=r.align[s];h&&(/^ *-+: *$/.test(h)?r.align[s]="right":/^ *:-+: *$/.test(h)?r.align[s]="center":/^ *:-+ *$/.test(h)?r.align[s]="left":r.align[s]=null)}for(i=r.rows.length,s=0;s<i;s++)r.rows[s]=ll(r.rows[s],r.header.length).map(h=>({text:h,tokens:[]}));for(i=r.header.length,o=0;o<i;o++)r.header[o].tokens=this.lexer.inline(r.header[o].text);for(i=r.rows.length,o=0;o<i;o++)for(l=r.rows[o],a=0;a<l.length;a++)l[a].tokens=this.lexer.inline(l[a].text);return r}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Ne(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const o=Er(r.slice(0,-1),"\\");if((r.length-o.length)%2===0)return}else{const o=Cg(t[2],"()");if(o>-1){const l=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,l).trim(),t[3]=""}}let i=t[2],s="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);o&&(i=o[1],s=o[3])}else s=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(r)?i=i.slice(1):i=i.slice(1,-1)),cl(t,{href:i&&i.replace(this.rules.inline._escapes,"$1"),title:s&&s.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let i=(r[2]||r[1]).replace(/\s+/g," ");if(i=t[i.toLowerCase()],!i){const s=r[0].charAt(0);return{type:"text",raw:s,text:s}}return cl(r,i,r[0],this.lexer)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrong.lDelim.exec(e);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const o=[...i[0]].length-1;let a,l,h=o,u=0;const d=i[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(d.lastIndex=0,t=t.slice(-1*e.length+o);(i=d.exec(t))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(l=[...a].length,i[3]||i[4]){h+=l;continue}else if((i[5]||i[6])&&o%3&&!((o+l)%3)){u+=l;continue}if(h-=l,h>0)continue;l=Math.min(l,l+h+u);const f=[...i[0]][0].length,p=e.slice(0,o+i.index+f+l);if(Math.min(o,l)%2){const g=p.slice(1,-1);return{type:"em",raw:p,text:g,tokens:this.lexer.inlineTokens(g)}}const c=p.slice(2,-2);return{type:"strong",raw:p,text:c,tokens:this.lexer.inlineTokens(c)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(/\n/g," ");const i=/[^ ]/.test(r),s=/^ /.test(r)&&/ $/.test(r);return i&&s&&(r=r.substring(1,r.length-1)),r=Ne(r,!0),{type:"codespan",raw:t[0],text:r}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let r,i;return t[2]==="@"?(r=Ne(t[1]),i="mailto:"+r):(r=Ne(t[1]),i=r),{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let r,i;if(t[2]==="@")r=Ne(t[0]),i="mailto:"+r;else{let s;do s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])[0];while(s!==t[0]);r=Ne(t[0]),t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let r;return this.lexer.state.inRawBlock?r=t[0]:r=Ne(t[0]),{type:"text",raw:t[0],text:r}}}}const j={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:ni,lheading:/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};j._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;j._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;j.def=te(j.def).replace("label",j._label).replace("title",j._title).getRegex();j.bullet=/(?:[*+-]|\d{1,9}[.)])/;j.listItemStart=te(/^( *)(bull) */).replace("bull",j.bullet).getRegex();j.list=te(j.list).replace(/bull/g,j.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+j.def.source+")").getRegex();j._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";j._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;j.html=te(j.html,"i").replace("comment",j._comment).replace("tag",j._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();j.lheading=te(j.lheading).replace(/bull/g,j.bullet).getRegex();j.paragraph=te(j._paragraph).replace("hr",j.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",j._tag).getRegex();j.blockquote=te(j.blockquote).replace("paragraph",j.paragraph).getRegex();j.normal={...j};j.gfm={...j.normal,table:"^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"};j.gfm.table=te(j.gfm.table).replace("hr",j.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",j._tag).getRegex();j.gfm.paragraph=te(j._paragraph).replace("hr",j.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",j.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",j._tag).getRegex();j.pedantic={...j.normal,html:te(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",j._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ni,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:te(j.normal._paragraph).replace("hr",j.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",j.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const N={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:ni,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:ni,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/};N._punctuation="\\p{P}$+<=>`^|~";N.punctuation=te(N.punctuation,"u").replace(/punctuation/g,N._punctuation).getRegex();N.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g;N.anyPunctuation=/\\[punct]/g;N._escapes=/\\([punct])/g;N._comment=te(j._comment).replace("(?:-->|$)","-->").getRegex();N.emStrong.lDelim=te(N.emStrong.lDelim,"u").replace(/punct/g,N._punctuation).getRegex();N.emStrong.rDelimAst=te(N.emStrong.rDelimAst,"gu").replace(/punct/g,N._punctuation).getRegex();N.emStrong.rDelimUnd=te(N.emStrong.rDelimUnd,"gu").replace(/punct/g,N._punctuation).getRegex();N.anyPunctuation=te(N.anyPunctuation,"gu").replace(/punct/g,N._punctuation).getRegex();N._escapes=te(N._escapes,"gu").replace(/punct/g,N._punctuation).getRegex();N._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;N._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;N.autolink=te(N.autolink).replace("scheme",N._scheme).replace("email",N._email).getRegex();N._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;N.tag=te(N.tag).replace("comment",N._comment).replace("attribute",N._attribute).getRegex();N._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;N._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;N._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;N.link=te(N.link).replace("label",N._label).replace("href",N._href).replace("title",N._title).getRegex();N.reflink=te(N.reflink).replace("label",N._label).replace("ref",j._label).getRegex();N.nolink=te(N.nolink).replace("ref",j._label).getRegex();N.reflinkSearch=te(N.reflinkSearch,"g").replace("reflink",N.reflink).replace("nolink",N.nolink).getRegex();N.normal={...N};N.pedantic={...N.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:te(/^!?\[(label)\]\((.*?)\)/).replace("label",N._label).getRegex(),reflink:te(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",N._label).getRegex()};N.gfm={...N.normal,escape:te(N.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/};N.gfm.url=te(N.gfm.url,"i").replace("email",N.gfm._extended_email).getRegex();N.breaks={...N.gfm,br:te(N.br).replace("{2,}","*").getRegex(),text:te(N.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class tt{constructor(e){W(this,"tokens");W(this,"options");W(this,"state");W(this,"tokenizer");W(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Vt,this.options.tokenizer=this.options.tokenizer||new ri,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:j.normal,inline:N.normal};this.options.pedantic?(t.block=j.pedantic,t.inline=N.pedantic):this.options.gfm&&(t.block=j.gfm,this.options.breaks?t.inline=N.breaks:t.inline=N.gfm),this.tokenizer.rules=t}static get rules(){return{block:j,inline:N}}static lex(e,t){return new tt(t).lex(e)}static lexInline(e,t){return new tt(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);let t;for(;t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(a,l,h)=>l+"    ".repeat(h.length));let r,i,s,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(r=a.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),r.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=e.slice(1);let h;this.options.extensions.startBlock.forEach(u=>{h=u.call({lexer:this},l),typeof h=="number"&&h>=0&&(a=Math.min(a,h))}),a<1/0&&a>=0&&(s=e.substring(0,a+1))}if(this.state.top&&(r=this.tokenizer.paragraph(s))){i=t[t.length-1],o&&i.type==="paragraph"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r),o=s.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&i.type==="text"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r,i,s,o=e,a,l,h;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(l||(h=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(r=u.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.emStrong(e,o,h)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.autolink(e)){e=e.substring(r.raw.length),t.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e))){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const d=e.slice(1);let f;this.options.extensions.startInline.forEach(p=>{f=p.call({lexer:this},d),typeof f=="number"&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(s=e.substring(0,u+1))}if(r=this.tokenizer.inlineText(s)){e=e.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(h=r.raw.slice(-1)),l=!0,i=t[t.length-1],i&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return t}}class ii{constructor(e){W(this,"options");this.options=e||Vt}code(e,t,r){var s;const i=(s=(t||"").match(/^\S*/))==null?void 0:s[0];return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="language-'+Ne(i)+'">'+(r?e:Ne(e,!0))+`</code></pre>
`:"<pre><code>"+(r?e:Ne(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,t){return e}heading(e,t,r){return`<h${t}>${e}</h${t}>
`}hr(){return`<hr>
`}list(e,t,r){const i=t?"ol":"ul",s=t&&r!==1?' start="'+r+'"':"";return"<"+i+s+`>
`+e+"</"+i+`>
`}listitem(e,t,r){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>
`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,t){const r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+e+`</${r}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,r){const i=al(e);if(i===null)return r;e=i;let s='<a href="'+e+'"';return t&&(s+=' title="'+t+'"'),s+=">"+r+"</a>",s}image(e,t,r){const i=al(e);if(i===null)return r;e=i;let s=`<img src="${e}" alt="${r}"`;return t&&(s+=` title="${t}"`),s+=">",s}text(e){return e}}class bo{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,r){return""+r}image(e,t,r){return""+r}br(){return""}}class nt{constructor(e){W(this,"options");W(this,"renderer");W(this,"textRenderer");this.options=e||Vt,this.options.renderer=this.options.renderer||new ii,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new bo}static parse(e,t){return new nt(t).parse(e)}static parseInline(e,t){return new nt(t).parseInline(e)}parse(e,t=!0){let r="";for(let i=0;i<e.length;i++){const s=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const o=s,a=this.options.extensions.renderers[o.type].call({parser:this},o);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){r+=a||"";continue}}switch(s.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{const o=s;r+=this.renderer.heading(this.parseInline(o.tokens),o.depth,Sg(this.parseInline(o.tokens,this.textRenderer)));continue}case"code":{const o=s;r+=this.renderer.code(o.text,o.lang,!!o.escaped);continue}case"table":{const o=s;let a="",l="";for(let u=0;u<o.header.length;u++)l+=this.renderer.tablecell(this.parseInline(o.header[u].tokens),{header:!0,align:o.align[u]});a+=this.renderer.tablerow(l);let h="";for(let u=0;u<o.rows.length;u++){const d=o.rows[u];l="";for(let f=0;f<d.length;f++)l+=this.renderer.tablecell(this.parseInline(d[f].tokens),{header:!1,align:o.align[f]});h+=this.renderer.tablerow(l)}r+=this.renderer.table(a,h);continue}case"blockquote":{const o=s,a=this.parse(o.tokens);r+=this.renderer.blockquote(a);continue}case"list":{const o=s,a=o.ordered,l=o.start,h=o.loose;let u="";for(let d=0;d<o.items.length;d++){const f=o.items[d],p=f.checked,c=f.task;let g="";if(f.task){const m=this.renderer.checkbox(!!p);h?f.tokens.length>0&&f.tokens[0].type==="paragraph"?(f.tokens[0].text=m+" "+f.tokens[0].text,f.tokens[0].tokens&&f.tokens[0].tokens.length>0&&f.tokens[0].tokens[0].type==="text"&&(f.tokens[0].tokens[0].text=m+" "+f.tokens[0].tokens[0].text)):f.tokens.unshift({type:"text",text:m+" "}):g+=m+" "}g+=this.parse(f.tokens,h),u+=this.renderer.listitem(g,c,!!p)}r+=this.renderer.list(u,a,l);continue}case"html":{const o=s;r+=this.renderer.html(o.text,o.block);continue}case"paragraph":{const o=s;r+=this.renderer.paragraph(this.parseInline(o.tokens));continue}case"text":{let o=s,a=o.tokens?this.parseInline(o.tokens):o.text;for(;i+1<e.length&&e[i+1].type==="text";)o=e[++i],a+=`
`+(o.tokens?this.parseInline(o.tokens):o.text);r+=t?this.renderer.paragraph(a):a;continue}default:{const o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return r}parseInline(e,t){t=t||this.renderer;let r="";for(let i=0;i<e.length;i++){const s=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const o=this.options.extensions.renderers[s.type].call({parser:this},s);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){r+=o||"";continue}}switch(s.type){case"escape":{const o=s;r+=t.text(o.text);break}case"html":{const o=s;r+=t.html(o.text);break}case"link":{const o=s;r+=t.link(o.href,o.title,this.parseInline(o.tokens,t));break}case"image":{const o=s;r+=t.image(o.href,o.title,o.text);break}case"strong":{const o=s;r+=t.strong(this.parseInline(o.tokens,t));break}case"em":{const o=s;r+=t.em(this.parseInline(o.tokens,t));break}case"codespan":{const o=s;r+=t.codespan(o.text);break}case"br":{r+=t.br();break}case"del":{const o=s;r+=t.del(this.parseInline(o.tokens,t));break}case"text":{const o=s;r+=t.text(o.text);break}default:{const o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return r}}class Un{constructor(e){W(this,"options");this.options=e||Vt}preprocess(e){return e}postprocess(e){return e}}W(Un,"passThroughHooks",new Set(["preprocess","postprocess"]));var Xn,Ps,mi,zc;class Og{constructor(...e){Vi(this,Xn);Vi(this,mi);W(this,"defaults",vo());W(this,"options",this.setOptions);W(this,"parse",pr(this,Xn,Ps).call(this,tt.lex,nt.parse));W(this,"parseInline",pr(this,Xn,Ps).call(this,tt.lexInline,nt.parseInline));W(this,"Parser",nt);W(this,"Renderer",ii);W(this,"TextRenderer",bo);W(this,"Lexer",tt);W(this,"Tokenizer",ri);W(this,"Hooks",Un);this.use(...e)}walkTokens(e,t){var i,s;let r=[];for(const o of e)switch(r=r.concat(t.call(this,o)),o.type){case"table":{const a=o;for(const l of a.header)r=r.concat(this.walkTokens(l.tokens,t));for(const l of a.rows)for(const h of l)r=r.concat(this.walkTokens(h.tokens,t));break}case"list":{const a=o;r=r.concat(this.walkTokens(a.items,t));break}default:{const a=o;(s=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&s[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{r=r.concat(this.walkTokens(a[l],t))}):a.tokens&&(r=r.concat(this.walkTokens(a.tokens,t)))}}return r}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{const i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const o=t.renderers[s.name];o?t.renderers[s.name]=function(...a){let l=s.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:t.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=t[s.level];o?o.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),i.extensions=t),r.renderer){const s=this.defaults.renderer||new ii(this.defaults);for(const o in r.renderer){const a=r.renderer[o],l=o,h=s[l];s[l]=(...u)=>{let d=a.apply(s,u);return d===!1&&(d=h.apply(s,u)),d||""}}i.renderer=s}if(r.tokenizer){const s=this.defaults.tokenizer||new ri(this.defaults);for(const o in r.tokenizer){const a=r.tokenizer[o],l=o,h=s[l];s[l]=(...u)=>{let d=a.apply(s,u);return d===!1&&(d=h.apply(s,u)),d}}i.tokenizer=s}if(r.hooks){const s=this.defaults.hooks||new Un;for(const o in r.hooks){const a=r.hooks[o],l=o,h=s[l];Un.passThroughHooks.has(o)?s[l]=u=>{if(this.defaults.async)return Promise.resolve(a.call(s,u)).then(f=>h.call(s,f));const d=a.call(s,u);return h.call(s,d)}:s[l]=(...u)=>{let d=a.apply(s,u);return d===!1&&(d=h.apply(s,u)),d}}i.hooks=s}if(r.walkTokens){const s=this.defaults.walkTokens,o=r.walkTokens;i.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),s&&(l=l.concat(s.call(this,a))),l}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return tt.lex(e,t??this.defaults)}parser(e,t){return nt.parse(e,t??this.defaults)}}Xn=new WeakSet,Ps=function(e,t){return(r,i)=>{const s={...i},o={...this.defaults,...s};this.defaults.async===!0&&s.async===!1&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);const a=pr(this,mi,zc).call(this,!!o.silent,!!o.async);if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(r):r).then(l=>e(l,o)).then(l=>o.walkTokens?Promise.all(this.walkTokens(l,o.walkTokens)).then(()=>l):l).then(l=>t(l,o)).then(l=>o.hooks?o.hooks.postprocess(l):l).catch(a);try{o.hooks&&(r=o.hooks.preprocess(r));const l=e(r,o);o.walkTokens&&this.walkTokens(l,o.walkTokens);let h=t(l,o);return o.hooks&&(h=o.hooks.postprocess(h)),h}catch(l){return a(l)}}},mi=new WeakSet,zc=function(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const i="<p>An error occurred:</p><pre>"+Ne(r.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(r);throw r}};const Wt=new Og;function Q(n,e){return Wt.parse(n,e)}Q.options=Q.setOptions=function(n){return Wt.setOptions(n),Q.defaults=Wt.defaults,$c(Q.defaults),Q};Q.getDefaults=vo;Q.defaults=Vt;Q.use=function(...n){return Wt.use(...n),Q.defaults=Wt.defaults,$c(Q.defaults),Q};Q.walkTokens=function(n,e){return Wt.walkTokens(n,e)};Q.parseInline=Wt.parseInline;Q.Parser=nt;Q.parser=nt.parse;Q.Renderer=ii;Q.TextRenderer=bo;Q.Lexer=tt;Q.lexer=tt.lex;Q.Tokenizer=ri;Q.Hooks=Un;Q.parse=Q;Q.options;Q.setOptions;Q.use;Q.walkTokens;Q.parseInline;nt.parse;tt.lex;const Tg={unicode:!1};function Rg(n){if(n={...Tg,...n},!n.emojis)throw new Error("Must provide emojis to markedEmoji");const e=Object.keys(n.emojis).map(i=>i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|"),t=new RegExp(`:(${e}):`),r=new RegExp(`^${t.source}`);return{extensions:[{name:"emoji",level:"inline",start(i){var s;return(s=i.match(t))==null?void 0:s.index},tokenizer(i,s){const o=r.exec(i);if(!o)return;const a=o[1];let l=n.emojis[a],h=n.unicode;if(typeof l!="string")if(typeof l.char=="string")l=l.char,h=!0;else if(typeof l.url=="string")l=l.url,h=!1;else return;return{type:"emoji",raw:o[0],name:a,emoji:l,unicode:h}},renderer(i){return i.unicode?i.emoji:`<img alt="${i.name}" src="${i.emoji}" class="marked-emoji-img">`}}]}}class jc extends pt{constructor(e,t){t??(t={}),t.marked??(t.marked={mangle:!1,gfm:!0,breaks:!0,headerIds:!1,headerPrefix:void 0}),t.markedEmoji??(t.markedEmoji={unicode:!0,emojis:{emojis:{fire:"",heart:"",thumbsup:""}}}),super({id:e??"text/markdown"},t)}async load(){Q.use(Rg(this.opts.markedEmoji))}render(e){var s;const t=Array.isArray(e.value)?e.value.join(`

`):(s=e.value)==null?void 0:s.toString(),r=Q.parse(t,{mangle:!1,headerIds:!1});return jn.sanitize(r,{ALLOWED_TAGS:["h1","h2","h3","h4","h5","h6","blockquote","p","a","ul","ol","nl","li","b","i","strong","em","strike","code","hr","br","div","table","thead","caption","tbody","tr","th","td","pre","img"],ALLOWED_ATTR:["href","alt","src","title"]})}}class Ig extends jc{constructor(e,t){e??(e="text/markdown-code"),super(e,t)}render(e){var i;const t=s=>`<pre><code>${s}</code></pre>`,r=Array.isArray(e.value)?e.value.map(t).join(""):t(((i=e.value)==null?void 0:i.toString())||"");return super.render({type:"text/markdown",value:r})}}class Dt{constructor(){this.controls=new Map}add(e,t){this.controls.set(e,t)}get(e){return this.controls.get(e)}has(e){return this.controls.has(e)}static getInstance(){return Dt.instance==null&&(Dt.instance=new Dt),Dt.instance}}var Pg=function(e){return Lg(e)&&!Mg(e)};function Lg(n){return!!n&&typeof n=="object"}function Mg(n){var e=Object.prototype.toString.call(n);return e==="[object RegExp]"||e==="[object Date]"||$g(n)}var Ng=typeof Symbol=="function"&&Symbol.for,Dg=Ng?Symbol.for("react.element"):60103;function $g(n){return n.$$typeof===Dg}function Bg(n){return Array.isArray(n)?[]:{}}function Kn(n,e){return e.clone!==!1&&e.isMergeableObject(n)?dn(Bg(n),n,e):n}function Fg(n,e,t){return n.concat(e).map(function(r){return Kn(r,t)})}function zg(n,e){if(!e.customMerge)return dn;var t=e.customMerge(n);return typeof t=="function"?t:dn}function jg(n){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(n).filter(function(e){return Object.propertyIsEnumerable.call(n,e)}):[]}function ul(n){return Object.keys(n).concat(jg(n))}function Uc(n,e){try{return e in n}catch{return!1}}function Ug(n,e){return Uc(n,e)&&!(Object.hasOwnProperty.call(n,e)&&Object.propertyIsEnumerable.call(n,e))}function Hg(n,e,t){var r={};return t.isMergeableObject(n)&&ul(n).forEach(function(i){r[i]=Kn(n[i],t)}),ul(e).forEach(function(i){Ug(n,i)||(Uc(n,i)&&t.isMergeableObject(e[i])?r[i]=zg(i,t)(n[i],e[i],t):r[i]=Kn(e[i],t))}),r}function dn(n,e,t){t=t||{},t.arrayMerge=t.arrayMerge||Fg,t.isMergeableObject=t.isMergeableObject||Pg,t.cloneUnlessOtherwiseSpecified=Kn;var r=Array.isArray(e),i=Array.isArray(n),s=r===i;return s?r?t.arrayMerge(n,e,t):Hg(n,e,t):Kn(e,t)}dn.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(r,i){return dn(r,i,t)},{})};var Wg=dn,qg=Wg;const Vg=Il(qg);/*!
* rete v1.5.2 
* (c) 2023 Vitaliy Stoliarov 
* Released under the MIT license.
*/function hl(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ls(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?hl(Object(t),!0).forEach(function(r){P(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):hl(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function G(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */G=function(){return n};var n={},e=Object.prototype,t=e.hasOwnProperty,r=typeof Symbol=="function"?Symbol:{},i=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function a(C,S,A){return Object.defineProperty(C,S,{value:A,enumerable:!0,configurable:!0,writable:!0}),C[S]}try{a({},"")}catch{a=function(S,A,O){return S[A]=O}}function l(C,S,A,O){var R=S&&S.prototype instanceof d?S:d,H=Object.create(R.prototype),J=new k(O||[]);return H._invoke=function(Z,ue,U){var de="suspendedStart";return function(Y,gt){if(de==="executing")throw new Error("Generator is already running");if(de==="completed"){if(Y==="throw")throw gt;return L()}for(U.method=Y,U.arg=gt;;){var re=U.delegate;if(re){var $e=b(re,U);if($e){if($e===u)continue;return $e}}if(U.method==="next")U.sent=U._sent=U.arg;else if(U.method==="throw"){if(de==="suspendedStart")throw de="completed",U.arg;U.dispatchException(U.arg)}else U.method==="return"&&U.abrupt("return",U.arg);de="executing";var Be=h(Z,ue,U);if(Be.type==="normal"){if(de=U.done?"completed":"suspendedYield",Be.arg===u)continue;return{value:Be.arg,done:U.done}}Be.type==="throw"&&(de="completed",U.method="throw",U.arg=Be.arg)}}}(C,A,J),H}function h(C,S,A){try{return{type:"normal",arg:C.call(S,A)}}catch(O){return{type:"throw",arg:O}}}n.wrap=l;var u={};function d(){}function f(){}function p(){}var c={};a(c,i,function(){return this});var g=Object.getPrototypeOf,m=g&&g(g(D([])));m&&m!==e&&t.call(m,i)&&(c=m);var y=p.prototype=d.prototype=Object.create(c);function w(C){["next","throw","return"].forEach(function(S){a(C,S,function(A){return this._invoke(S,A)})})}function _(C,S){function A(R,H,J,Z){var ue=h(C[R],C,H);if(ue.type!=="throw"){var U=ue.arg,de=U.value;return de&&typeof de=="object"&&t.call(de,"__await")?S.resolve(de.__await).then(function(Y){A("next",Y,J,Z)},function(Y){A("throw",Y,J,Z)}):S.resolve(de).then(function(Y){U.value=Y,J(U)},function(Y){return A("throw",Y,J,Z)})}Z(ue.arg)}var O;this._invoke=function(R,H){function J(){return new S(function(Z,ue){A(R,H,Z,ue)})}return O=O?O.then(J,J):J()}}function b(C,S){var A=C.iterator[S.method];if(A===void 0){if(S.delegate=null,S.method==="throw"){if(C.iterator.return&&(S.method="return",S.arg=void 0,b(C,S),S.method==="throw"))return u;S.method="throw",S.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var O=h(A,C.iterator,S.arg);if(O.type==="throw")return S.method="throw",S.arg=O.arg,S.delegate=null,u;var R=O.arg;return R?R.done?(S[C.resultName]=R.value,S.next=C.nextLoc,S.method!=="return"&&(S.method="next",S.arg=void 0),S.delegate=null,u):R:(S.method="throw",S.arg=new TypeError("iterator result is not an object"),S.delegate=null,u)}function v(C){var S={tryLoc:C[0]};1 in C&&(S.catchLoc=C[1]),2 in C&&(S.finallyLoc=C[2],S.afterLoc=C[3]),this.tryEntries.push(S)}function E(C){var S=C.completion||{};S.type="normal",delete S.arg,C.completion=S}function k(C){this.tryEntries=[{tryLoc:"root"}],C.forEach(v,this),this.reset(!0)}function D(C){if(C){var S=C[i];if(S)return S.call(C);if(typeof C.next=="function")return C;if(!isNaN(C.length)){var A=-1,O=function R(){for(;++A<C.length;)if(t.call(C,A))return R.value=C[A],R.done=!1,R;return R.value=void 0,R.done=!0,R};return O.next=O}}return{next:L}}function L(){return{value:void 0,done:!0}}return f.prototype=p,a(y,"constructor",p),a(p,"constructor",f),f.displayName=a(p,o,"GeneratorFunction"),n.isGeneratorFunction=function(C){var S=typeof C=="function"&&C.constructor;return!!S&&(S===f||(S.displayName||S.name)==="GeneratorFunction")},n.mark=function(C){return Object.setPrototypeOf?Object.setPrototypeOf(C,p):(C.__proto__=p,a(C,o,"GeneratorFunction")),C.prototype=Object.create(y),C},n.awrap=function(C){return{__await:C}},w(_.prototype),a(_.prototype,s,function(){return this}),n.AsyncIterator=_,n.async=function(C,S,A,O,R){R===void 0&&(R=Promise);var H=new _(l(C,S,A,O),R);return n.isGeneratorFunction(S)?H:H.next().then(function(J){return J.done?J.value:H.next()})},w(y),a(y,o,"Generator"),a(y,i,function(){return this}),a(y,"toString",function(){return"[object Generator]"}),n.keys=function(C){var S=[];for(var A in C)S.push(A);return S.reverse(),function O(){for(;S.length;){var R=S.pop();if(R in C)return O.value=R,O.done=!1,O}return O.done=!0,O}},n.values=D,k.prototype={constructor:k,reset:function(C){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!C)for(var S in this)S.charAt(0)==="t"&&t.call(this,S)&&!isNaN(+S.slice(1))&&(this[S]=void 0)},stop:function(){this.done=!0;var C=this.tryEntries[0].completion;if(C.type==="throw")throw C.arg;return this.rval},dispatchException:function(C){if(this.done)throw C;var S=this;function A(ue,U){return H.type="throw",H.arg=C,S.next=ue,U&&(S.method="next",S.arg=void 0),!!U}for(var O=this.tryEntries.length-1;O>=0;--O){var R=this.tryEntries[O],H=R.completion;if(R.tryLoc==="root")return A("end");if(R.tryLoc<=this.prev){var J=t.call(R,"catchLoc"),Z=t.call(R,"finallyLoc");if(J&&Z){if(this.prev<R.catchLoc)return A(R.catchLoc,!0);if(this.prev<R.finallyLoc)return A(R.finallyLoc)}else if(J){if(this.prev<R.catchLoc)return A(R.catchLoc,!0)}else{if(!Z)throw new Error("try statement without catch or finally");if(this.prev<R.finallyLoc)return A(R.finallyLoc)}}}},abrupt:function(C,S){for(var A=this.tryEntries.length-1;A>=0;--A){var O=this.tryEntries[A];if(O.tryLoc<=this.prev&&t.call(O,"finallyLoc")&&this.prev<O.finallyLoc){var R=O;break}}R&&(C==="break"||C==="continue")&&R.tryLoc<=S&&S<=R.finallyLoc&&(R=null);var H=R?R.completion:{};return H.type=C,H.arg=S,R?(this.method="next",this.next=R.finallyLoc,u):this.complete(H)},complete:function(C,S){if(C.type==="throw")throw C.arg;return C.type==="break"||C.type==="continue"?this.next=C.arg:C.type==="return"?(this.rval=this.arg=C.arg,this.method="return",this.next="end"):C.type==="normal"&&S&&(this.next=S),u},finish:function(C){for(var S=this.tryEntries.length-1;S>=0;--S){var A=this.tryEntries[S];if(A.finallyLoc===C)return this.complete(A.completion,A.afterLoc),E(A),u}},catch:function(C){for(var S=this.tryEntries.length-1;S>=0;--S){var A=this.tryEntries[S];if(A.tryLoc===C){var O=A.completion;if(O.type==="throw"){var R=O.arg;E(A)}return R}}throw new Error("illegal catch attempt")},delegateYield:function(C,S,A){return this.delegate={iterator:D(C),resultName:S,nextLoc:A},this.method==="next"&&(this.arg=void 0),u}},n}function fl(n,e,t,r,i,s,o){try{var a=n[s](o),l=a.value}catch(h){t(h);return}a.done?e(l):Promise.resolve(l).then(r,i)}function ye(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var s=n.apply(e,t);function o(l){fl(s,r,i,o,a,"next",l)}function a(l){fl(s,r,i,o,a,"throw",l)}o(void 0)})}}function ie(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function dl(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function se(n,e,t){return e&&dl(n.prototype,e),t&&dl(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function P(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Te(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Ms(n,e)}function pn(n){return pn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pn(n)}function Ms(n,e){return Ms=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Ms(n,e)}function Jg(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function F(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Gg(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F(n)}function Re(n){var e=Jg();return function(){var r=pn(n),i;if(e){var s=pn(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return Gg(this,i)}}function Kg(n,e){for(;!Object.prototype.hasOwnProperty.call(n,e)&&(n=pn(n),n!==null););return n}function Fr(){return typeof Reflect<"u"&&Reflect.get?Fr=Reflect.get.bind():Fr=function(e,t,r){var i=Kg(e,t);if(i){var s=Object.getOwnPropertyDescriptor(i,t);return s.get?s.get.call(arguments.length<3?e:r):s.value}},Fr.apply(this,arguments)}function _t(n,e){return Yg(n)||Qg(n,e)||_o(n,e)||tm()}function De(n){return Zg(n)||Xg(n)||_o(n)||em()}function Zg(n){if(Array.isArray(n))return Ns(n)}function Yg(n){if(Array.isArray(n))return n}function Xg(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Qg(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,o,a;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return r}}function _o(n,e){if(n){if(typeof n=="string")return Ns(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ns(n,e)}}function Ns(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function em(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tm(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pl(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=_o(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(n)},n:function(){var l=t.next();return s=l.done,l},e:function(l){o=!0,a=l},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}var nm=se(function n(e){ie(this,n),P(this,"name",void 0),P(this,"data",{}),P(this,"engine",null),this.name=e}),rr=function(){function n(e){ie(this,n),P(this,"name",void 0),P(this,"id",void 0),P(this,"position",[0,0]),P(this,"inputs",new Map),P(this,"outputs",new Map),P(this,"controls",new Map),P(this,"data",{}),P(this,"meta",{}),this.name=e,this.id=n.incrementId()}return se(n,[{key:"_add",value:function(t,r,i){if(t.has(r.key))throw new Error("Item with key '".concat(r.key,"' already been added to the node"));if(r[i]!==null)throw new Error("Item has already been added to some node");r[i]=this,t.set(r.key,r)}},{key:"addControl",value:function(t){return this._add(this.controls,t,"parent"),this}},{key:"removeControl",value:function(t){t.parent=null,this.controls.delete(t.key)}},{key:"addInput",value:function(t){return this._add(this.inputs,t,"node"),this}},{key:"removeInput",value:function(t){t.removeConnections(),t.node=null,this.inputs.delete(t.key)}},{key:"addOutput",value:function(t){return this._add(this.outputs,t,"node"),this}},{key:"removeOutput",value:function(t){t.removeConnections(),t.node=null,this.outputs.delete(t.key)}},{key:"setMeta",value:function(t){return this.meta=t,this}},{key:"getConnections",value:function(){var t=[].concat(De(this.inputs.values()),De(this.outputs.values())),r=t.reduce(function(i,s){return[].concat(De(i),De(s.connections))},[]);return r}},{key:"update",value:function(){}},{key:"toJSON",value:function(){var t=function(i){return Array.from(i).reduce(function(s,o){var a=_t(o,2),l=a[0],h=a[1];return s[l]=h.toJSON(),s},{})};return{id:this.id,data:this.data,inputs:t(this.inputs),outputs:t(this.outputs),position:this.position,name:this.name}}}],[{key:"incrementId",value:function(){return this.latestId?this.latestId++:this.latestId=1,this.latestId}},{key:"resetId",value:function(){this.latestId=0}},{key:"fromJSON",value:function(t){var r=new n(t.name),i=_t(t.position,2),s=i[0],o=i[1];return r.id=t.id,r.data=t.data,r.position=[s,o],r.name=t.name,n.latestId=Math.max(r.id,n.latestId),r}}]),n}();P(rr,"latestId",0);var Hc=function(n){Te(t,n);var e=Re(t);function t(r){var i;return ie(this,t),i=e.call(this,r),P(F(i),"editor",null),P(F(i),"data",{}),i}return se(t,[{key:"build",value:function(){var r=ye(G().mark(function s(o){return G().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.builder(o);case 2:return l.abrupt("return",o);case 3:case"end":return l.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"createNode",value:function(){var r=ye(G().mark(function s(){var o,a,l=arguments;return G().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o=l.length>0&&l[0]!==void 0?l[0]:{},a=new rr(this.name),a.data=o,u.next=5,this.build(a);case 5:return u.abrupt("return",a);case 6:case"end":return u.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()}]),t}(nm),Wc=function(){function n(e,t){ie(this,n),P(this,"output",void 0),P(this,"input",void 0),P(this,"data",{}),this.output=e,this.input=t,this.data={},this.input.addConnection(this)}return se(n,[{key:"remove",value:function(){this.input.removeConnection(this),this.output.removeConnection(this)}}]),n}(),rm=function(){function n(e){if(ie(this,n),P(this,"key",void 0),P(this,"data",{}),P(this,"parent",null),this.constructor===n)throw new TypeError("Can not construct abstract class");if(!e)throw new Error("The key parameter is missing in super() of Control ");this.key=e}return se(n,[{key:"getNode",value:function(){if(this.parent===null)throw new Error("Control isn't added to Node/Input");if(this.parent instanceof rr)return this.parent;if(!this.parent.node)throw new Error("Control hasn't be added to Input or Node");return this.parent.node}},{key:"getData",value:function(t){return this.getNode().data[t]}},{key:"putData",value:function(t,r){this.getNode().data[t]=r}}]),n}(),Ct=function(){function n(e){ie(this,n),P(this,"events",{}),P(this,"silent",!1),this.events=e instanceof n?e.events:e.handlers}return se(n,[{key:"on",value:function(t,r){var i=this,s=t instanceof Array?t:t.split(" ");return s.forEach(function(o){if(!i.events[o])throw new Error("The event ".concat(o," does not exist"));i.events[o].push(r)}),this}},{key:"trigger",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(t in this.events))throw new Error("The event ".concat(String(t)," cannot be triggered"));return this.events[t].reduce(function(i,s){return s(r)!==!1&&i},!0)}},{key:"bind",value:function(t){if(this.events[t])throw new Error("The event ".concat(t," is already bound"));this.events[t]=[]}},{key:"exist",value:function(t){return Array.isArray(this.events[t])}}]),n}(),ko=function(){function n(e,t,r,i){ie(this,n),P(this,"node",null),P(this,"multipleConnections",void 0),P(this,"connections",[]),P(this,"key",void 0),P(this,"name",void 0),P(this,"socket",void 0),this.node=null,this.multipleConnections=i,this.connections=[],this.key=e,this.name=t,this.socket=r}return se(n,[{key:"removeConnection",value:function(t){this.connections.splice(this.connections.indexOf(t),1)}},{key:"removeConnections",value:function(){var t=this;this.connections.forEach(function(r){return t.removeConnection(r)})}}]),n}(),qc=function(n){Te(t,n);var e=Re(t);function t(r,i,s){var o,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return ie(this,t),o=e.call(this,r,i,s,a),P(F(o),"control",null),o}return se(t,[{key:"hasConnection",value:function(){return this.connections.length>0}},{key:"addConnection",value:function(i){if(!this.multipleConnections&&this.hasConnection())throw new Error("Multiple connections not allowed");this.connections.push(i)}},{key:"addControl",value:function(i){this.control=i,i.parent=this}},{key:"showControl",value:function(){return!this.hasConnection()&&this.control!==null}},{key:"toJSON",value:function(){return{connections:this.connections.map(function(i){if(!i.output.node)throw new Error("Node not added to Output");return{node:i.output.node.id,output:i.output.key,data:i.data}})}}}]),t}(ko),xo=function(){function n(){ie(this,n)}return se(n,null,[{key:"isValidData",value:function(t){return typeof t.id=="string"&&this.isValidId(t.id)&&t.nodes instanceof Object&&!(t.nodes instanceof Array)}},{key:"isValidId",value:function(t){return/^[\w-]{3,}@[0-9]+\.[0-9]+\.[0-9]+$/.test(t)}},{key:"validate",value:function(t,r){var i=t.split("@"),s=r.id.split("@"),o=[];return this.isValidData(r)||o.push("Data is not suitable"),t!==r.id&&o.push("IDs not equal"),i[0]!==s[0]&&o.push("Names don't match"),i[1]!==s[1]&&o.push("Versions don't match"),{success:!o.length,msg:o.join(". ")}}}]),n}(),Vc=function(n){Te(t,n);var e=Re(t);function t(r,i){var s;if(ie(this,t),s=e.call(this,i),P(F(s),"id",void 0),P(F(s),"plugins",void 0),P(F(s),"components",void 0),!xo.isValidId(r))throw new Error("ID should be valid to name@0.1.0 format");return s.id=r,s.plugins=new Map,s.components=new Map,s}return se(t,[{key:"use",value:function(i,s){if(i.name&&this.plugins.has(i.name))throw new Error("Plugin ".concat(i.name," already in use"));i.install(this,s||{}),this.plugins.set(i.name,s)}},{key:"register",value:function(i){if(this.components.has(i.name))throw new Error("Component ".concat(i.name," already registered"));this.components.set(i.name,i),this.trigger("componentregister",i)}},{key:"destroy",value:function(){this.trigger("destroy")}}]),t}(Ct);function bt(n,e){return window.addEventListener(n,e),function(){window.removeEventListener(n,e)}}function im(n,e){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:8,r=n.offsetLeft,i=n.offsetTop,s=n.offsetParent;s&&s!==e&&t>0;)t--,r+=s.offsetLeft,i+=s.offsetTop,s=s.offsetParent;return{x:r,y:i}}var Jc=function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(a,l,h){},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(a){},i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(a){};ie(this,n),this.onTranslate=t,this.onStart=r,this.onDrag=i,P(this,"pointerStart",void 0),P(this,"el",void 0),P(this,"destroy",void 0),this.pointerStart=null,this.el=e,this.el.style.touchAction="none",this.el.addEventListener("pointerdown",this.down.bind(this));var s=bt("pointermove",this.move.bind(this)),o=bt("pointerup",this.up.bind(this));this.destroy=function(){s(),o()}}return se(n,[{key:"down",value:function(t){t.pointerType==="mouse"&&t.button!==0||(t.stopPropagation(),this.pointerStart=[t.pageX,t.pageY],this.onStart(t))}},{key:"move",value:function(t){if(this.pointerStart){t.preventDefault();var r=[t.pageX,t.pageY],i=r[0],s=r[1],o=[i-this.pointerStart[0],s-this.pointerStart[1]],a=this.el.getBoundingClientRect().width/this.el.offsetWidth;this.onTranslate(o[0]/a,o[1]/a,t)}}},{key:"up",value:function(t){this.pointerStart&&(this.pointerStart=null,this.onDrag(t))}}]),n}(),sm=function(){function n(e,t,r,i){ie(this,n),P(this,"el",void 0),P(this,"intensity",void 0),P(this,"onzoom",void 0),P(this,"previous",null),P(this,"pointers",[]),P(this,"destroy",void 0),this.el=t,this.intensity=r,this.onzoom=i,e.addEventListener("wheel",this.wheel.bind(this)),e.addEventListener("pointerdown",this.down.bind(this)),e.addEventListener("dblclick",this.dblclick.bind(this));var s=bt("pointermove",this.move.bind(this)),o=bt("pointerup",this.end.bind(this)),a=bt("pointercancel",this.end.bind(this));this.destroy=function(){s(),o(),a()}}return se(n,[{key:"translating",get:function(){return this.pointers.length>=2}},{key:"wheel",value:function(t){t.preventDefault();var r=this.el.getBoundingClientRect(),i=t.deltaY<0,s=i?this.intensity:-this.intensity,o=(r.left-t.clientX)*s,a=(r.top-t.clientY)*s;this.onzoom(s,o,a,"wheel")}},{key:"touches",value:function(){var t={touches:this.pointers},r=[t.touches[0].clientX,t.touches[0].clientY],i=r[0],s=r[1],o=[t.touches[1].clientX,t.touches[1].clientY],a=o[0],l=o[1],h=Math.sqrt(Math.pow(i-a,2)+Math.pow(s-l,2));return{cx:(i+a)/2,cy:(s+l)/2,distance:h}}},{key:"down",value:function(t){this.pointers.push(t)}},{key:"move",value:function(t){if(this.pointers=this.pointers.map(function(d){return d.pointerId===t.pointerId?t:d}),!!this.translating){var r=this.el.getBoundingClientRect(),i=this.touches(),s=i.cx,o=i.cy,a=i.distance;if(this.previous!==null){var l=a/this.previous.distance-1,h=(r.left-s)*l,u=(r.top-o)*l;this.onzoom(l,h-(this.previous.cx-s),u-(this.previous.cy-o),"touch")}this.previous={cx:s,cy:o,distance:a}}}},{key:"end",value:function(t){this.previous=null,this.pointers=this.pointers.filter(function(r){return r.pointerId!==t.pointerId})}},{key:"dblclick",value:function(t){t.preventDefault();var r=this.el.getBoundingClientRect(),i=4*this.intensity,s=(r.left-t.clientX)*i,o=(r.top-t.clientY)*i;this.onzoom(i,s,o,"dblclick")}}]),n}(),om=function(n){Te(t,n);var e=Re(t);function t(r,i){var s;ie(this,t),s=e.call(this,i),P(F(s),"el",void 0),P(F(s),"container",void 0),P(F(s),"transform",{k:1,x:0,y:0}),P(F(s),"mouse",{x:0,y:0}),P(F(s),"_startPosition",null),P(F(s),"_zoom",void 0),P(F(s),"_drag",void 0);var o=s.el=document.createElement("div");return s.container=r,o.style.transformOrigin="0 0",s._zoom=new sm(r,o,.1,s.onZoom.bind(F(s))),s._drag=new Jc(r,s.onTranslate.bind(F(s)),s.onStart.bind(F(s))),i.on("destroy",function(){s._zoom.destroy(),s._drag.destroy()}),s.container.addEventListener("pointermove",s.pointermove.bind(F(s))),s.update(),s}return se(t,[{key:"update",value:function(){var i=this.transform;this.el.style.transform="translate(".concat(i.x,"px, ").concat(i.y,"px) scale(").concat(i.k,")")}},{key:"pointermove",value:function(i){var s=i.clientX,o=i.clientY,a=this.el.getBoundingClientRect(),l=s-a.left,h=o-a.top,u=this.transform.k;this.mouse={x:l/u,y:h/u},this.trigger("mousemove",Ls({},this.mouse))}},{key:"onStart",value:function(){this._startPosition=Ls({},this.transform)}},{key:"onTranslate",value:function(i,s){this._zoom.translating||this._startPosition&&this.translate(this._startPosition.x+i,this._startPosition.y+s)}},{key:"onZoom",value:function(i,s,o,a){this.zoom(this.transform.k*(1+i),s,o,a),this.update()}},{key:"translate",value:function(i,s){var o={transform:this.transform,x:i,y:s};this.trigger("translate",o)&&(this.transform.x=o.x,this.transform.y=o.y,this.update(),this.trigger("translated"))}},{key:"zoom",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0,l=this.transform.k,h={transform:this.transform,zoom:i,source:a};if(this.trigger("zoom",h)){var u=(l-h.zoom)/(l-i||1);this.transform.k=h.zoom||1,this.transform.x+=s*u,this.transform.y+=o*u,this.update(),this.trigger("zoomed",{source:a})}}},{key:"appendChild",value:function(i){this.el.appendChild(i)}},{key:"removeChild",value:function(i){this.el.removeChild(i)}}]),t}(Ct),am=function(n){Te(t,n);var e=Re(t);function t(r,i,s,o){var a;return ie(this,t),a=e.call(this,o),P(F(a),"connection",void 0),P(F(a),"inputNode",void 0),P(F(a),"outputNode",void 0),P(F(a),"el",void 0),a.connection=r,a.inputNode=i,a.outputNode=s,a.el=document.createElement("div"),a.el.style.position="absolute",a.el.style.zIndex="-1",a.trigger("renderconnection",{el:a.el,connection:a.connection,points:a.getPoints()}),a}return se(t,[{key:"getPoints",value:function(){var i=this.connection,s=i.input,o=i.output;if(this.inputNode.hasSocket(s)&&this.outputNode.hasSocket(o)){var a=this.outputNode.getSocketPosition(o),l=_t(a,2),h=l[0],u=l[1],d=this.inputNode.getSocketPosition(s),f=_t(d,2),p=f[0],c=f[1];return[h,u,p,c]}return[0,0,0,0]}},{key:"update",value:function(){this.trigger("updateconnection",{el:this.el,connection:this.connection,points:this.getPoints()})}}]),t}(Ct),lm=function(n){Te(t,n);var e=Re(t);function t(r,i,s){var o;return ie(this,t),o=e.call(this,s),o.trigger("rendercontrol",{el:r,control:i}),o}return se(t)}(Ct),cm=function(n){Te(t,n);var e=Re(t);function t(r,i,s,o,a){var l,h;return ie(this,t),h=e.call(this,a),P(F(h),"el",void 0),P(F(h),"type",void 0),P(F(h),"io",void 0),P(F(h),"node",void 0),h.el=r,h.type=i,h.io=s,h.node=o,h.trigger("rendersocket",(l={el:r},P(l,i,h.io),P(l,"socket",s.socket),l)),h}return se(t,[{key:"getPosition",value:function(i,s){var o=i.position,a=this.el,l=im(a,s),h=l.x,u=l.y;return[o[0]+h+a.offsetWidth/2,o[1]+u+a.offsetHeight/2]}}]),t}(Ct),um=function(n){Te(t,n);var e=Re(t);function t(r,i,s){var o;return ie(this,t),o=e.call(this,s),P(F(o),"node",void 0),P(F(o),"component",void 0),P(F(o),"sockets",new Map),P(F(o),"controls",new Map),P(F(o),"el",void 0),P(F(o),"_startPosition",[]),P(F(o),"_drag",void 0),o.node=r,o.component=i,o.el=document.createElement("div"),o.el.style.position="absolute",o.el.addEventListener("contextmenu",function(a){return o.trigger("contextmenu",{e:a,node:o.node})}),o._drag=new Jc(o.el,o.onTranslate.bind(F(o)),o.onSelect.bind(F(o)),function(){o.trigger("nodedraged",r),o.trigger("nodedragged",r)}),o.trigger("rendernode",{el:o.el,node:r,component:i.data,bindSocket:o.bindSocket.bind(F(o)),bindControl:o.bindControl.bind(F(o))}),o.update(),o}return se(t,[{key:"clearSockets",value:function(){var i=this,s=[].concat(De(this.node.inputs.values()),De(this.node.outputs.values()));this.sockets.forEach(function(o){s.includes(o.io)||i.sockets.delete(o.io)})}},{key:"bindSocket",value:function(i,s,o){this.clearSockets(),this.sockets.set(o,new cm(i,s,o,this.node,this))}},{key:"bindControl",value:function(i,s){this.controls.set(s,new lm(i,s,this))}},{key:"hasSocket",value:function(i){return this.sockets.has(i)}},{key:"getSocketPosition",value:function(i){var s=this.sockets.get(i);if(!s)throw new Error("Socket not found for ".concat(i.name," with key ").concat(i.key));return s.getPosition(this.node,this.el)}},{key:"onSelect",value:function(i){var s={node:this.node,accumulate:i.ctrlKey,e:i};this.onStart(),this.trigger("multiselectnode",s),this.trigger("selectnode",s)}},{key:"onStart",value:function(){this._startPosition=De(this.node.position)}},{key:"onTranslate",value:function(i,s){this.trigger("translatenode",{node:this.node,dx:i,dy:s})}},{key:"onDrag",value:function(i,s){var o=this._startPosition[0]+i,a=this._startPosition[1]+s;this.translate(o,a)}},{key:"translate",value:function(i,s){var o=this.node,a={node:o,x:i,y:s};if(this.trigger("nodetranslate",a)){var l=_t(o.position,2),h=l[0],u=l[1],d=[h,u];o.position[0]=a.x,o.position[1]=a.y,this.update(),this.trigger("nodetranslated",{node:o,prev:d})}}},{key:"update",value:function(){var i=_t(this.node.position,2),s=i[0],o=i[1];this.el.style.transform="translate(".concat(s,"px, ").concat(o,"px)")}},{key:"remove",value:function(){}},{key:"destroy",value:function(){this._drag.destroy()}}]),t}(Ct),hm=function(n){Te(t,n);var e=Re(t);function t(r,i,s){var o;return ie(this,t),o=e.call(this,s),P(F(o),"container",void 0),P(F(o),"components",void 0),P(F(o),"nodes",new Map),P(F(o),"connections",new Map),P(F(o),"area",void 0),o.container=r,o.components=i,o.container.style.overflow="hidden",o.container.addEventListener("click",o.click.bind(F(o))),o.container.addEventListener("contextmenu",function(a){return o.trigger("contextmenu",{e:a,view:F(o)})}),s.on("destroy",bt("resize",o.resize.bind(F(o)))),s.on("destroy",function(){return o.nodes.forEach(function(a){return a.destroy()})}),o.on("nodetranslated",o.updateConnections.bind(F(o))),o.on("rendersocket",function(a){var l=a.input,h=a.output,u=Array.from(o.connections.entries()),d=u.filter(function(f){var p=_t(f,1),c=p[0];return c.input===l||c.output===h});d.forEach(function(f){var p=_t(f,2);p[0];var c=p[1];return requestAnimationFrame(function(){return c.update()})})}),o.area=new om(r,F(o)),o.container.appendChild(o.area.el),o}return se(t,[{key:"addNode",value:function(i){var s=this.components.get(i.name);if(!s)throw new Error("Component ".concat(i.name," not found"));var o=new um(i,s,this);this.nodes.set(i,o),this.area.appendChild(o.el)}},{key:"removeNode",value:function(i){var s=this.nodes.get(i);this.nodes.delete(i),s&&(this.area.removeChild(s.el),s.destroy())}},{key:"addConnection",value:function(i){if(!i.input.node||!i.output.node)throw new Error("Connection input or output not added to node");var s=this.nodes.get(i.input.node),o=this.nodes.get(i.output.node);if(!s||!o)throw new Error("View node not found for input or output");var a=new am(i,s,o,this);this.connections.set(i,a),this.area.appendChild(a.el)}},{key:"removeConnection",value:function(i){var s=this.connections.get(i);this.connections.delete(i),s&&this.area.removeChild(s.el)}},{key:"updateConnections",value:function(i){var s=this,o=i.node;o.getConnections().forEach(function(a){var l=s.connections.get(a);if(!l)throw new Error("Connection view not found");l.update()})}},{key:"resize",value:function(){var i=this.container;if(!i.parentElement)throw new Error("Container doesn't have parent element");var s=i.parentElement.clientWidth,o=i.parentElement.clientHeight;i.style.width=s+"px",i.style.height=o+"px"}},{key:"click",value:function(i){var s=this.container;s===i.target&&this.trigger("click",{e:i,container:s})}}]),t}(Ct),fm=function(){function n(){ie(this,n),P(this,"list",[])}return se(n,[{key:"add",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;r?this.contains(t)||this.list.push(t):this.list=[t]}},{key:"clear",value:function(){this.list=[]}},{key:"remove",value:function(t){this.list.splice(this.list.indexOf(t),1)}},{key:"contains",value:function(t){return this.list.indexOf(t)!==-1}},{key:"each",value:function(t){this.list.forEach(t)}}]),n}(),Gc=se(function n(e){ie(this,n),P(this,"handlers",void 0),this.handlers=Ls({warn:[console.warn],error:[console.error],componentregister:[],destroy:[]},e)}),dm=function(n){Te(t,n);var e=Re(t);function t(){return ie(this,t),e.call(this,{nodecreate:[],nodecreated:[],noderemove:[],noderemoved:[],connectioncreate:[],connectioncreated:[],connectionremove:[],connectionremoved:[],translatenode:[],nodetranslate:[],nodetranslated:[],nodedraged:[],nodedragged:[],selectnode:[],multiselectnode:[],nodeselect:[],nodeselected:[],rendernode:[],rendersocket:[],rendercontrol:[],renderconnection:[],updateconnection:[],keydown:[],keyup:[],translate:[],translated:[],zoom:[],zoomed:[],click:[],mousemove:[],contextmenu:[],import:[],export:[],process:[],clear:[]})}return se(t)}(Gc),pm=function(n){Te(t,n);var e=Re(t);function t(r,i){var s;return ie(this,t),s=e.call(this,r,new dm),P(F(s),"nodes",[]),P(F(s),"selected",new fm),P(F(s),"view",void 0),s.view=new hm(i,s.components,F(s)),s.on("destroy",bt("keydown",function(o){return s.trigger("keydown",o)})),s.on("destroy",bt("keyup",function(o){return s.trigger("keyup",o)})),s.on("selectnode",function(o){var a=o.node,l=o.accumulate;return s.selectNode(a,l)}),s.on("nodeselected",function(){return s.selected.each(function(o){var a=s.view.nodes.get(o);a&&a.onStart()})}),s.on("translatenode",function(o){var a=o.dx,l=o.dy;return s.selected.each(function(h){var u=s.view.nodes.get(h);u&&u.onDrag(a,l)})}),s}return se(t,[{key:"addNode",value:function(i){this.trigger("nodecreate",i)&&(this.nodes.push(i),this.view.addNode(i),this.trigger("nodecreated",i))}},{key:"removeNode",value:function(i){var s=this;this.trigger("noderemove",i)&&(i.getConnections().forEach(function(o){return s.removeConnection(o)}),this.nodes.splice(this.nodes.indexOf(i),1),this.view.removeNode(i),this.trigger("noderemoved",i))}},{key:"connect",value:function(i,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.trigger("connectioncreate",{output:i,input:s}))try{var a=i.connectTo(s);a.data=o,this.view.addConnection(a),this.trigger("connectioncreated",a)}catch(l){this.trigger("warn",l)}}},{key:"removeConnection",value:function(i){this.trigger("connectionremove",i)&&(this.view.removeConnection(i),i.remove(),this.trigger("connectionremoved",i))}},{key:"selectNode",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.nodes.indexOf(i)===-1)throw new Error("Node not exist in list");this.trigger("nodeselect",i)&&(this.selected.add(i,s),this.trigger("nodeselected",i))}},{key:"getComponent",value:function(i){var s=this.components.get(i);if(!s)throw"Component ".concat(i," not found");return s}},{key:"register",value:function(i){Fr(pn(t.prototype),"register",this).call(this,i),i.editor=this}},{key:"clear",value:function(){var i=this;De(this.nodes).forEach(function(s){return i.removeNode(s)}),this.trigger("clear")}},{key:"toJSON",value:function(){var i={id:this.id,nodes:{}};return this.nodes.forEach(function(s){return i.nodes[s.id]=s.toJSON()}),this.trigger("export",i),i}},{key:"beforeImport",value:function(i){var s=xo.validate(this.id,i);return s.success?(this.silent=!0,this.clear(),this.trigger("import",i),!0):(this.trigger("warn",s.msg),!1)}},{key:"afterImport",value:function(){return this.silent=!1,!0}},{key:"fromJSON",value:function(){var r=ye(G().mark(function s(o){var a=this,l;return G().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this.beforeImport(o)){u.next=2;break}return u.abrupt("return",!1);case 2:return l={},u.prev=3,u.next=6,Promise.all(Object.keys(o.nodes).map(function(){var d=ye(G().mark(function f(p){var c,g;return G().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return c=o.nodes[p],g=a.getComponent(c.name),y.next=4,g.build(rr.fromJSON(c));case 4:l[p]=y.sent,a.addNode(l[p]);case 6:case"end":return y.stop()}},f)}));return function(f){return d.apply(this,arguments)}}()));case 6:Object.keys(o.nodes).forEach(function(d){var f=o.nodes[d],p=l[d];Object.keys(f.outputs).forEach(function(c){var g=f.outputs[c];g.connections.forEach(function(m){var y=m.node,w=m.data,_=p.outputs.get(c),b=l[y].inputs.get(m.input);if(!_||!b)return a.trigger("error","IO not found for node ".concat(p.id));a.connect(_,b,w)})})}),u.next=13;break;case 9:return u.prev=9,u.t0=u.catch(3),this.trigger("warn",u.t0),u.abrupt("return",!this.afterImport());case 13:return u.abrupt("return",this.afterImport());case 14:case"end":return u.stop()}},s,this,[[3,9]])}));function i(s){return r.apply(this,arguments)}return i}()}]),t}(Vc),Kc=function(n){Te(t,n);var e=Re(t);function t(r,i,s){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;return ie(this,t),e.call(this,r,i,s,o)}return se(t,[{key:"hasConnection",value:function(){return this.connections.length>0}},{key:"connectTo",value:function(i){if(!this.socket.compatibleWith(i.socket))throw new Error("Sockets not compatible");if(!i.multipleConnections&&i.hasConnection())throw new Error("Input already has one connection");if(!this.multipleConnections&&this.hasConnection())throw new Error("Output already has one connection");var s=new Wc(this,i);return this.connections.push(s),s}},{key:"connectedTo",value:function(i){return this.connections.some(function(s){return s.input===i})}},{key:"toJSON",value:function(){return{connections:this.connections.map(function(i){if(!i.input.node)throw new Error("Node not added to Input");return{node:i.input.node.id,input:i.input.key,data:i.data}})}}}]),t}(ko),Zc=function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ie(this,n),P(this,"name",void 0),P(this,"data",void 0),P(this,"compatible",[]),this.name=e,this.data=t,this.compatible=[]}return se(n,[{key:"combineWith",value:function(t){this.compatible.push(t)}},{key:"compatibleWith",value:function(t){return this===t||this.compatible.includes(t)}}]),n}();function gm(n,e){return n.filter(function(t){return e.indexOf(t)!==-1})}var Yc=function(){function n(e){ie(this,n),P(this,"nodes",void 0),this.nodes=e}return se(n,[{key:"extractInputNodes",value:function(t){var r=this;return Object.keys(t.inputs).reduce(function(i,s){var o=t.inputs[s].connections,a=(o||[]).reduce(function(l,h){return[].concat(De(l),[r.nodes[h.node]])},[]);return[].concat(De(i),De(a))},[])}},{key:"findSelf",value:function(t,r){var i=gm(t,r);if(i.length)return i[0];var s=pl(r),o;try{for(s.s();!(o=s.n()).done;){var a=o.value,l=[a].concat(De(t)),h=this.findSelf(l,this.extractInputNodes(a));if(h)return h}}catch(u){s.e(u)}finally{s.f()}return null}},{key:"detect",value:function(){var t=this,r=Object.keys(this.nodes).map(function(l){return t.nodes[l]}),i=pl(r),s;try{for(i.s();!(s=i.n()).done;){var o=s.value,a=this.findSelf([o],this.extractInputNodes(o));if(a)return a}}catch(l){i.e(l)}finally{i.f()}return null}}]),n}(),He={AVAILABLE:0,PROCESSED:1,ABORT:2},mm=function(n){Te(t,n);var e=Re(t);function t(){return ie(this,t),e.call(this,{})}return se(t)}(Gc),ym=function(n){Te(t,n);var e=Re(t);function t(r){var i;return ie(this,t),i=e.call(this,r,new mm),P(F(i),"args",[]),P(F(i),"data",null),P(F(i),"state",He.AVAILABLE),P(F(i),"forwarded",new Set),P(F(i),"onAbort",function(){}),i}return se(t,[{key:"clone",value:function(){var i=new t(this.id);return this.components.forEach(function(s){return i.register(s)}),i}},{key:"throwError",value:function(){var r=ye(G().mark(function s(o){var a,l=arguments;return G().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a=l.length>1&&l[1]!==void 0?l[1]:null,u.next=3,this.abort();case 3:return this.trigger("error",{message:o,data:a}),this.processDone(),u.abrupt("return","error");case 6:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"processStart",value:function(){return this.state===He.AVAILABLE?(this.state=He.PROCESSED,!0):(this.state===He.ABORT||console.warn(`The process is busy and has not been restarted.
                Use abort() to force it to complete`),!1)}},{key:"processDone",value:function(){var i=this.state!==He.ABORT;return this.state=He.AVAILABLE,i||(this.onAbort(),this.onAbort=function(){}),i}},{key:"abort",value:function(){var r=ye(G().mark(function s(){var o=this;return G().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",new Promise(function(h){o.state===He.PROCESSED?(o.state=He.ABORT,o.onAbort=h):o.state===He.ABORT?(o.onAbort(),o.onAbort=h):h()}));case 1:case"end":return l.stop()}},s)}));function i(){return r.apply(this,arguments)}return i}()},{key:"lock",value:function(){var r=ye(G().mark(function s(o){return G().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",new Promise(function(h){o.unlockPool=o.unlockPool||[],o.busy&&!o.outputData?o.unlockPool.push(h):h(),o.busy=!0}));case 1:case"end":return l.stop()}},s)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"unlock",value:function(i){i.unlockPool.forEach(function(s){return s()}),i.unlockPool=[],i.busy=!1}},{key:"extractInputData",value:function(){var r=ye(G().mark(function s(o){var a=this,l,h,u,d,f,p,c;return G().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:l={},h=0,u=Object.keys(o.inputs);case 2:if(!(h<u.length)){m.next=13;break}return d=u[h],f=o.inputs[d],p=f.connections,m.next=8,Promise.all(p.map(function(){var y=ye(G().mark(function w(_){var b,v;return G().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return b=a.data.nodes[_.node],k.next=3,a.processNode(b);case 3:if(v=k.sent,v){k.next=8;break}a.abort(),k.next=9;break;case 8:return k.abrupt("return",v[_.output]);case 9:case"end":return k.stop()}},w)}));return function(w){return y.apply(this,arguments)}}()));case 8:c=m.sent,l[d]=c;case 10:h++,m.next=2;break;case 13:return m.abrupt("return",l);case 14:case"end":return m.stop()}},s)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"processWorker",value:function(){var r=ye(G().mark(function s(o){var a,l,h;return G().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.extractInputData(o);case 2:return a=d.sent,l=this.components.get(o.name),h={},d.prev=5,d.next=8,l.worker.apply(l,[o,a,h].concat(De(this.args)));case 8:d.next=14;break;case 10:d.prev=10,d.t0=d.catch(5),this.abort(),this.trigger("warn",d.t0);case 14:return d.abrupt("return",h);case 15:case"end":return d.stop()}},s,this,[[5,10]])}));function i(s){return r.apply(this,arguments)}return i}()},{key:"processNode",value:function(){var r=ye(G().mark(function s(o){return G().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(this.state===He.ABORT||!o)){l.next=2;break}return l.abrupt("return",null);case 2:return l.next=4,this.lock(o);case 4:if(o.outputData){l.next=8;break}return l.next=7,this.processWorker(o);case 7:o.outputData=l.sent;case 8:return this.unlock(o),l.abrupt("return",o.outputData);case 10:case"end":return l.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"forwardProcess",value:function(){var r=ye(G().mark(function s(o){var a=this;return G().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(this.state!==He.ABORT){h.next=2;break}return h.abrupt("return",null);case 2:return h.next=4,Promise.all(Object.keys(o.outputs).map(function(){var u=ye(G().mark(function d(f){var p;return G().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return p=o.outputs[f],g.next=3,Promise.all(p.connections.map(function(){var m=ye(G().mark(function y(w){var _;return G().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(_=a.data.nodes[w.node],a.forwarded.has(_)){v.next=7;break}return a.forwarded.add(_),v.next=5,a.processNode(_);case 5:return v.next=7,a.forwardProcess(_);case 7:case"end":return v.stop()}},y)}));return function(y){return m.apply(this,arguments)}}()));case 3:return g.abrupt("return",g.sent);case 4:case"end":return g.stop()}},d)}));return function(d){return u.apply(this,arguments)}}()));case 4:return h.abrupt("return",h.sent);case 5:case"end":return h.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"copy",value:function(i){return i=Object.assign({},i),i.nodes=Object.assign({},i.nodes),Object.keys(i.nodes).forEach(function(s){i.nodes[s]=Object.assign({},i.nodes[s])}),i}},{key:"validate",value:function(){var r=ye(G().mark(function s(o){var a,l,h;return G().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(a=xo.validate(this.id,o),l=new Yc(o.nodes),a.success){d.next=6;break}return d.next=5,this.throwError(a.msg);case 5:return d.abrupt("return",d.sent);case 6:if(h=l.detect(),!h){d.next=11;break}return d.next=10,this.throwError("Recursion detected",h);case 10:return d.abrupt("return",d.sent);case 11:return d.abrupt("return",!0);case 12:case"end":return d.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"processStartNode",value:function(){var r=ye(G().mark(function s(o){var a;return G().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(o){h.next=2;break}return h.abrupt("return");case 2:if(a=this.data.nodes[o],a){h.next=7;break}return h.next=6,this.throwError("Node with such id not found");case 6:return h.abrupt("return",h.sent);case 7:return h.next=9,this.processNode(a);case 9:return h.next=11,this.forwardProcess(a);case 11:case"end":return h.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"processUnreachable",value:function(){var r=ye(G().mark(function s(){var o,a,l;return G().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:o=this.data,u.t0=G().keys(o.nodes);case 2:if((u.t1=u.t0()).done){u.next=12;break}if(a=u.t1.value,l=o.nodes[a],!(typeof l.outputData>"u")){u.next=10;break}return u.next=8,this.processNode(l);case 8:return u.next=10,this.forwardProcess(l);case 10:u.next=2;break;case 12:case"end":return u.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"process",value:function(){var r=ye(G().mark(function s(o){var a,l,h,u,d=arguments;return G().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(a=d.length>1&&d[1]!==void 0?d[1]:null,this.processStart()){p.next=3;break}return p.abrupt("return");case 3:if(this.validate(o)){p.next=5;break}return p.abrupt("return");case 5:for(this.data=this.copy(o),l=d.length,h=new Array(l>2?l-2:0),u=2;u<l;u++)h[u-2]=d[u];return this.args=h,this.forwarded=new Set,p.next=11,this.processStartNode(a);case 11:return p.next=13,this.processUnreachable();case 13:return p.abrupt("return",this.processDone()?"success":"aborted");case 14:case"end":return p.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()}]),t}(Vc),wm={Engine:ym,Recursion:Yc,Component:Hc,Control:rm,Connection:Wc,Emitter:Ct,Input:qc,IO:ko,Node:rr,NodeEditor:pm,Output:Kc,Socket:Zc};class kt extends Zc{constructor(e,t,r){super(e,r),this.customActions=new Map,this.opts=r||{},this.type=t}get format(){return this.opts.format}get array(){return this.opts.array||!1}get customAction(){return this.opts.customAction}get customSettings(){return this.opts.customSettings}compatibleWith(e,t=!1){return t?super.compatibleWith(e):e.compatibleWith(this,!0)}isValidUrl(e){let t;if(!(typeof e=="string"&&e.length>0))return!1;try{t=new URL(e)}catch{return!1}return t.protocol==="http:"||t.protocol==="https:"}}class Jt extends kt{compatibleWith(e,t){const r=this;return r.type?["string","image","audio","document","file"].includes(r.type):e instanceof Jt}detectMimeType(e,t){}async persistObject(e,t,r){var s;if((t.ticket||t.fid)&&t.url&&!t.data)return await Promise.resolve(t);r??(r={}),r.mimeType??(r.mimeType=(s=this.detectMimeType)==null?void 0:s.call(this,e,t));const i={userId:e.userId,jobId:e.jobId,...r};return e.app.cdn.putTemp(t,i)}async persistObjects(e,t,r){return await Promise.all(t.map(async i=>await this.persistObject(e,i,r)))}async _inputFromString(e,t){if(typeof t!="string")return t;const i=t.split(`
`).map(s=>s.trim()).filter(s=>s.length);return await Promise.all(i.map(async s=>await this.persistObject(e,s)))}async _handleSingleObject(e,t,r=!1){var l,h,u,d;if(!t)return null;let i=null;const s=(l=this.format)!=null&&l.includes("base64")?"base64":void 0,o=s&&((h=this.format)==null?void 0:h.includes("withHeader"));if(t.fid)!r&&s!=="base64"?i=await e.app.cdn.find(t.fid):i=await e.app.cdn.get(t,null,s);else if(t instanceof Buffer)i=await this.persistObject(e,t);else if(typeof t=="string"){if(this.isValidUrl(t))i=await this.persistObject(e,t.trim());else if((u=t==null?void 0:t.startsWith)!=null&&u.call(t,"fid://")){const[f,p]=t.split("://")[1].split(".");i=await e.app.cdn.get({fid:f},null,s)}else t.length>0;i=await this.persistObject(e,t)}let a=null;return i&&i.fid?s==="base64"?a=i.asBase64(o):a=i:console.error("File socket: Failure to process value",t),a!==null&&((d=this.customSettings)!=null&&d.do_no_return_data)&&s!=="base64"&&delete a.data,a}async _handleObjectArray(e,t,r=!1){return t?(Array.isArray(t)||(t=[t]),t=t.filter(i=>i!==null),await Promise.all(t.map(async i=>await this._handleSingleObject(e,i,r)))):null}async _handlePort(e,t,r){return t=await this._inputFromString(e,t),Array.isArray(t)||(t=[t]),this.array?await this._handleObjectArray(e,t,r):await this._handleSingleObject(e,t[0],r)}async handleInput(e,t){return await this._handlePort(e,t,!0)}async handleOutput(e,t){return await this._handlePort(e,t,!1)}}class So extends Jt{mightBeUtf8PlainText(e){const r=e.length*.05;let i=0;for(const s of e){const o=s.charCodeAt(0);if((o>=0&&o<=31||o>=127&&o<=159)&&(i++,i>r))return!1}return!0}detectMimeType(e,t){if(t&&typeof t=="string"&&this.mightBeUtf8PlainText(t))return"text/plain"}compatibleWith(e,t){const r=this;return r.type?["string","text","document"].includes(r.type):e instanceof So}}class vm extends kt{async handleInput(e,t){return Array.isArray(t)&&(t=t[0]),t}async handleOutput(e,t){return await this.handleInput(e,t)}}class bm extends kt{async handleSingleValue(e,t){if(t==null)return null;if(typeof t=="object")return t;if(typeof t=="string")try{return JSON.parse(t)}catch(r){return console.error("Error parsing object socket",r),null}return t}async _handlePort(e,t){const r=Array.isArray(t);let i=t;if(r&&!this.array?i=t.length>0?t[0]:[]:!r&&this.array&&(i=[t]),Array.isArray(i)){let s=await Promise.all(i.map(async o=>await this.handleSingleValue(e,o)));return s=s.filter(o=>o!=null),s.length>0?s:null}else{const s=await this.handleSingleValue(e,i);return s??null}}async handleInput(e,t){return await this._handlePort(e,t)}async handleOutput(e,t){return await this._handlePort(e,t)}}class Eo extends Jt{compatibleWith(e,t){const r=this;return r.type?["string","file","image"].includes(r.type):e instanceof Eo}}class Co extends Jt{compatibleWith(e,t){const r=this;return r.type?["string","file","video"].includes(r.type):e instanceof Co}}class Ao extends Jt{compatibleWith(e,t){const r=this;return r.type?["string","file","audio"].includes(r.type):e instanceof Ao}}class Oo extends kt{compatibleWith(e,t){const r=this;return r.type?["integer","number","float"].includes(r.type):e instanceof kt}async handleInput(e,t){return Array.isArray(t)&&(t=t[0]),t?t==="inf"?1/0:t==="-inf"?-1/0:t==="nan"?NaN:typeof t!="number"?Number(t):t:0}async handleOutput(e,t){return await this.handleInput(e,t)}}class Ai extends kt{compatibleWith(e,t){const r=this;return r.type?["string","object","number","integer","float","file","image","audio","document","text"].includes(r.type):e instanceof Ai}convertSingleValue(e){var t;return e==null||e===void 0?((t=this.customSettings)==null?void 0:t.null_value)||"":typeof e=="object"?e instanceof Date?e.toISOString():e.fid&&e.furl?e.furl:JSON.stringify(e,null,2):typeof e=="string"?e:typeof e=="number"?e.toString():typeof e=="boolean"?e?"true":"false":JSON.stringify(e,null,2)}async handleInput(e,t){var i,s;const r=((i=this.customSettings)==null?void 0:i.array_separator)??`
`;return this.array&&typeof t=="string"&&(t=t.split(r)),Array.isArray(t)||(t=[t]),t=t.map(this.convertSingleValue.bind(this)),(s=this.customSettings)!=null&&s.filter_empty&&(t=t.filter(o=>o)),this.array?t:t.join(r)}async handleOutput(e,t){return await this.handleInput(e,t)}}class _m extends kt{async handleInput(e,t){return Array.isArray(t)&&(t=t[0]),!!t}async handleOutput(e,t){return await this.handleInput(e,t)}}class km extends kt{compatibleWith(e,t){return!0}async handleInput(e,t){return t}async handleOutput(e,t){return t}}const Ie=new Map;Ie.set("boolean",_m);Ie.set("number",Oo);Ie.set("integer",Oo);Ie.set("float",Oo);Ie.set("string",Ai);Ie.set("text",Ai);Ie.set("json",bm);Ie.set("file",Jt);Ie.set("image",Eo);Ie.set("audio",Ao);Ie.set("document",So);Ie.set("video",Co);Ie.set("any",km);const gl=function(n,e){let t=n;return e.array==!0&&(t+="Array"),e.format!==void 0&&(t+=`_${e.format}`),t};class Lt{constructor(){this.isSchemaObject=e=>"type"in e||"$ref"in e,this.sockets=new Map}static getSingleton(){return Lt.instance??(Lt.instance=new Lt),Lt.instance}constructSocket(e,t){let r=Ie.get(e);r===void 0&&(console.warn(`Unknown socketType: ${e}, creating primimtive`),r=vm);const i=gl(e,t),s=new r(i,e,{...t});return this.sockets.forEach(o=>{o.type===e&&(o.combineWith(s),s.combineWith(o))}),this.sockets.set(s.name,s),s}getOrCreateSocket(e,t){["image","audio","document","cdnObject","object","video","file"].forEach(s=>{e.startsWith(s)&&(e=s)}),e==="object"&&(e="json"),e.startsWith("cdnObject")&&(e="file"),e.includes("Array")&&(t.array=!0),e.includes("B64")&&(t.format="base64");const r=gl(e,t);return this.has(r)?this.get(r):this.constructSocket(e,t)}add(e,t){this.sockets.set(e,t)}get(e){return this.sockets.get(e)}has(e){return this.sockets.has(e)}}var Xc=(n=>(n[n.NO_EXECUTE=1]="NO_EXECUTE",n[n.HAS_NATIVE_CODE=2]="HAS_NATIVE_CODE",n[n.UNIQUE_PER_WORKFLOW=3]="UNIQUE_PER_WORKFLOW",n))(Xc||{});function Qc(n){if(Array.isArray(n)){if(n.length===0)return[];if(typeof n[0]=="string")return n.map(e=>({title:e,value:e}));if(typeof n[0]=="object"&&"title"in n[0]&&"value"in n[0])return n}return typeof n=="object"&&"block"in n&&"map"in n,n}class si{constructor(){this.data={}}create(e,t,r,i,s){return this.data.name=e,this.data.customSocket=i,this.data.socketOpts={...s},r==="array"&&(r="object",this.data.socketOpts.array=!0),this.data.type=r,this.data.dataTypes=[r],this.data.customData={},this.data.title=e,this.data.source={sourceType:t==="input"?"requestBody":"responseBody"},this}setRequired(e){return this.data.required=e,this}setHidden(e){return this.data.hidden=e,this}set(e,t){return this.data[e]=t,this}setFormat(e){return this.data.format=e,this}setDefault(e){return this.data.default=e,this}setControl(e){return e.dataType=this.data.type,this.data.control=e,this}allowMultiple(e=!0){return this.data.allowMultiple=e,this.data.socketOpts.array=!0,this}setConstraints(e,t,r){return this.data.minimum=e,this.data.maximum=t,this.data.step=r,this}setChoices(e,t){return t!=null&&(this.data.default=t),e!=null&&(this.data.choices=Qc(e),this.data.choices||(this.data.choices=[{title:"(default)",value:t??""}])),this}setCustom(e,t){return this.data.customData[e]=t,this}toOmniIO(){var e;return(e=this.data).title??(e.title=this.data.name),this.data}}class eu{constructor(e){this.data={name:e},this.data.customData={}}create(e,t){return this.data.name=e,this.data.dataType=t,this}setRequired(e){return this.data.required=e,this}setHidden(e){return this.data.hidden=e,this}setCustom(e,t){return this.data.customData[e]=t,this}setControlType(e){return this.data.controlType=e,this}set(e,t){return this.data[e]=t,this}setChoices(e,t){return this.data.default=t,this.data.choices=Qc(e),this.data.choices||(this.data.choices=[{title:"(default)",value:t??""}]),this}setReadonly(e){return this.data.readonly=e,this}setConstraints(e,t,r){return e!=null&&(this.data.minimum=e),t!=null&&(this.data.maximum=t),r!=null&&(this.data.step=r),this}setDefault(e){return this.data.default=e,this}toOmniControl(){var e;return(e=this.data).title??(e.title=this.data.name),this.data}}class tu{constructor(){this.data={}}fromJSON(e){return this.data=JSON.parse(JSON.stringify(e)),this}}class xm extends tu{constructor(){super(),this.data.type="OAIComponent31",this.data.flags=0,this.data.macros={},this.data.origin="omnitool:Composer",this.data.customData={}}dependsOn(e){return this.data.dependsOn=e,this}fromScratch(){return this.data.apiNamespace=this.data.displayNamespace,this.data.apiOperationId=this.data.displayOperationId,this.data.responseContentType="application/json",this.data.category="Utilities",this.data.tags=["default"],this}createInput(e,t,r,i){return new si().create(e,"input",t,r,i||{})}addInput(e){return this.data.inputs=this.data.inputs??{},this.data.inputs[e.name]=e,this}createOutput(e,t,r,i){return new si().create(e,"output",t,r,i||{})}addOutput(e){return this.data.outputs=this.data.outputs??{},this.data.outputs[e.name]=e,this}setTags(e){return this.data.tags=e,this}setRenderTemplate(e){return this.data.renderTemplate=e,this}create(e,t){return this.data.displayNamespace=e,this.data.displayOperationId=t,this}set(e,t){return this.data[e]=t,this}setMethod(e){return this.data.method=e,this}useAPI(e,t){return this.data.apiNamespace=e,this.data.apiOperationId=t,this}setMeta(e){return this.data.meta=e,this}setFlags(e){return this.data.flags=e,this}setFlag(e,t=!0){const r=1<<e;return t?this.data.flags=this.data.flags|r:this.data.flags=this.data.flags&~r,this}setMacro(e,t){return this.data.macros[e]=t,t instanceof Function&&this.setFlag(Xc.HAS_NATIVE_CODE),this}createControl(e,t){return new eu(e).create(e,t)}setCustom(e,t){var r;return(r=this.data).customData??(r.customData={}),this.data.customData[e]=t,this}addControl(e){return this.data.controls=this.data.controls??{},this.data.controls[e.name]=e,this}toJSON(){return this.data}}class Sm extends tu{constructor(){super(),this.data.macros={},this.data.origin="omnitool:Composer",this.data.customData={}}fromComponent(e,t){return this.data.apiNamespace=e,this.data.apiOperationId=t,this}createInput(e,t,r){return new si().create(e,"input",t,r)}addInput(e){return this.data.inputs=this.data.inputs??{},this.data.inputs[e.name]=e,this}createOutput(e,t,r){return new si().create(e,"output",t,r)}addOutput(e){return this.data.outputs=this.data.outputs??{},this.data.outputs[e.name]=e,this}create(e,t){return this.data.displayNamespace=e,this.data.displayOperationId=t,this}set(e,t){return this.data[e]=t,this}useAPI(e,t){return this.data.apiNamespace=e,this.data.apiOperationId=t,this}setMeta(e){return this.data.meta=e,this}setCustom(e,t){var r;return(r=this.data).customData??(r.customData={}),this.data.customData[e]=t,this}createControl(e){return new eu(e).create(e)}addControl(e){return this.data.controls=this.data.controls??{},this.data.controls[e.name]=e,this}hideExcept(e,t){(e==null?void 0:e.length)>0&&(this.data.scripts=this.data.scripts??{},this.data.scripts["hideExcept:inputs"]=e),(t==null?void 0:t.length)>0&&(this.data.scripts=this.data.scripts??{},this.data.scripts["hideExcept:outputs"]=t)}toJSON(){return this.data}}class Zn extends wm.Control{constructor(e,t,r){super(e.name),this.data=JSON.parse(JSON.stringify(e)),this.emitter=r,this.props={ikey:e.name},this.component=t,t||console.error("Could not find component for "+e.controlType)}async initChoices(){var e,t,r;if(this.data.choices){const i=this.data.choices;if(Array.isArray(i)&&(this.data.choices=i.map(function(s){return typeof s=="object"?s:{value:s,title:s}})),typeof this.data.choices=="object"){const s=this.data.choices;if(s.block){let o=["Internal Error Fetching choices"];try{o=await globalThis.client.runBlock({block:s.block,args:s.args||{},cache:s.cache??s.map.cache??"none"})}catch(h){console.error("Could not load choices for "+this.data.name+": "+h.message),o=["ERROR: "+h.message,this.data.default]}o.error&&(console.error("Could not load choices for "+this.data.name+": "+o.error.message),o=["ERROR: "+o.error,this.data.default]);const a=(e=s.map)==null?void 0:e.root;a&&o[a]!=null&&(o=Array.isArray(o[a])?o[a]:Array.from(Object.values(o[a]))),Array.isArray(o)||(o=Array.from(Object.values(o)));const l=new RegExp((r=(t=s.map)==null?void 0:t.filter)==null?void 0:r.value);this.data.choices=o.map(h=>{var d,f;let u={value:h,title:h,description:""};return(d=s.map)!=null&&d.value&&((f=s.map)!=null&&f.title)&&(u={value:h[s.map.value],title:h[s.map.title],description:h[s.map.description]||""}),u}).filter(h=>h.value&&l.test(h.title)).sort((h,u)=>u.title.localeCompare(h.title))}}}}get dataType(){return this.data.dataType??"string"}get controlType(){return console.log("Access to field controlType on control"),this.data.controlType}get type(){return console.trace(),console.log("Access to deprecated field type on control"),this.data.dataType}get opts(){return this.data}get displays(){return this.data.displays??null}get minimum(){return this.data.minimum}get description(){return this.data.description}get title(){return this.data.title??this.data.name}get maximum(){return this.data.maximum}get customData(){return this.data.customData??{}}custom(e){var t;return((t=this.data.customData)==null?void 0:t[e])??null}get choices(){return this.data.choices??["(default)"]}get readonly(){return this.data.readonly??!1}_formatValue(e){return e&&((this.dataType==="number"||this.dataType=="float")&&typeof e=="string"||this.dataType==="integer"&&typeof e=="string"?e=parseFloat(e):this.dataType==="boolean"&&typeof e=="number"?e=e!=0:this.dataType==="boolean"&&typeof e=="string"&&(e=[!0,"true","1","on","active"].includes(e.toLowerCase()))),e}setValue(e){this.displays||this.readonly||(e=this._formatValue(e),this.putData(this.props.ikey,e),this.update())}static async fromControl(e,t){const r=Dt.getInstance().get(e.controlType),i=new Zn(e,r,t);return await i.initChoices(),i}static async fromIO(e,t,r){const i={dataType:t.type,controlType:e,name:t.name,title:t.title,choices:t.choices,description:t.description,step:t.step,default:t.default,minimum:t.minimum,maximum:t.maximum,required:t.required,...t.control||{}},s=Dt.getInstance().get(e),o=new Zn(i,s,r);return await o.initChoices(),o}}class Em extends Hc{constructor(e,t){var i,s,o,a,l,h;const r=Vg(e,t??{});super(`${r.displayNamespace}.${r.displayOperationId}`),this.data=r,(i=this.data).macros??(i.macros={}),(s=this.data).flags??(s.flags=0),(o=this.data).errors??(o.errors=[]),(a=this.data).xOmniEnabled??(a.xOmniEnabled=!0);for(const u in this.data.inputs)(l=this.data.inputs[u]).source??(l.source={sourceType:"requestBody"});for(const u in this.data.outputs)(h=this.data.outputs[u]).source??(h.source={sourceType:"responseBody"})}static create(e,t){return new xm().create(e,t)}static createPatch(e,t){return new Sm().create(e,t)}get validator(){return this._validator??null}get title(){return this.data.title}get description(){return this.data.description}get scripts(){return this.data.scripts}get flags(){return this.data.flags??0}get summary(){var e;return this.data.description??((e=this.meta.source)==null?void 0:e.summary)}get category(){return this.data.category??"Base API"}get custom(){return this.data.customData||{}}get tags(){return this.data.tags}get apiKey(){return`${this.data.apiNamespace}.${this.data.apiOperationId}`}get apiNamespace(){return this.data.apiNamespace}get renderTemplate(){return this.data.renderTemplate||"default"}get type(){return this.data.type??"OAIComponent31"}get method(){return this.data.method}get inputs(){return this.data.inputs}get meta(){return this.data.meta??{}}get outputs(){return this.data.outputs}get macros(){return this.data.macros}get hash(){return this.data.hash}get controls(){return this.data.controls}get xOmniEnabled(){return this.data.xOmniEnabled??!0}set xOmniEnabled(e){this.data.xOmniEnabled=e}setType(e){return this.data.type=e,this}setApiOperationId(e){return this.data.apiOperationId=e,this}setApiNamespace(e){return this.data.apiNamespace=e,this}setDisplayNamespace(e){return this.data.displayNamespace=e,this}setDisplayOperationId(e){return this.data.displayOperationId=e,this}setTitle(e){return this.data.title=e,this}setMethod(e){return this.data.method=e,this}setDescription(e){return this.data.description=e,this}setUrlPath(e){return this.data.urlPath=e,this}setMeta(e){return this.data.meta=e,this}addInput(e,t){return this.data.inputs[e]=t,this}addControl(e,t){return this.data.controls[e]=t,this}addOutput(e,t){return this.data.outputs[e]=t,this}addTag(e){return this.data.tags.push(e),this}setCategory(e){return this.data.category=e,this}setRequestContentType(e){return this.data.requestContentType=e,this}setResponseContentType(e){return this.data.responseContentType=e,this}setCredentials(e){return this.data.credentials=e,this}setValidator(e){return this.data.validator=e,this}addSecurity(e){return this.data.security=this.data.security??[],this.data.security.push(e),this}setMacro(e,t){return this.data.macros[e]=t,this}pickDefaultControlFromDataType(e,t){var r;return e==="number"||e==="integer"||e==="float"?((r=t.format)!=null&&r.includes("int")?e="integer":(t.format==="float"||t.format==="double")&&(e="float"),t.step!=null||t.minimum!=null&&t.maximum!=null&&Math.abs(t.maximum-t.minimum)<=100?(e==="float"&&(t.step??(t.step=.1)),"AlpineNumWithSliderComponent"):"AlpineNumComponent"):e==="boolean"?"AlpineToggleComponent":e==="object"?"AlpineCodeMirrorComponent":e==="string"?t.format==="password"?"AlpinePasswordComponent":"AlpineTextComponent":null}pickDefaultControlFromControl(e){const t=e.controlType;if(t!=null)return t;if(e.choices!=null)return"AlpineSelectComponent";const r=e.dataType;if(r!=null){const i=this.pickDefaultControlFromDataType(r,e);if(i!=null)return i}return"AlpineLabelComponent"}pickDefaultControlFromIO(e){var o;const t=(o=e.control)==null?void 0:o.controlType;if(t!=null)return t;if(e.choices!=null)return"AlpineSelectComponent";const r=e.customSocket;if(r&&["imageArray","image","document","documentArray","audio","file","video","audioArray","fileArray"].includes(r))return"AlpineLabelComponent";const i=e.type,s=this.pickDefaultControlFromDataType(i,e);return s??"AlpineLabelComponent"}async builder(e){var t;e.title=this.title,e.description=this.description,await((t=this._builder)==null?void 0:t.call(this,e))}async workerStart(e,t){}async setControlValue(e,t,r){var i;if(this.data.controls[e]==null){omnilog.warn(this.name,"tried to update non existing control",e,` - suppressed.
Please check your component for a setComponentValue call that passes in a non existing control key.`);return}if(this.editor!=null){const s=((i=this.editor)==null?void 0:i.nodes.find(o=>o.id===r.node.id).controls.get(e))??null;s!=null&&s.setValue(t)}}async sendStatusUpdate(e,t,r){}}class Oi extends Em{constructor(e,t,r){r&&omnilog.warn("fns not implemented"),super(e,t)}getSocketForIO(e){var r;let t="object";return e.customSocket?t=e.customSocket:e.type!=null&&typeof e.type=="string"?t=e.type:((r=e.dataTypes)==null?void 0:r.length)>0?t=e.dataTypes[0]:(e.step!=null||e.maximum!=null||e.minimum!=null)&&(t="number"),Lt.getSingleton().getOrCreateSocket(t,e.socketOpts||{})}async _redraw(e){}enumerateInputs(e){return Object.assign({},e.data["x-omni-dynamicInputs"]||{},this.data.inputs)}enumerateOutputs(e){return Object.assign({},e.data["x-omni-dynamicOutputs"]||{},this.data.outputs)}async _builder(e){e.category=this.category,e.renderTemplate=this.renderTemplate,e.title=e.data["x-omni-title"]||this.title,e.summary=e.data["x-omni-summary"]||this.summary,e.namespace=this.data.displayNamespace??this.data.apiNamespace,e.meta=this.meta,e.meta.title=this.title??this.summary,e.errors=this.data.errors;const t=this.enumerateInputs(e);for(const i in t){const s=t[i];s.name??(s.name=i),s.title??(s.title=i);const o=this.pickDefaultControlFromIO(s);e.data[i]!=null&&s.default!=null&&(typeof e.data[i]!=typeof s.default||s.type==="number"&&typeof e.data[i]=="string")&&delete e.data[i];const a=await Zn.fromIO(o,s,this.editor);if(!s.hidden)if(s.readonly)e.addControl(a);else{const l=new qc(i,s.title||s.name,this.getSocketForIO(s),s.allowMultiple);l.name??(l.name=i),l.addControl(a),e.addInput(l)}}for(const i in this.controls){const s=this.controls[i];if(!s.hidden){s.name??(s.name=i),s.controlType??(s.controlType=this.pickDefaultControlFromControl(s));const o=await Zn.fromControl(s,this.editor);e.addControl(o)}}const r=this.enumerateOutputs(e);for(const i in r){const s={...r[i],name:i,title:r[i].title??i};if(!s.hidden){const o=new Kc(i,s.title||s.name,this.getSocketForIO(s));o.name??(o.name=i),e.addOutput(o)}}}async runXFunction(e,t,r){return null}async _workerStart(e,t){}async runInputScripts(e,t){return e}async runOutputScripts(e,t){return e}getRequestComponents(e,t){return{requestBody:{},parameters:[]}}prunePayload(e,t,r){}async getPayload(e){return JSON.parse(JSON.stringify({}))}worker(){throw new Error("This should never be called")}static fromJSON(e,t){const r=new Oi(e,t);if(!r.name)throw new Error;return r}toJSON(){return JSON.parse(JSON.stringify({...this.data,name:this.name}))}}class Cm extends pt{constructor(e,t){super({id:e??"omni/component"},t)}render(e){const t=JSON.parse(e.value);let r;return t.type==="OAIComponent31"&&(r=Oi.fromJSON(t)),r?`
      <div class='component block rounded-lg px-4 py-2 text-sm w-full text-gray-500 hover:bg-gray-50 hover:text-gray-700  cursor-pointer'
        x-data='{}' x-tooltip='${r==null?void 0:r.name}'
        x-on:click="window.client.runScript('add',['${jn.sanitize(r.name)}'])">
        <div

          class='font-semibold max-w-md'>${jn.sanitize(r==null?void 0:r.title)}
        </div>

        <div>
        ${jn.sanitize(r==null?void 0:r.description)}</div>

      </div>`:`Can not render missing component ${e.value}`}}class Am extends pt{constructor(e){e??(e={}),super({id:"omni/component-meta"},e)}async load(){}render(e){var r;let t="";return(r=e.value)!=null&&r.source?t=`
        <div x-data='${JSON.stringify(e.value)}'>
          <div x-show='title' class="font-bold text-center bg-gray-700 mb-2 text-gray-100" >
            <span x-text='title' ></span>
          </div>
          <div x-show='source' class=' bg-gray-300 m-1 pb-1 font-mono'>
            <div class="font-bold text-center bg-gray-700 mb-2 text-gray-100" >
              <span x-text='source?.title' ></span>
            </div>

            <div class='text-xs pl-2'>
              <div x-show='source?.authors'>
                <span class='font-semibold'>Authors: </span>
                <span  x-text='source?.authors?.join?.(", ")||source?.authors'></span>
              </div>
            </div>
            <p class='text-xs mt-1 mb-2 pl-2' x-text='source?.summary || "No Summary Available"'></p>
            <template x-for='(linkUrl,linkName) in source?.links' :key="linkName">
                <div class='text-xs  pl-1'><a class='text-blue-600  font-semibold cursor-pointer hover:text-blue-800'' :href='linkUrl' x-text='linkName' target='_blank' ></a></div>
            </template>
          </div>
        </div>`:t=`
        <div x-data='${JSON.stringify(e.value)}'>
          <div x-show='title' class="font-bold text-center bg-gray-700 mb-2 text-gray-100" >
            <span x-text='title'></span>
          </div>
          <div class=' bg-gray-300 m-1 pb-1 font-mono'>
            <p class='text-xs mt-1 mb-2  pl-2 ' x-text='"No meta info available"'></p>
          </div>
        </div>
      `,t}}class Om extends pt{constructor(e,t){super({id:e??"omni/job"},t)}render(e){return`<div class='flex flex-col flex-wrap gap-1' x-data="{job: client.jobs.jobStorage['${e.value}']}"
            :class='{"text-gray-800": job.state == "running", "text-green-800": job.state === "success", "text-red-800": job.state == "error"}'
            x-effect="() => {
              if (job.state === 'success' || job.state === 'error') { $nextTick(() => onAsyncJobStatusEffectHandler($el, job)) }
            }"
      >
      <div class="flex">
      <span x-text="workbench.getNickname(job.workflowId) || job.meta?.name || job.id">:</span>
      &nbsp; (<span class="flex" x-text="job.activity"></span>)
      </div>
      <template x-for="(nodeId, idx) in job.activeNode" :key='idx'>
        <div class="text-blue-500" x-text="job.nodeDescriptionFromId(nodeId)"></div>
      </template>
      <template x-for="(error, idx) in job.errors" :key='idx'>
        <div class="text-red-500" x-text="error.nodeName +': '+ error.message"></div>
      </template>
      </div>`}}class Tm extends pt{constructor(e,t){super({id:e??"omni/rest-error"},t)}render(e){const t=e.value,r=function(i){let s=i;if(typeof i=="string")try{s=JSON.parse(i)}catch{}else typeof t=="object"&&(s=i);return JSON.stringify(s,null,2)};return"<div class='w-full text-red-500 font-semibold'> Error</div><div>Component Key: <span class='font-mono text-red-500'>"+(t.component||"")+"</div><div>Error Details: <pre class='font-mono text-red-500' style='white-space: pre-wrap;'>"+r(t.message)+"</pre></div>"}}function Rm(n){if(!n||n.length===0)return console.warn("null text passed into escapeHtmlSpecialChars"),"";const e={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#039;"};return n.replace(/[<>&"']/g,t=>e[t])}class Im extends pt{constructor(e,t){super({id:e??"text/plain"},t)}render(e){var r;const t=Array.isArray(e.value)?e.value.join(`
`):(r=e.value)==null?void 0:r.toString();return jn.sanitize(Rm(t)).replace(/\n/g,"<br/>")}}class Pm extends pt{constructor(e){e??(e={}),super({id:"omni-pro-billing/tab"},e)}async load(){}render(e){return`<div x-data='${JSON.stringify(e.value)}'>
      <div x-show='true' class=' bg-gray-300 m-1 pb-1 font-mono'>
        <div class="font-bold text-center bg-gray-700 mb-2 text-gray-100" >
        <span> </span><span x-text='jobId' >          </span>
        </div>
        <div class="flex-row w-full flex-wrap">
        <template x-for='(record,idx) in tab' :key="idx">
            <div class=' flex-row gap-1 w-full flex text-xs  pl-1'> <span x-text="idx+1"></span>.<span x-text="record.api?.toUpperCase()"></span> (<span x-text="record.model"></span>)<span class="flex-grow"></span> <span x-text="record.resource"></span>&nbsp; <span class='text-right' x-text="record.cost?.toFixed(5)"></span>  </div>
        </template>
        <div class='text-xs  pl-1 text-right'> TOTAL: <span x-text="total.toFixed(5)"></span></div>
        </div>
      </div> `}}class Lm extends pt{constructor(e){e??(e={}),super({id:"omni/settings"},e)}async load(){}render(e){return`
    <div>

        <div class="flex-row w-full flex-wrap">
          <template x-for='(value,key) of window.client.${e.value}' :key="key">
            <div class=' flex-row gap-1 w-full flex text-xs  pl-1'> <span x-text="key"></span>: <span x-text="value"></span></div>
           </template>

    </div> `}}class Mm extends pt{constructor(e){e??(e={}),super({id:"omni/extension-list"},e)}async load(){}render(e){const t=e.value;return`<div x-data='{extensionList: ${JSON.stringify(t)}}'><ul><b>Core Extensions</b>:<template x-for="(extension, idx) in extensionList['core']" :key='idx'>"<li x-text="extension.title + ' (' + extension.id + ')'"></li>"</template></ul>
    <ul><b>Premium Extensions</b>:<template x-for="(extension, idx) in extensionList['premium']" :key='idx'>"<li x-text="extension.title + ' (' + extension.id + ')'"></li>"</template></ul>
    <ul><b>Known Extensions</b>:<template x-for="(extension, idx) in extensionList['known']" :key='idx'>"<li x-text="extension.title + ' (' + extension.id + ')'"></li>"</template></ul>
    <ul><b>Available Extensions</b>:<template x-for="(extension, idx) in extensionList['available']" :key='idx'>"<li x-text="extension.title + ' (' + extension.id + ')'"></li>"</template></ul></div>`}}const nu=document.createElement("div");nu.innerHTML="<div class=wb-header><div class=wb-control><span class=wb-min></span><span class=wb-max></span><span class=wb-full></span><span class=wb-close></span></div><div class=wb-drag><div class=wb-icon></div><div class=wb-title></div></div></div><div class=wb-body></div><div class=wb-n></div><div class=wb-s></div><div class=wb-w></div><div class=wb-e></div><div class=wb-nw></div><div class=wb-ne></div><div class=wb-se></div><div class=wb-sw></div>";function Nm(n){return(n||nu).cloneNode(!0)}function Fe(n,e,t,r){n&&n.addEventListener(e,t,r||!1)}function Cr(n,e,t,r){n&&n.removeEventListener(e,t,r||!1)}function Hn(n,e){n.stopPropagation(),e&&n.preventDefault()}function Ve(n,e){return n.getElementsByClassName(e)[0]}function ru(n,e){n.classList.add(e)}function Dm(n,e){return n.classList.contains(e)}function iu(n,e){n.classList.remove(e)}function Ae(n,e,t){t=""+t,n["_s_"+e]!==t&&(n.style.setProperty(e,t),n["_s_"+e]=t)}function $m(n,e){const t=n.firstChild;t?t.nodeValue=e:n.textContent=e}const hn=[],qe=[],Ln={capture:!0,passive:!0};let Qe,Bm=0,oi=10,gn,lt,su,Ce,rt;function ne(n,e){if(!(this instanceof ne))return new ne(n);Qe||Fm();let t,r,i,s,o,a,l,h,u,d,f,p,c,g,m,y,w,_,b,v,E,k,D,L,C,S,A,O,R,H,J,Z,ue,U,de,Y,gt,re,$e,Be,kn,Gt,xn,Sn;if(n&&(e&&(o=n,n=e),typeof n=="string"?o=n:(t=n.id,r=n.index,i=n.root,s=n.template,o=o||n.title,a=n.icon,l=n.mount,h=n.html,u=n.url,d=n.width,f=n.height,p=n.minwidth,c=n.minheight,g=n.maxwidth,m=n.maxheight,y=n.autosize,w=n.overflow,L=n.min,C=n.max,S=n.hidden,A=n.modal,_=n.x||(A?"center":0),b=n.y||(A?"center":0),v=n.top,E=n.left,k=n.bottom,D=n.right,O=n.background,R=n.border,H=n.header,J=n.class,Z=n.oncreate,ue=n.onclose,U=n.onfocus,de=n.onblur,Y=n.onmove,gt=n.onresize,re=n.onfullscreen,$e=n.onmaximize,Be=n.onminimize,kn=n.onrestore,Gt=n.onhide,xn=n.onshow,Sn=n.onload)),this.dom=Nm(s),this.dom.id=this.id=t||"winbox-"+ ++Bm,this.dom.className="winbox"+(J?" "+(typeof J=="string"?J:J.join(" ")):"")+(A?" modal":""),this.dom.winbox=this,this.window=this.dom,this.body=Ve(this.dom,"wb-body"),this.header=H||35,qe.push(this),O&&this.setBackground(O),R?Ae(this.body,"margin",R+(isNaN(R)?"":"px")):R=0,H){const Kt=Ve(this.dom,"wb-header");Ae(Kt,"height",H+"px"),Ae(Kt,"line-height",H+"px"),Ae(this.body,"top",H+"px")}o&&this.setTitle(o),a&&this.setIcon(a),l?this.mount(l):h?this.body.innerHTML=h:u&&this.setUrl(u,Sn),v=v?_e(v,rt):0,k=k?_e(k,rt):0,E=E?_e(E,Ce):0,D=D?_e(D,Ce):0;const Ye=Ce-E-D,Ue=rt-v-k;g=g?_e(g,Ye):Ye,m=m?_e(m,Ue):Ue,p=p?_e(p,g):150,c=c?_e(c,m):this.header,y?((i||Qe).appendChild(this.body),d=Math.max(Math.min(this.body.clientWidth+R*2+1,g),p),f=Math.max(Math.min(this.body.clientHeight+this.header+R+1,m),c),this.dom.appendChild(this.body)):(d=d?_e(d,g):Math.max(g/2,p)|0,f=f?_e(f,m):Math.max(m/2,c)|0),_=_?_e(_,Ye,d):E,b=b?_e(b,Ue,f):v,this.x=_,this.y=b,this.width=d,this.height=f,this.minwidth=p,this.minheight=c,this.maxwidth=g,this.maxheight=m,this.top=v,this.right=D,this.bottom=k,this.left=E,this.index=r,this.overflow=w,this.min=!1,this.max=!1,this.full=!1,this.hidden=!1,this.focused=!1,this.onclose=ue,this.onfocus=U,this.onblur=de,this.onmove=Y,this.onresize=gt,this.onfullscreen=re,this.onmaximize=$e,this.onminimize=Be,this.onrestore=kn,this.onhide=Gt,this.onshow=xn,C?this.maximize():L?this.minimize():this.resize().move(),S?this.hide():(this.focus(),(r||r===0)&&(this.index=r,Ae(this.dom,"z-index",r),r>oi&&(oi=r))),zm(this),(i||Qe).appendChild(this.dom),Z&&Z.call(this,n)}ne.new=function(n){return new ne(n)};ne.stack=function(){return qe};function _e(n,e,t){if(typeof n=="string")if(n==="center")n=(e-t)/2|0;else if(n==="right"||n==="bottom")n=e-t;else{const r=parseFloat(n);(""+r!==n&&n.substring((""+r).length))==="%"?n=e/100*r|0:n=r}return n}function Fm(){Qe=document.body,Qe[lt="requestFullscreen"]||Qe[lt="msRequestFullscreen"]||Qe[lt="webkitRequestFullscreen"]||Qe[lt="mozRequestFullscreen"]||(lt=""),su=lt&&lt.replace("request","exit").replace("mozRequest","mozCancel").replace("Request","Exit"),Fe(window,"resize",function(){ml(),To()}),ml()}function zm(n){at(n,"drag"),at(n,"n"),at(n,"s"),at(n,"w"),at(n,"e"),at(n,"nw"),at(n,"ne"),at(n,"se"),at(n,"sw"),Fe(Ve(n.dom,"wb-min"),"click",function(e){Hn(e),n.min?n.restore().focus():n.minimize()}),Fe(Ve(n.dom,"wb-max"),"click",function(e){n.max?n.restore().focus():n.maximize().focus()}),lt?Fe(Ve(n.dom,"wb-full"),"click",function(e){n.fullscreen()}):n.addClass("no-full"),Fe(Ve(n.dom,"wb-close"),"click",function(e){Hn(e),n.close()||(n=null)}),Fe(n.dom,"click",function(e){n.focus()})}function Ti(n){hn.splice(hn.indexOf(n),1),To(),n.removeClass("min"),n.min=!1,n.dom.title=""}function To(){const n=hn.length,e={},t={};for(let r=0,i,s;r<n;r++)i=hn[r],s=(i.left||i.right)+":"+(i.top||i.bottom),t[s]?t[s]++:(e[s]=0,t[s]=1);for(let r=0,i,s,o;r<n;r++)i=hn[r],s=(i.left||i.right)+":"+(i.top||i.bottom),o=Math.min((Ce-i.left-i.right)/t[s],250),i.resize(o+1|0,i.header,!0).move(i.left+e[s]*o|0,rt-i.bottom-i.header,!0),e[s]++}function at(n,e){const t=Ve(n.dom,"wb-"+e);if(!t)return;let r,i,s,o=0;Fe(t,"mousedown",a),Fe(t,"touchstart",a,Ln);function a(u){if(Hn(u),n.focus(),e==="drag"){if(n.min){n.restore();return}const d=Date.now(),f=d-o;if(o=d,f<300){n.max?n.restore():n.maximize();return}}n.min||(ru(Qe,"wb-lock"),(r=u.touches)&&(r=r[0])?(u=r,Fe(window,"touchmove",l,Ln),Fe(window,"touchend",h,Ln)):(Fe(window,"mousemove",l),Fe(window,"mouseup",h)),i=u.pageX,s=u.pageY)}function l(u){Hn(u,!r),r&&(u=u.touches[0]);const d=u.pageX,f=u.pageY,p=d-i,c=f-s,g=n.width,m=n.height,y=n.x,w=n.y;let _,b,v,E;e==="drag"?(n.x+=p,n.y+=c,v=E=1):(e==="e"||e==="se"||e==="ne"?(n.width+=p,_=1):(e==="w"||e==="sw"||e==="nw")&&(n.x+=p,n.width-=p,_=1,v=1),e==="s"||e==="se"||e==="sw"?(n.height+=c,b=1):(e==="n"||e==="ne"||e==="nw")&&(n.y+=c,n.height-=c,b=1,E=1)),_&&(n.width=Math.max(Math.min(n.width,n.maxwidth,Ce-n.x-n.right),n.minwidth),_=n.width!==g),b&&(n.height=Math.max(Math.min(n.height,n.maxheight,rt-n.y-n.bottom),n.minheight),b=n.height!==m),(_||b)&&n.resize(),v&&(n.max&&(n.x=(d<Ce/3?n.left:d>Ce/3*2?Ce-n.width-n.right:Ce/2-n.width/2)+p),n.x=Math.max(Math.min(n.x,n.overflow?Ce-30:Ce-n.width-n.right),n.overflow?30-n.width:n.left),v=n.x!==y),E&&(n.max&&(n.y=n.top+c),n.y=Math.max(Math.min(n.y,n.overflow?rt-n.header:rt-n.height-n.bottom),n.top),E=n.y!==w),(v||E)&&(n.max&&n.restore(),n.move()),(_||v)&&(i=d),(b||E)&&(s=f)}function h(u){Hn(u),iu(Qe,"wb-lock"),r?(Cr(window,"touchmove",l,Ln),Cr(window,"touchend",h,Ln)):(Cr(window,"mousemove",l),Cr(window,"mouseup",h))}}function ml(){const n=document.documentElement;Ce=n.clientWidth,rt=n.clientHeight}ne.prototype.mount=function(n){return this.unmount(),n._backstore||(n._backstore=n.parentNode),this.body.textContent="",this.body.appendChild(n),this};ne.prototype.unmount=function(n){const e=this.body.firstChild;if(e){const t=n||e._backstore;t&&t.appendChild(e),e._backstore=n}return this};ne.prototype.setTitle=function(n){const e=Ve(this.dom,"wb-title");return $m(e,this.title=n),this};ne.prototype.setIcon=function(n){const e=Ve(this.dom,"wb-icon");return Ae(e,"background-image","url("+n+")"),Ae(e,"display","inline-block"),this};ne.prototype.setBackground=function(n){return Ae(this.dom,"background",n),this};ne.prototype.setUrl=function(n,e){const t=this.body.firstChild;return t&&t.tagName.toLowerCase()==="iframe"?t.src=n:(this.body.innerHTML='<iframe src="'+n+'"></iframe>',e&&(this.body.firstChild.onload=e)),this};ne.prototype.focus=function(n){if(n===!1)return this.blur();if(!this.focused){const e=qe.length;if(e>1)for(let t=1;t<=e;t++){const r=qe[e-t];if(r.focused){r.blur(),qe.push(qe.splice(qe.indexOf(this),1)[0]);break}}Ae(this.dom,"z-index",++oi),this.index=oi,this.addClass("focus"),this.focused=!0,this.onfocus&&this.onfocus()}return this};ne.prototype.blur=function(n){return n===!1?this.focus():(this.focused&&(this.removeClass("focus"),this.focused=!1,this.onblur&&this.onblur()),this)};ne.prototype.hide=function(n){if(n===!1)return this.show();if(!this.hidden)return this.onhide&&this.onhide(),this.hidden=!0,this.addClass("hide")};ne.prototype.show=function(n){if(n===!1)return this.hide();if(this.hidden)return this.onshow&&this.onshow(),this.hidden=!1,this.removeClass("hide")};ne.prototype.minimize=function(n){if(n===!1)return this.restore();if(gn&&Ri(),this.max&&(this.removeClass("max"),this.max=!1),!this.min){hn.push(this),To(),this.dom.title=this.title,this.addClass("min"),this.blur(),this.min=!0;const e=qe.length;if(e>1)for(let t=1;t<=e;t++){const r=qe[e-t];if(!r.min){r.focus();break}}this.onminimize&&this.onminimize()}return this};ne.prototype.restore=function(){return gn&&Ri(),this.min&&(Ti(this),this.resize().move(),this.onrestore&&this.onrestore()),this.max&&(this.max=!1,this.removeClass("max").resize().move(),this.onrestore&&this.onrestore()),this};ne.prototype.maximize=function(n){return n===!1?this.restore():(gn&&Ri(),this.min&&Ti(this),this.max||(this.addClass("max").resize(Ce-this.left-this.right,rt-this.top-this.bottom,!0).move(this.left,this.top,!0),this.max=!0,this.onmaximize&&this.onmaximize()),this)};ne.prototype.fullscreen=function(n){if(this.min&&(Ti(this),this.resize().move()),!gn||!Ri())this.body[lt](),gn=this,this.full=!0,this.onfullscreen&&this.onfullscreen();else if(n===!1)return this.restore();return this};function jm(){return document.fullscreen||document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement}function Ri(){if(gn.full=!1,jm())return document[su](),!0}ne.prototype.close=function(n){if(this.onclose&&this.onclose(n))return!0;this.min&&Ti(this),qe.splice(qe.indexOf(this),1),this.unmount(),this.dom.remove(),this.dom.textContent="",this.dom.winbox=null,this.body=null,this.dom=null};ne.prototype.move=function(n,e,t){return!n&&n!==0?(n=this.x,e=this.y):t||(this.x=n?n=_e(n,Ce-this.left-this.right,this.width):0,this.y=e?e=_e(e,rt-this.top-this.bottom,this.height):0),Ae(this.dom,"left",n+"px"),Ae(this.dom,"top",e+"px"),this.onmove&&this.onmove(n,e),this};ne.prototype.resize=function(n,e,t){return!n&&n!==0?(n=this.width,e=this.height):t||(this.width=n?n=_e(n,this.maxwidth):0,this.height=e?e=_e(e,this.maxheight):0,n=Math.max(n,this.minwidth),e=Math.max(e,this.minheight)),Ae(this.dom,"width",n+"px"),Ae(this.dom,"height",e+"px"),this.onresize&&this.onresize(n,e),this};ne.prototype.addControl=function(n){const e=n.class,t=n.image,r=n.click,i=n.index,s=document.createElement("span"),o=Ve(this.dom,"wb-control"),a=this;return e&&(s.className=e),t&&Ae(s,"background-image","url("+t+")"),r&&(s.onclick=function(l){r.call(this,l,a)}),o.insertBefore(s,o.childNodes[i||0]),this};ne.prototype.removeControl=function(n){return n=Ve(this.dom,n),n&&n.remove(),this};ne.prototype.addClass=function(n){return ru(this.dom,n),this};ne.prototype.removeClass=function(n){return iu(this.dom,n),this};ne.prototype.hasClass=function(n){return Dm(this.dom,n)};ne.prototype.toggleClass=function(n){return this.hasClass(n)?this.removeClass(n):this.addClass(n)};ne.prototype.setUrl=function(n,e){const t=this.body.firstChild;return t&&t.tagName.toLowerCase()==="iframe"?t.src=n:(this.body.innerHTML=`<iframe allowtransparency="${this.allowTransparency?"true":"false"}" style="background:${this.allowTransparency?"transparent":"white"};"  src="${n}"></iframe>`,e&&(this.body.firstChild.onload=e)),this};var ou=(n=>(n.curve="curve",n))(ou||{});class Um extends wi{constructor(t){super(t);W(this,"factories");W(this,"componentCache");this.factories=new Map,this.componentCache=new Map,this.registerType("OAIComponent31",Oi.fromJSON)}registerType(t,r){if(!t)throw new Error("registerType(): key cannot be undefined");if(!r||typeof r!="function")throw new Error(`Factory ${t} must be a function`);if(this.factories.has(t))throw new Error(`Block type ${t} already registered`);this.factories.set(t,r)}get client(){return this.app}async _rpc(t,r){return await this.client.runScript("blockManager",{command:t,args:r},{fromChatWindow:!1})}async getInstance(t){const r=await this.getInstances([t]);return r?r[0]:void 0}async getInstances(t){if(!t)throw new Error("getInstances(): key cannot be undefined");let r=t.map(s=>this.componentCache.get(s))||[];const i=t.filter(s=>!this.componentCache.has(s));if(i.length>0){const o=await this._rpc("getInstances",[i,void 0,"missing_block"]),a=await Promise.all(o.map(async l=>{const h=this.factories.get(l.type||"OAIComponent31");if(!h)throw new Error(`Internal error, Block type ${l.type} not registered`);const u=h(l);return this.componentCache.set(u.name,u),u}));r.push(...a)}return r=r.filter(s=>s!==void 0),r}}class lv extends pc{constructor(t,r){super(t,r);W(this,"clipboard",{});W(this,"workbench");W(this,"uiSettings",{});W(this,"reteSettings");W(this,"SDK",qp);W(this,"windows");W(this,"sdkHost");W(this,"markdownEngine");W(this,"_blocks");this.markdownEngine=new ng,this.windows=new Map,this.sdkHost=new Vp(this).init(),this.workbench=new window.Alpine.reactive(new tp(this));const i=this;this._blocks=new Um(this),this.reteSettings=new window.Alpine.reactive({curve:window.localStorage.getItem("settings.rete.curve")??"curveBasis",arrow:window.localStorage.getItem("settings.rete.arrow")==="true",curvature:parseFloat(window.localStorage.getItem("settings.rete.curvature")??"0.3")});for(const s in ou){const o=window.localStorage.getItem(`settings.rete.${s}`);o&&(this.reteSettings[s]=o)}this.uiSettings=new window.Alpine.reactive({minimalChat:window.localStorage.getItem("settings.minimalChat")==="true",chatSide:window.localStorage.getItem("settings.chatSide")??"left",tabBarStyle:window.localStorage.getItem("settings.tabBarStyle")??"tabs",chatMinimized:window.localStorage.getItem("settings.chatMinimized")==="true",async toggleMinimal(){this.minimalChat=!this.minimalChat,window.localStorage.setItem("settings.minimalChat",this.minimalChat),await i.emit("request_editor_resize",{})},async toggleSide(){this.chatSide=this.chatSide==="left"?"right":"left",window.localStorage.setItem("settings.chatSide",this.chatSide),await i.emit("request_editor_resize",{})},async toggleMinimized(s){this.chatMinimized=s!==void 0?s:!this.chatMinimized,window.localStorage.setItem("settings.chatMinimized",this.chatMinimized?"true":"false"),await i.emit("request_editor_resize",{})}}),this.extensions=new window.Alpine.reactive(new dc(this))}showToast(t,r={description:"",type:"default",position:"top-right",html:""}){const i=r.description||"",s=r.type||"default",o=r.position||"top-right",a=r.html||"";window.dispatchEvent(new CustomEvent("toast-show",{detail:{type:s,message:t,description:i,position:o,html:a}}))}showTopBanner(t,r,i){const s=i.link??"";window.dispatchEvent(new CustomEvent("top-banner-show",{detail:{bannerTitle:t,bannerDescription:r,link:s}}))}closeWindow(t){const r=this.getWindow(t);return r&&r.close(),!!r}getWindow(t){return t?this.windows.get(t):void 0}toggleWindow(t,r,i){i??(i={}),i.x??(i.x="center"),i.y??(i.y="center"),i.class="test",r&&(this.closeWindow(r),t+=`&omniHash=${r}`);const s=document.createElement("div");s.innerHTML=`
        <div class="wb-header asdf">
            <div class="wb-control">
                <span class="wb-custom"></span>
                <span class="wb-close"></span>
            </div>
            <div class="wb-drag">
                <div class="wb-title">
                </div>
            </div>
        </div>
        <div class="wb-body"></div>
    `;const o=new ne(Object.assign({},{url:t,class:[],autosize:!0},i,{onCreate:a=>{a.allowTransparency=i.allowTransparency??!1},onclose:()=>{r&&(this.windows.delete(r),this.sdkHost.deregister(r)),this.workbench.refreshUI()}}));return r&&this.windows.set(r,o),this.workbench.refreshUI(),window}get blocks(){return this._blocks}async onConfigure(){return this.success("onConfigure"),!0}async onLoad(){return this.success("onLoad"),!0}async onStart(){const t=[];return t.push(this.chat.registerRenderer(new Im)),t.push(this.chat.registerRenderer(new jc)),t.push(this.chat.registerRenderer(new Om)),t.push(this.chat.registerRenderer(new Cm)),t.push(this.chat.registerRenderer(new Am)),t.push(this.chat.registerRenderer(new Tm)),t.push(this.chat.registerRenderer(new Pm)),t.push(this.chat.registerRenderer(new Lm)),t.push(this.chat.registerRenderer(new Mm)),t.push(this.chat.registerRenderer(new Ig)),await Promise.all(t),this.io.registerMessageHandler({type:"chat",handler:this.chat.onChatMessage.bind(this.chat)}),this.io.registerMessageHandler({type:Nr.CLIENT_TOAST,handler:r=>{this.showToast(r.body.message,r.body.options)}}),this.io.registerMessageHandler({type:"chat:system",handler:this.chat.onChatMessage.bind(this.chat)}),this.io.registerMessageHandler({type:Nr.SHOW_EXTENSION,handler:r=>{this.workbench.showExtension(r.body.extensionId,r.body.args,r.body.page,r.body.opts)}}),this.io.registerMessageHandler({type:Nr.CUSTOM_EXTENSION_EVENT,handler:r=>{const{extensionId:i,eventId:s,eventArgs:o}=r.body;this.sdkHost.signalCustomEvent(i,s,o)}}),this.io.registerMessageHandler({type:"job:status",handler:this.jobs.handleMessages.bind(this.jobs)}),this.io.registerMessageHandler({type:"job:error",handler:this.jobs.handleMessages.bind(this.jobs)}),this.io.registerMessageHandler({type:"job:update",handler:this.jobs.handleMessages.bind(this.jobs)}),this.events.on("chat_message_added",async r=>{const[i]=r;console.log(i),this.sdkHost.signalChatMessageReceived(i)}),await this.io.startSSE(""),await this.workbench.load(),!0}get io(){return this.services.get("messaging")}get jobs(){return this.services.get("jobs")}get chat(){return this.services.get("chat")}addImageToClipboard(t){var r;t&&(Array.isArray(t)||(t=[t]),this.clipboard??(this.clipboard={}),(r=this.clipboard).images??(r.images=[]),this.clipboard.images=this.clipboard.images.concat(t))}}var Ds=!1,$s=!1,Ft=[],Bs=-1;function Hm(n){Wm(n)}function Wm(n){Ft.includes(n)||Ft.push(n),qm()}function au(n){let e=Ft.indexOf(n);e!==-1&&e>Bs&&Ft.splice(e,1)}function qm(){!$s&&!Ds&&(Ds=!0,queueMicrotask(Vm))}function Vm(){Ds=!1,$s=!0;for(let n=0;n<Ft.length;n++)Ft[n](),Bs=n;Ft.length=0,Bs=-1,$s=!1}var vn,bn,ir,lu,Fs=!0;function Jm(n){Fs=!1,n(),Fs=!0}function Gm(n){vn=n.reactive,ir=n.release,bn=e=>n.effect(e,{scheduler:t=>{Fs?Hm(t):t()}}),lu=n.raw}function yl(n){bn=n}function Km(n){let e=()=>{};return[r=>{let i=bn(r);return n._x_effects||(n._x_effects=new Set,n._x_runEffects=()=>{n._x_effects.forEach(s=>s())}),n._x_effects.add(i),e=()=>{i!==void 0&&(n._x_effects.delete(i),ir(i))},i},()=>{e()}]}function Wn(n,e,t={}){n.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:!0,composed:!0,cancelable:!0}))}function xt(n,e){if(typeof ShadowRoot=="function"&&n instanceof ShadowRoot){Array.from(n.children).forEach(i=>xt(i,e));return}let t=!1;if(e(n,()=>t=!0),t)return;let r=n.firstElementChild;for(;r;)xt(r,e),r=r.nextElementSibling}function ft(n,...e){console.warn(`Alpine Warning: ${n}`,...e)}var wl=!1;function Zm(){wl&&ft("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),wl=!0,document.body||ft("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),Wn(document,"alpine:init"),Wn(document,"alpine:initializing"),No(),Qm(e=>dt(e,xt)),Po(e=>Io(e)),wu((e,t)=>{Fo(e,t).forEach(r=>r())});let n=e=>!Ii(e.parentElement,!0);Array.from(document.querySelectorAll(hu().join(","))).filter(n).forEach(e=>{dt(e)}),Wn(document,"alpine:initialized")}var Ro=[],cu=[];function uu(){return Ro.map(n=>n())}function hu(){return Ro.concat(cu).map(n=>n())}function fu(n){Ro.push(n)}function du(n){cu.push(n)}function Ii(n,e=!1){return Pi(n,t=>{if((e?hu():uu()).some(i=>t.matches(i)))return!0})}function Pi(n,e){if(n){if(e(n))return n;if(n._x_teleportBack&&(n=n._x_teleportBack),!!n.parentElement)return Pi(n.parentElement,e)}}function Ym(n){return uu().some(e=>n.matches(e))}var pu=[];function Xm(n){pu.push(n)}function dt(n,e=xt,t=()=>{}){py(()=>{e(n,(r,i)=>{t(r,i),pu.forEach(s=>s(r,i)),Fo(r,r.attributes).forEach(s=>s()),r._x_ignore&&i()})})}function Io(n){xt(n,e=>{bu(e),ey(e)})}var gu=[],mu=[],yu=[];function Qm(n){yu.push(n)}function Po(n,e){typeof e=="function"?(n._x_cleanups||(n._x_cleanups=[]),n._x_cleanups.push(e)):(e=n,mu.push(e))}function wu(n){gu.push(n)}function vu(n,e,t){n._x_attributeCleanups||(n._x_attributeCleanups={}),n._x_attributeCleanups[e]||(n._x_attributeCleanups[e]=[]),n._x_attributeCleanups[e].push(t)}function bu(n,e){n._x_attributeCleanups&&Object.entries(n._x_attributeCleanups).forEach(([t,r])=>{(e===void 0||e.includes(t))&&(r.forEach(i=>i()),delete n._x_attributeCleanups[t])})}function ey(n){if(n._x_cleanups)for(;n._x_cleanups.length;)n._x_cleanups.pop()()}var Lo=new MutationObserver($o),Mo=!1;function No(){Lo.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),Mo=!0}function _u(){ty(),Lo.disconnect(),Mo=!1}var qn=[],cs=!1;function ty(){qn=qn.concat(Lo.takeRecords()),qn.length&&!cs&&(cs=!0,queueMicrotask(()=>{ny(),cs=!1}))}function ny(){$o(qn),qn.length=0}function pe(n){if(!Mo)return n();_u();let e=n();return No(),e}var Do=!1,ai=[];function ry(){Do=!0}function iy(){Do=!1,$o(ai),ai=[]}function $o(n){if(Do){ai=ai.concat(n);return}let e=[],t=[],r=new Map,i=new Map;for(let s=0;s<n.length;s++)if(!n[s].target._x_ignoreMutationObserver&&(n[s].type==="childList"&&(n[s].addedNodes.forEach(o=>o.nodeType===1&&e.push(o)),n[s].removedNodes.forEach(o=>o.nodeType===1&&t.push(o))),n[s].type==="attributes")){let o=n[s].target,a=n[s].attributeName,l=n[s].oldValue,h=()=>{r.has(o)||r.set(o,[]),r.get(o).push({name:a,value:o.getAttribute(a)})},u=()=>{i.has(o)||i.set(o,[]),i.get(o).push(a)};o.hasAttribute(a)&&l===null?h():o.hasAttribute(a)?(u(),h()):u()}i.forEach((s,o)=>{bu(o,s)}),r.forEach((s,o)=>{gu.forEach(a=>a(o,s))});for(let s of t)e.includes(s)||(mu.forEach(o=>o(s)),Io(s));e.forEach(s=>{s._x_ignoreSelf=!0,s._x_ignore=!0});for(let s of e)t.includes(s)||s.isConnected&&(delete s._x_ignoreSelf,delete s._x_ignore,yu.forEach(o=>o(s)),s._x_ignore=!0,s._x_ignoreSelf=!0);e.forEach(s=>{delete s._x_ignoreSelf,delete s._x_ignore}),e=null,t=null,r=null,i=null}function ku(n){return or(mn(n))}function sr(n,e,t){return n._x_dataStack=[e,...mn(t||n)],()=>{n._x_dataStack=n._x_dataStack.filter(r=>r!==e)}}function mn(n){return n._x_dataStack?n._x_dataStack:typeof ShadowRoot=="function"&&n instanceof ShadowRoot?mn(n.host):n.parentNode?mn(n.parentNode):[]}function or(n){return new Proxy({objects:n},sy)}var sy={ownKeys({objects:n}){return Array.from(new Set(n.flatMap(e=>Object.keys(e))))},has({objects:n},e){return e==Symbol.unscopables?!1:n.some(t=>Object.prototype.hasOwnProperty.call(t,e))},get({objects:n},e,t){return e=="toJSON"?oy:Reflect.get(n.find(r=>Object.prototype.hasOwnProperty.call(r,e))||{},e,t)},set({objects:n},e,t,r){const i=n.find(o=>Object.prototype.hasOwnProperty.call(o,e))||n[n.length-1],s=Object.getOwnPropertyDescriptor(i,e);return s!=null&&s.set&&(s!=null&&s.get)?Reflect.set(i,e,t,r):Reflect.set(i,e,t)}};function oy(){return Reflect.ownKeys(this).reduce((e,t)=>(e[t]=Reflect.get(this,t),e),{})}function xu(n){let e=r=>typeof r=="object"&&!Array.isArray(r)&&r!==null,t=(r,i="")=>{Object.entries(Object.getOwnPropertyDescriptors(r)).forEach(([s,{value:o,enumerable:a}])=>{if(a===!1||o===void 0)return;let l=i===""?s:`${i}.${s}`;typeof o=="object"&&o!==null&&o._x_interceptor?r[s]=o.initialize(n,l,s):e(o)&&o!==r&&!(o instanceof Element)&&t(o,l)})};return t(n)}function Su(n,e=()=>{}){let t={initialValue:void 0,_x_interceptor:!0,initialize(r,i,s){return n(this.initialValue,()=>ay(r,i),o=>zs(r,i,o),i,s)}};return e(t),r=>{if(typeof r=="object"&&r!==null&&r._x_interceptor){let i=t.initialize.bind(t);t.initialize=(s,o,a)=>{let l=r.initialize(s,o,a);return t.initialValue=l,i(s,o,a)}}else t.initialValue=r;return t}}function ay(n,e){return e.split(".").reduce((t,r)=>t[r],n)}function zs(n,e,t){if(typeof e=="string"&&(e=e.split(".")),e.length===1)n[e[0]]=t;else{if(e.length===0)throw error;return n[e[0]]||(n[e[0]]={}),zs(n[e[0]],e.slice(1),t)}}var Eu={};function Ze(n,e){Eu[n]=e}function js(n,e){return Object.entries(Eu).forEach(([t,r])=>{let i=null;function s(){if(i)return i;{let[o,a]=Iu(e);return i={interceptor:Su,...o},Po(e,a),i}}Object.defineProperty(n,`$${t}`,{get(){return r(e,s())},enumerable:!1})}),n}function ly(n,e,t,...r){try{return t(...r)}catch(i){Yn(i,n,e)}}function Yn(n,e,t=void 0){Object.assign(n,{el:e,expression:t}),console.warn(`Alpine Expression Error: ${n.message}

${t?'Expression: "'+t+`"

`:""}`,e),setTimeout(()=>{throw n},0)}var zr=!0;function Cu(n){let e=zr;zr=!1;let t=n();return zr=e,t}function zt(n,e,t={}){let r;return ke(n,e)(i=>r=i,t),r}function ke(...n){return Au(...n)}var Au=Ou;function cy(n){Au=n}function Ou(n,e){let t={};js(t,n);let r=[t,...mn(n)],i=typeof e=="function"?uy(r,e):fy(r,e,n);return ly.bind(null,n,e,i)}function uy(n,e){return(t=()=>{},{scope:r={},params:i=[]}={})=>{let s=e.apply(or([r,...n]),i);li(t,s)}}var us={};function hy(n,e){if(us[n])return us[n];let t=Object.getPrototypeOf(async function(){}).constructor,r=/^[\n\s]*if.*\(.*\)/.test(n.trim())||/^(let|const)\s/.test(n.trim())?`(async()=>{ ${n} })()`:n,s=(()=>{try{let o=new t(["__self","scope"],`with (scope) { __self.result = ${r} }; __self.finished = true; return __self.result;`);return Object.defineProperty(o,"name",{value:`[Alpine] ${n}`}),o}catch(o){return Yn(o,e,n),Promise.resolve()}})();return us[n]=s,s}function fy(n,e,t){let r=hy(e,t);return(i=()=>{},{scope:s={},params:o=[]}={})=>{r.result=void 0,r.finished=!1;let a=or([s,...n]);if(typeof r=="function"){let l=r(r,a).catch(h=>Yn(h,t,e));r.finished?(li(i,r.result,a,o,t),r.result=void 0):l.then(h=>{li(i,h,a,o,t)}).catch(h=>Yn(h,t,e)).finally(()=>r.result=void 0)}}}function li(n,e,t,r,i){if(zr&&typeof e=="function"){let s=e.apply(t,r);s instanceof Promise?s.then(o=>li(n,o,t,r)).catch(o=>Yn(o,i,e)):n(s)}else typeof e=="object"&&e instanceof Promise?e.then(s=>n(s)):n(e)}var Bo="x-";function _n(n=""){return Bo+n}function dy(n){Bo=n}var Us={};function fe(n,e){return Us[n]=e,{before(t){if(!Us[t]){console.warn("Cannot find directive `${directive}`. `${name}` will use the default order of execution");return}const r=$t.indexOf(t);$t.splice(r>=0?r:$t.indexOf("DEFAULT"),0,n)}}}function Fo(n,e,t){if(e=Array.from(e),n._x_virtualDirectives){let s=Object.entries(n._x_virtualDirectives).map(([a,l])=>({name:a,value:l})),o=Tu(s);s=s.map(a=>o.find(l=>l.name===a.name)?{name:`x-bind:${a.name}`,value:`"${a.value}"`}:a),e=e.concat(s)}let r={};return e.map(Mu((s,o)=>r[s]=o)).filter(Du).map(my(r,t)).sort(yy).map(s=>gy(n,s))}function Tu(n){return Array.from(n).map(Mu()).filter(e=>!Du(e))}var Hs=!1,Dn=new Map,Ru=Symbol();function py(n){Hs=!0;let e=Symbol();Ru=e,Dn.set(e,[]);let t=()=>{for(;Dn.get(e).length;)Dn.get(e).shift()();Dn.delete(e)},r=()=>{Hs=!1,t()};n(t),r()}function Iu(n){let e=[],t=a=>e.push(a),[r,i]=Km(n);return e.push(i),[{Alpine:lr,effect:r,cleanup:t,evaluateLater:ke.bind(ke,n),evaluate:zt.bind(zt,n)},()=>e.forEach(a=>a())]}function gy(n,e){let t=()=>{},r=Us[e.type]||t,[i,s]=Iu(n);vu(n,e.original,s);let o=()=>{n._x_ignore||n._x_ignoreSelf||(r.inline&&r.inline(n,e,i),r=r.bind(r,n,e,i),Hs?Dn.get(Ru).push(r):r())};return o.runCleanups=s,o}var Pu=(n,e)=>({name:t,value:r})=>(t.startsWith(n)&&(t=t.replace(n,e)),{name:t,value:r}),Lu=n=>n;function Mu(n=()=>{}){return({name:e,value:t})=>{let{name:r,value:i}=Nu.reduce((s,o)=>o(s),{name:e,value:t});return r!==e&&n(r,e),{name:r,value:i}}}var Nu=[];function zo(n){Nu.push(n)}function Du({name:n}){return $u().test(n)}var $u=()=>new RegExp(`^${Bo}([^:^.]+)\\b`);function my(n,e){return({name:t,value:r})=>{let i=t.match($u()),s=t.match(/:([a-zA-Z0-9\-_:]+)/),o=t.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],a=e||n[t]||t;return{type:i?i[1]:null,value:s?s[1]:null,modifiers:o.map(l=>l.replace(".","")),expression:r,original:a}}}var Ws="DEFAULT",$t=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",Ws,"teleport"];function yy(n,e){let t=$t.indexOf(n.type)===-1?Ws:n.type,r=$t.indexOf(e.type)===-1?Ws:e.type;return $t.indexOf(t)-$t.indexOf(r)}var qs=[],jo=!1;function Uo(n=()=>{}){return queueMicrotask(()=>{jo||setTimeout(()=>{Vs()})}),new Promise(e=>{qs.push(()=>{n(),e()})})}function Vs(){for(jo=!1;qs.length;)qs.shift()()}function wy(){jo=!0}function Ho(n,e){return Array.isArray(e)?vl(n,e.join(" ")):typeof e=="object"&&e!==null?vy(n,e):typeof e=="function"?Ho(n,e()):vl(n,e)}function vl(n,e){let t=i=>i.split(" ").filter(s=>!n.classList.contains(s)).filter(Boolean),r=i=>(n.classList.add(...i),()=>{n.classList.remove(...i)});return e=e===!0?e="":e||"",r(t(e))}function vy(n,e){let t=a=>a.split(" ").filter(Boolean),r=Object.entries(e).flatMap(([a,l])=>l?t(a):!1).filter(Boolean),i=Object.entries(e).flatMap(([a,l])=>l?!1:t(a)).filter(Boolean),s=[],o=[];return i.forEach(a=>{n.classList.contains(a)&&(n.classList.remove(a),o.push(a))}),r.forEach(a=>{n.classList.contains(a)||(n.classList.add(a),s.push(a))}),()=>{o.forEach(a=>n.classList.add(a)),s.forEach(a=>n.classList.remove(a))}}function Li(n,e){return typeof e=="object"&&e!==null?by(n,e):_y(n,e)}function by(n,e){let t={};return Object.entries(e).forEach(([r,i])=>{t[r]=n.style[r],r.startsWith("--")||(r=ky(r)),n.style.setProperty(r,i)}),setTimeout(()=>{n.style.length===0&&n.removeAttribute("style")}),()=>{Li(n,t)}}function _y(n,e){let t=n.getAttribute("style",e);return n.setAttribute("style",e),()=>{n.setAttribute("style",t||"")}}function ky(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Js(n,e=()=>{}){let t=!1;return function(){t?e.apply(this,arguments):(t=!0,n.apply(this,arguments))}}fe("transition",(n,{value:e,modifiers:t,expression:r},{evaluate:i})=>{typeof r=="function"&&(r=i(r)),r!==!1&&(!r||typeof r=="boolean"?Sy(n,t,e):xy(n,r,e))});function xy(n,e,t){Bu(n,Ho,""),{enter:i=>{n._x_transition.enter.during=i},"enter-start":i=>{n._x_transition.enter.start=i},"enter-end":i=>{n._x_transition.enter.end=i},leave:i=>{n._x_transition.leave.during=i},"leave-start":i=>{n._x_transition.leave.start=i},"leave-end":i=>{n._x_transition.leave.end=i}}[t](e)}function Sy(n,e,t){Bu(n,Li);let r=!e.includes("in")&&!e.includes("out")&&!t,i=r||e.includes("in")||["enter"].includes(t),s=r||e.includes("out")||["leave"].includes(t);e.includes("in")&&!r&&(e=e.filter((y,w)=>w<e.indexOf("out"))),e.includes("out")&&!r&&(e=e.filter((y,w)=>w>e.indexOf("out")));let o=!e.includes("opacity")&&!e.includes("scale"),a=o||e.includes("opacity"),l=o||e.includes("scale"),h=a?0:1,u=l?Mn(e,"scale",95)/100:1,d=Mn(e,"delay",0)/1e3,f=Mn(e,"origin","center"),p="opacity, transform",c=Mn(e,"duration",150)/1e3,g=Mn(e,"duration",75)/1e3,m="cubic-bezier(0.4, 0.0, 0.2, 1)";i&&(n._x_transition.enter.during={transformOrigin:f,transitionDelay:`${d}s`,transitionProperty:p,transitionDuration:`${c}s`,transitionTimingFunction:m},n._x_transition.enter.start={opacity:h,transform:`scale(${u})`},n._x_transition.enter.end={opacity:1,transform:"scale(1)"}),s&&(n._x_transition.leave.during={transformOrigin:f,transitionDelay:`${d}s`,transitionProperty:p,transitionDuration:`${g}s`,transitionTimingFunction:m},n._x_transition.leave.start={opacity:1,transform:"scale(1)"},n._x_transition.leave.end={opacity:h,transform:`scale(${u})`})}function Bu(n,e,t={}){n._x_transition||(n._x_transition={enter:{during:t,start:t,end:t},leave:{during:t,start:t,end:t},in(r=()=>{},i=()=>{}){Gs(n,e,{during:this.enter.during,start:this.enter.start,end:this.enter.end},r,i)},out(r=()=>{},i=()=>{}){Gs(n,e,{during:this.leave.during,start:this.leave.start,end:this.leave.end},r,i)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(n,e,t,r){const i=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let s=()=>i(t);if(e){n._x_transition&&(n._x_transition.enter||n._x_transition.leave)?n._x_transition.enter&&(Object.entries(n._x_transition.enter.during).length||Object.entries(n._x_transition.enter.start).length||Object.entries(n._x_transition.enter.end).length)?n._x_transition.in(t):s():n._x_transition?n._x_transition.in(t):s();return}n._x_hidePromise=n._x_transition?new Promise((o,a)=>{n._x_transition.out(()=>{},()=>o(r)),n._x_transitioning&&n._x_transitioning.beforeCancel(()=>a({isFromCancelledTransition:!0}))}):Promise.resolve(r),queueMicrotask(()=>{let o=Fu(n);o?(o._x_hideChildren||(o._x_hideChildren=[]),o._x_hideChildren.push(n)):i(()=>{let a=l=>{let h=Promise.all([l._x_hidePromise,...(l._x_hideChildren||[]).map(a)]).then(([u])=>u());return delete l._x_hidePromise,delete l._x_hideChildren,h};a(n).catch(l=>{if(!l.isFromCancelledTransition)throw l})})})};function Fu(n){let e=n.parentNode;if(e)return e._x_hidePromise?e:Fu(e)}function Gs(n,e,{during:t,start:r,end:i}={},s=()=>{},o=()=>{}){if(n._x_transitioning&&n._x_transitioning.cancel(),Object.keys(t).length===0&&Object.keys(r).length===0&&Object.keys(i).length===0){s(),o();return}let a,l,h;Ey(n,{start(){a=e(n,r)},during(){l=e(n,t)},before:s,end(){a(),h=e(n,i)},after:o,cleanup(){l(),h()}})}function Ey(n,e){let t,r,i,s=Js(()=>{pe(()=>{t=!0,r||e.before(),i||(e.end(),Vs()),e.after(),n.isConnected&&e.cleanup(),delete n._x_transitioning})});n._x_transitioning={beforeCancels:[],beforeCancel(o){this.beforeCancels.push(o)},cancel:Js(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();s()}),finish:s},pe(()=>{e.start(),e.during()}),wy(),requestAnimationFrame(()=>{if(t)return;let o=Number(getComputedStyle(n).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,a=Number(getComputedStyle(n).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;o===0&&(o=Number(getComputedStyle(n).animationDuration.replace("s",""))*1e3),pe(()=>{e.before()}),r=!0,requestAnimationFrame(()=>{t||(pe(()=>{e.end()}),Vs(),setTimeout(n._x_transitioning.finish,o+a),i=!0)})})}function Mn(n,e,t){if(n.indexOf(e)===-1)return t;const r=n[n.indexOf(e)+1];if(!r||e==="scale"&&isNaN(r))return t;if(e==="duration"||e==="delay"){let i=r.match(/([0-9]+)ms/);if(i)return i[1]}return e==="origin"&&["top","right","left","center","bottom"].includes(n[n.indexOf(e)+2])?[r,n[n.indexOf(e)+2]].join(" "):r}var St=!1;function ar(n,e=()=>{}){return(...t)=>St?e(...t):n(...t)}function Cy(n){return(...e)=>St&&n(...e)}var zu=[];function ju(n){zu.push(n)}function Ay(n,e){zu.forEach(t=>t(n,e)),St=!0,Uu(()=>{dt(e,(t,r)=>{r(t,()=>{})})}),St=!1}var Ks=!1;function Oy(n,e){e._x_dataStack||(e._x_dataStack=n._x_dataStack),St=!0,Ks=!0,Uu(()=>{Ty(e)}),St=!1,Ks=!1}function Ty(n){let e=!1;dt(n,(r,i)=>{xt(r,(s,o)=>{if(e&&Ym(s))return o();e=!0,i(s,o)})})}function Uu(n){let e=bn;yl((t,r)=>{let i=e(t);return ir(i),()=>{}}),n(),yl(e)}function Hu(n,e,t,r=[]){switch(n._x_bindings||(n._x_bindings=vn({})),n._x_bindings[e]=t,e=r.includes("camel")?$y(e):e,e){case"value":Ry(n,t);break;case"style":Py(n,t);break;case"class":Iy(n,t);break;case"selected":case"checked":Ly(n,e,t);break;default:Wu(n,e,t);break}}function Ry(n,e){if(n.type==="radio")n.attributes.value===void 0&&(n.value=e),window.fromModel&&(typeof e=="boolean"?n.checked=jr(n.value)===e:n.checked=bl(n.value,e));else if(n.type==="checkbox")Number.isInteger(e)?n.value=e:!Array.isArray(e)&&typeof e!="boolean"&&![null,void 0].includes(e)?n.value=String(e):Array.isArray(e)?n.checked=e.some(t=>bl(t,n.value)):n.checked=!!e;else if(n.tagName==="SELECT")Dy(n,e);else{if(n.value===e)return;n.value=e===void 0?"":e}}function Iy(n,e){n._x_undoAddedClasses&&n._x_undoAddedClasses(),n._x_undoAddedClasses=Ho(n,e)}function Py(n,e){n._x_undoAddedStyles&&n._x_undoAddedStyles(),n._x_undoAddedStyles=Li(n,e)}function Ly(n,e,t){Wu(n,e,t),Ny(n,e,t)}function Wu(n,e,t){[null,void 0,!1].includes(t)&&By(e)?n.removeAttribute(e):(qu(e)&&(t=e),My(n,e,t))}function My(n,e,t){n.getAttribute(e)!=t&&n.setAttribute(e,t)}function Ny(n,e,t){n[e]!==t&&(n[e]=t)}function Dy(n,e){const t=[].concat(e).map(r=>r+"");Array.from(n.options).forEach(r=>{r.selected=t.includes(r.value)})}function $y(n){return n.toLowerCase().replace(/-(\w)/g,(e,t)=>t.toUpperCase())}function bl(n,e){return n==e}function jr(n){return[1,"1","true","on","yes",!0].includes(n)?!0:[0,"0","false","off","no",!1].includes(n)?!1:n?!!n:null}function qu(n){return["disabled","checked","required","readonly","hidden","open","selected","autofocus","itemscope","multiple","novalidate","allowfullscreen","allowpaymentrequest","formnovalidate","autoplay","controls","loop","muted","playsinline","default","ismap","reversed","async","defer","nomodule"].includes(n)}function By(n){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(n)}function Fy(n,e,t){return n._x_bindings&&n._x_bindings[e]!==void 0?n._x_bindings[e]:Vu(n,e,t)}function zy(n,e,t,r=!0){if(n._x_bindings&&n._x_bindings[e]!==void 0)return n._x_bindings[e];if(n._x_inlineBindings&&n._x_inlineBindings[e]!==void 0){let i=n._x_inlineBindings[e];return i.extract=r,Cu(()=>zt(n,i.expression))}return Vu(n,e,t)}function Vu(n,e,t){let r=n.getAttribute(e);return r===null?typeof t=="function"?t():t:r===""?!0:qu(e)?!![e,"true"].includes(r):r}function Ju(n,e){var t;return function(){var r=this,i=arguments,s=function(){t=null,n.apply(r,i)};clearTimeout(t),t=setTimeout(s,e)}}function Gu(n,e){let t;return function(){let r=this,i=arguments;t||(n.apply(r,i),t=!0,setTimeout(()=>t=!1,e))}}function Ku({get:n,set:e},{get:t,set:r}){let i=!0,s,o=bn(()=>{const a=n(),l=t();if(i)r(hs(a)),i=!1,s=JSON.stringify(a);else{const h=JSON.stringify(a);h!==s?(r(hs(a)),s=h):(e(hs(l)),s=JSON.stringify(l))}JSON.stringify(t()),JSON.stringify(n())});return()=>{ir(o)}}function hs(n){return typeof n=="object"?JSON.parse(JSON.stringify(n)):n}function jy(n){(Array.isArray(n)?n:[n]).forEach(t=>t(lr))}var Pt={},_l=!1;function Uy(n,e){if(_l||(Pt=vn(Pt),_l=!0),e===void 0)return Pt[n];Pt[n]=e,typeof e=="object"&&e!==null&&e.hasOwnProperty("init")&&typeof e.init=="function"&&Pt[n].init(),xu(Pt[n])}function Hy(){return Pt}var Zu={};function Wy(n,e){let t=typeof e!="function"?()=>e:e;return n instanceof Element?Yu(n,t()):(Zu[n]=t,()=>{})}function qy(n){return Object.entries(Zu).forEach(([e,t])=>{Object.defineProperty(n,e,{get(){return(...r)=>t(...r)}})}),n}function Yu(n,e,t){let r=[];for(;r.length;)r.pop()();let i=Object.entries(e).map(([o,a])=>({name:o,value:a})),s=Tu(i);return i=i.map(o=>s.find(a=>a.name===o.name)?{name:`x-bind:${o.name}`,value:`"${o.value}"`}:o),Fo(n,i,t).map(o=>{r.push(o.runCleanups),o()}),()=>{for(;r.length;)r.pop()()}}var Xu={};function Vy(n,e){Xu[n]=e}function Jy(n,e){return Object.entries(Xu).forEach(([t,r])=>{Object.defineProperty(n,t,{get(){return(...i)=>r.bind(e)(...i)},enumerable:!1})}),n}var Gy={get reactive(){return vn},get release(){return ir},get effect(){return bn},get raw(){return lu},version:"3.13.3",flushAndStopDeferringMutations:iy,dontAutoEvaluateFunctions:Cu,disableEffectScheduling:Jm,startObservingMutations:No,stopObservingMutations:_u,setReactivityEngine:Gm,onAttributeRemoved:vu,onAttributesAdded:wu,closestDataStack:mn,skipDuringClone:ar,onlyDuringClone:Cy,addRootSelector:fu,addInitSelector:du,interceptClone:ju,addScopeToNode:sr,deferMutations:ry,mapAttributes:zo,evaluateLater:ke,interceptInit:Xm,setEvaluator:cy,mergeProxies:or,extractProp:zy,findClosest:Pi,onElRemoved:Po,closestRoot:Ii,destroyTree:Io,interceptor:Su,transition:Gs,setStyles:Li,mutateDom:pe,directive:fe,entangle:Ku,throttle:Gu,debounce:Ju,evaluate:zt,initTree:dt,nextTick:Uo,prefixed:_n,prefix:dy,plugin:jy,magic:Ze,store:Uy,start:Zm,clone:Oy,cloneNode:Ay,bound:Fy,$data:ku,walk:xt,data:Vy,bind:Wy},lr=Gy;function Ky(n,e){const t=Object.create(null),r=n.split(",");for(let i=0;i<r.length;i++)t[r[i]]=!0;return e?i=>!!t[i.toLowerCase()]:i=>!!t[i]}var Zy=Object.freeze({}),Yy=Object.prototype.hasOwnProperty,Mi=(n,e)=>Yy.call(n,e),jt=Array.isArray,Vn=n=>Qu(n)==="[object Map]",Xy=n=>typeof n=="string",Wo=n=>typeof n=="symbol",Ni=n=>n!==null&&typeof n=="object",Qy=Object.prototype.toString,Qu=n=>Qy.call(n),eh=n=>Qu(n).slice(8,-1),qo=n=>Xy(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,ew=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},tw=ew(n=>n.charAt(0).toUpperCase()+n.slice(1)),th=(n,e)=>n!==e&&(n===n||e===e),Zs=new WeakMap,Nn=[],Xe,Ut=Symbol("iterate"),Ys=Symbol("Map key iterate");function nw(n){return n&&n._isEffect===!0}function rw(n,e=Zy){nw(n)&&(n=n.raw);const t=ow(n,e);return e.lazy||t(),t}function iw(n){n.active&&(nh(n),n.options.onStop&&n.options.onStop(),n.active=!1)}var sw=0;function ow(n,e){const t=function(){if(!t.active)return n();if(!Nn.includes(t)){nh(t);try{return lw(),Nn.push(t),Xe=t,n()}finally{Nn.pop(),rh(),Xe=Nn[Nn.length-1]}}};return t.id=sw++,t.allowRecurse=!!e.allowRecurse,t._isEffect=!0,t.active=!0,t.raw=n,t.deps=[],t.options=e,t}function nh(n){const{deps:e}=n;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(n);e.length=0}}var yn=!0,Vo=[];function aw(){Vo.push(yn),yn=!1}function lw(){Vo.push(yn),yn=!0}function rh(){const n=Vo.pop();yn=n===void 0?!0:n}function Ge(n,e,t){if(!yn||Xe===void 0)return;let r=Zs.get(n);r||Zs.set(n,r=new Map);let i=r.get(t);i||r.set(t,i=new Set),i.has(Xe)||(i.add(Xe),Xe.deps.push(i),Xe.options.onTrack&&Xe.options.onTrack({effect:Xe,target:n,type:e,key:t}))}function Et(n,e,t,r,i,s){const o=Zs.get(n);if(!o)return;const a=new Set,l=u=>{u&&u.forEach(d=>{(d!==Xe||d.allowRecurse)&&a.add(d)})};if(e==="clear")o.forEach(l);else if(t==="length"&&jt(n))o.forEach((u,d)=>{(d==="length"||d>=r)&&l(u)});else switch(t!==void 0&&l(o.get(t)),e){case"add":jt(n)?qo(t)&&l(o.get("length")):(l(o.get(Ut)),Vn(n)&&l(o.get(Ys)));break;case"delete":jt(n)||(l(o.get(Ut)),Vn(n)&&l(o.get(Ys)));break;case"set":Vn(n)&&l(o.get(Ut));break}const h=u=>{u.options.onTrigger&&u.options.onTrigger({effect:u,target:n,key:t,type:e,newValue:r,oldValue:i,oldTarget:s}),u.options.scheduler?u.options.scheduler(u):u()};a.forEach(h)}var cw=Ky("__proto__,__v_isRef,__isVue"),ih=new Set(Object.getOwnPropertyNames(Symbol).map(n=>Symbol[n]).filter(Wo)),uw=sh(),hw=sh(!0),kl=fw();function fw(){const n={};return["includes","indexOf","lastIndexOf"].forEach(e=>{n[e]=function(...t){const r=le(this);for(let s=0,o=this.length;s<o;s++)Ge(r,"get",s+"");const i=r[e](...t);return i===-1||i===!1?r[e](...t.map(le)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{n[e]=function(...t){aw();const r=le(this)[e].apply(this,t);return rh(),r}}),n}function sh(n=!1,e=!1){return function(r,i,s){if(i==="__v_isReactive")return!n;if(i==="__v_isReadonly")return n;if(i==="__v_raw"&&s===(n?e?Ow:ch:e?Aw:lh).get(r))return r;const o=jt(r);if(!n&&o&&Mi(kl,i))return Reflect.get(kl,i,s);const a=Reflect.get(r,i,s);return(Wo(i)?ih.has(i):cw(i))||(n||Ge(r,"get",i),e)?a:Xs(a)?!o||!qo(i)?a.value:a:Ni(a)?n?uh(a):Zo(a):a}}var dw=pw();function pw(n=!1){return function(t,r,i,s){let o=t[r];if(!n&&(i=le(i),o=le(o),!jt(t)&&Xs(o)&&!Xs(i)))return o.value=i,!0;const a=jt(t)&&qo(r)?Number(r)<t.length:Mi(t,r),l=Reflect.set(t,r,i,s);return t===le(s)&&(a?th(i,o)&&Et(t,"set",r,i,o):Et(t,"add",r,i)),l}}function gw(n,e){const t=Mi(n,e),r=n[e],i=Reflect.deleteProperty(n,e);return i&&t&&Et(n,"delete",e,void 0,r),i}function mw(n,e){const t=Reflect.has(n,e);return(!Wo(e)||!ih.has(e))&&Ge(n,"has",e),t}function yw(n){return Ge(n,"iterate",jt(n)?"length":Ut),Reflect.ownKeys(n)}var ww={get:uw,set:dw,deleteProperty:gw,has:mw,ownKeys:yw},vw={get:hw,set(n,e){return console.warn(`Set operation on key "${String(e)}" failed: target is readonly.`,n),!0},deleteProperty(n,e){return console.warn(`Delete operation on key "${String(e)}" failed: target is readonly.`,n),!0}},Jo=n=>Ni(n)?Zo(n):n,Go=n=>Ni(n)?uh(n):n,Ko=n=>n,Di=n=>Reflect.getPrototypeOf(n);function Ar(n,e,t=!1,r=!1){n=n.__v_raw;const i=le(n),s=le(e);e!==s&&!t&&Ge(i,"get",e),!t&&Ge(i,"get",s);const{has:o}=Di(i),a=r?Ko:t?Go:Jo;if(o.call(i,e))return a(n.get(e));if(o.call(i,s))return a(n.get(s));n!==i&&n.get(e)}function Or(n,e=!1){const t=this.__v_raw,r=le(t),i=le(n);return n!==i&&!e&&Ge(r,"has",n),!e&&Ge(r,"has",i),n===i?t.has(n):t.has(n)||t.has(i)}function Tr(n,e=!1){return n=n.__v_raw,!e&&Ge(le(n),"iterate",Ut),Reflect.get(n,"size",n)}function xl(n){n=le(n);const e=le(this);return Di(e).has.call(e,n)||(e.add(n),Et(e,"add",n,n)),this}function Sl(n,e){e=le(e);const t=le(this),{has:r,get:i}=Di(t);let s=r.call(t,n);s?ah(t,r,n):(n=le(n),s=r.call(t,n));const o=i.call(t,n);return t.set(n,e),s?th(e,o)&&Et(t,"set",n,e,o):Et(t,"add",n,e),this}function El(n){const e=le(this),{has:t,get:r}=Di(e);let i=t.call(e,n);i?ah(e,t,n):(n=le(n),i=t.call(e,n));const s=r?r.call(e,n):void 0,o=e.delete(n);return i&&Et(e,"delete",n,void 0,s),o}function Cl(){const n=le(this),e=n.size!==0,t=Vn(n)?new Map(n):new Set(n),r=n.clear();return e&&Et(n,"clear",void 0,void 0,t),r}function Rr(n,e){return function(r,i){const s=this,o=s.__v_raw,a=le(o),l=e?Ko:n?Go:Jo;return!n&&Ge(a,"iterate",Ut),o.forEach((h,u)=>r.call(i,l(h),l(u),s))}}function Ir(n,e,t){return function(...r){const i=this.__v_raw,s=le(i),o=Vn(s),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,h=i[n](...r),u=t?Ko:e?Go:Jo;return!e&&Ge(s,"iterate",l?Ys:Ut),{next(){const{value:d,done:f}=h.next();return f?{value:d,done:f}:{value:a?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function vt(n){return function(...e){{const t=e[0]?`on key "${e[0]}" `:"";console.warn(`${tw(n)} operation ${t}failed: target is readonly.`,le(this))}return n==="delete"?!1:this}}function bw(){const n={get(s){return Ar(this,s)},get size(){return Tr(this)},has:Or,add:xl,set:Sl,delete:El,clear:Cl,forEach:Rr(!1,!1)},e={get(s){return Ar(this,s,!1,!0)},get size(){return Tr(this)},has:Or,add:xl,set:Sl,delete:El,clear:Cl,forEach:Rr(!1,!0)},t={get(s){return Ar(this,s,!0)},get size(){return Tr(this,!0)},has(s){return Or.call(this,s,!0)},add:vt("add"),set:vt("set"),delete:vt("delete"),clear:vt("clear"),forEach:Rr(!0,!1)},r={get(s){return Ar(this,s,!0,!0)},get size(){return Tr(this,!0)},has(s){return Or.call(this,s,!0)},add:vt("add"),set:vt("set"),delete:vt("delete"),clear:vt("clear"),forEach:Rr(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=Ir(s,!1,!1),t[s]=Ir(s,!0,!1),e[s]=Ir(s,!1,!0),r[s]=Ir(s,!0,!0)}),[n,t,e,r]}var[_w,kw,xw,Sw]=bw();function oh(n,e){const t=e?n?Sw:xw:n?kw:_w;return(r,i,s)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?r:Reflect.get(Mi(t,i)&&i in r?t:r,i,s)}var Ew={get:oh(!1,!1)},Cw={get:oh(!0,!1)};function ah(n,e,t){const r=le(t);if(r!==t&&e.call(n,r)){const i=eh(n);console.warn(`Reactive ${i} contains both the raw and reactive versions of the same object${i==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var lh=new WeakMap,Aw=new WeakMap,ch=new WeakMap,Ow=new WeakMap;function Tw(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Rw(n){return n.__v_skip||!Object.isExtensible(n)?0:Tw(eh(n))}function Zo(n){return n&&n.__v_isReadonly?n:hh(n,!1,ww,Ew,lh)}function uh(n){return hh(n,!0,vw,Cw,ch)}function hh(n,e,t,r,i){if(!Ni(n))return console.warn(`value cannot be made reactive: ${String(n)}`),n;if(n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=i.get(n);if(s)return s;const o=Rw(n);if(o===0)return n;const a=new Proxy(n,o===2?r:t);return i.set(n,a),a}function le(n){return n&&le(n.__v_raw)||n}function Xs(n){return!!(n&&n.__v_isRef===!0)}Ze("nextTick",()=>Uo);Ze("dispatch",n=>Wn.bind(Wn,n));Ze("watch",(n,{evaluateLater:e,effect:t})=>(r,i)=>{let s=e(r),o=!0,a,l=t(()=>s(h=>{JSON.stringify(h),o?a=h:queueMicrotask(()=>{i(h,a),a=h}),o=!1}));n._x_effects.delete(l)});Ze("store",Hy);Ze("data",n=>ku(n));Ze("root",n=>Ii(n));Ze("refs",n=>(n._x_refs_proxy||(n._x_refs_proxy=or(Iw(n))),n._x_refs_proxy));function Iw(n){let e=[],t=n;for(;t;)t._x_refs&&e.push(t._x_refs),t=t.parentNode;return e}var fs={};function fh(n){return fs[n]||(fs[n]=0),++fs[n]}function Pw(n,e){return Pi(n,t=>{if(t._x_ids&&t._x_ids[e])return!0})}function Lw(n,e){n._x_ids||(n._x_ids={}),n._x_ids[e]||(n._x_ids[e]=fh(e))}Ze("id",n=>(e,t=null)=>{let r=Pw(n,e),i=r?r._x_ids[e]:fh(e);return t?`${e}-${i}-${t}`:`${e}-${i}`});Ze("el",n=>n);dh("Focus","focus","focus");dh("Persist","persist","persist");function dh(n,e,t){Ze(e,r=>ft(`You can't use [$${e}] without first installing the "${n}" plugin here: https://alpinejs.dev/plugins/${t}`,r))}fe("modelable",(n,{expression:e},{effect:t,evaluateLater:r,cleanup:i})=>{let s=r(e),o=()=>{let u;return s(d=>u=d),u},a=r(`${e} = __placeholder`),l=u=>a(()=>{},{scope:{__placeholder:u}}),h=o();l(h),queueMicrotask(()=>{if(!n._x_model)return;n._x_removeModelListeners.default();let u=n._x_model.get,d=n._x_model.set,f=Ku({get(){return u()},set(p){d(p)}},{get(){return o()},set(p){l(p)}});i(f)})});fe("teleport",(n,{modifiers:e,expression:t},{cleanup:r})=>{n.tagName.toLowerCase()!=="template"&&ft("x-teleport can only be used on a <template> tag",n);let i=Al(t),s=n.content.cloneNode(!0).firstElementChild;n._x_teleport=s,s._x_teleportBack=n,n.setAttribute("data-teleport-template",!0),s.setAttribute("data-teleport-target",!0),n._x_forwardEvents&&n._x_forwardEvents.forEach(a=>{s.addEventListener(a,l=>{l.stopPropagation(),n.dispatchEvent(new l.constructor(l.type,l))})}),sr(s,{},n);let o=(a,l,h)=>{h.includes("prepend")?l.parentNode.insertBefore(a,l):h.includes("append")?l.parentNode.insertBefore(a,l.nextSibling):l.appendChild(a)};pe(()=>{o(s,i,e),dt(s),s._x_ignore=!0}),n._x_teleportPutBack=()=>{let a=Al(t);pe(()=>{o(n._x_teleport,a,e)})},r(()=>s.remove())});var Mw=document.createElement("div");function Al(n){let e=ar(()=>document.querySelector(n),()=>Mw)();return e||ft(`Cannot find x-teleport element for selector: "${n}"`),e}var ph=()=>{};ph.inline=(n,{modifiers:e},{cleanup:t})=>{e.includes("self")?n._x_ignoreSelf=!0:n._x_ignore=!0,t(()=>{e.includes("self")?delete n._x_ignoreSelf:delete n._x_ignore})};fe("ignore",ph);fe("effect",ar((n,{expression:e},{effect:t})=>{t(ke(n,e))}));function Qs(n,e,t,r){let i=n,s=l=>r(l),o={},a=(l,h)=>u=>h(l,u);if(t.includes("dot")&&(e=Nw(e)),t.includes("camel")&&(e=Dw(e)),t.includes("passive")&&(o.passive=!0),t.includes("capture")&&(o.capture=!0),t.includes("window")&&(i=window),t.includes("document")&&(i=document),t.includes("debounce")){let l=t[t.indexOf("debounce")+1]||"invalid-wait",h=ci(l.split("ms")[0])?Number(l.split("ms")[0]):250;s=Ju(s,h)}if(t.includes("throttle")){let l=t[t.indexOf("throttle")+1]||"invalid-wait",h=ci(l.split("ms")[0])?Number(l.split("ms")[0]):250;s=Gu(s,h)}return t.includes("prevent")&&(s=a(s,(l,h)=>{h.preventDefault(),l(h)})),t.includes("stop")&&(s=a(s,(l,h)=>{h.stopPropagation(),l(h)})),t.includes("self")&&(s=a(s,(l,h)=>{h.target===n&&l(h)})),(t.includes("away")||t.includes("outside"))&&(i=document,s=a(s,(l,h)=>{n.contains(h.target)||h.target.isConnected!==!1&&(n.offsetWidth<1&&n.offsetHeight<1||n._x_isShown!==!1&&l(h))})),t.includes("once")&&(s=a(s,(l,h)=>{l(h),i.removeEventListener(e,s,o)})),s=a(s,(l,h)=>{Bw(e)&&Fw(h,t)||l(h)}),i.addEventListener(e,s,o),()=>{i.removeEventListener(e,s,o)}}function Nw(n){return n.replace(/-/g,".")}function Dw(n){return n.toLowerCase().replace(/-(\w)/g,(e,t)=>t.toUpperCase())}function ci(n){return!Array.isArray(n)&&!isNaN(n)}function $w(n){return[" ","_"].includes(n)?n:n.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function Bw(n){return["keydown","keyup"].includes(n)}function Fw(n,e){let t=e.filter(s=>!["window","document","prevent","stop","once","capture"].includes(s));if(t.includes("debounce")){let s=t.indexOf("debounce");t.splice(s,ci((t[s+1]||"invalid-wait").split("ms")[0])?2:1)}if(t.includes("throttle")){let s=t.indexOf("throttle");t.splice(s,ci((t[s+1]||"invalid-wait").split("ms")[0])?2:1)}if(t.length===0||t.length===1&&Ol(n.key).includes(t[0]))return!1;const i=["ctrl","shift","alt","meta","cmd","super"].filter(s=>t.includes(s));return t=t.filter(s=>!i.includes(s)),!(i.length>0&&i.filter(o=>((o==="cmd"||o==="super")&&(o="meta"),n[`${o}Key`])).length===i.length&&Ol(n.key).includes(t[0]))}function Ol(n){if(!n)return[];n=$w(n);let e={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",equal:"=",minus:"-",underscore:"_"};return e[n]=n,Object.keys(e).map(t=>{if(e[t]===n)return t}).filter(t=>t)}fe("model",(n,{modifiers:e,expression:t},{effect:r,cleanup:i})=>{let s=n;e.includes("parent")&&(s=n.parentNode);let o=ke(s,t),a;typeof t=="string"?a=ke(s,`${t} = __placeholder`):typeof t=="function"&&typeof t()=="string"?a=ke(s,`${t()} = __placeholder`):a=()=>{};let l=()=>{let f;return o(p=>f=p),Tl(f)?f.get():f},h=f=>{let p;o(c=>p=c),Tl(p)?p.set(f):a(()=>{},{scope:{__placeholder:f}})};typeof t=="string"&&n.type==="radio"&&pe(()=>{n.hasAttribute("name")||n.setAttribute("name",t)});var u=n.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(n.type)||e.includes("lazy")?"change":"input";let d=St?()=>{}:Qs(n,u,e,f=>{h(zw(n,e,f,l()))});if(e.includes("fill")&&([null,""].includes(l())||n.type==="checkbox"&&Array.isArray(l()))&&n.dispatchEvent(new Event(u,{})),n._x_removeModelListeners||(n._x_removeModelListeners={}),n._x_removeModelListeners.default=d,i(()=>n._x_removeModelListeners.default()),n.form){let f=Qs(n.form,"reset",[],p=>{Uo(()=>n._x_model&&n._x_model.set(n.value))});i(()=>f())}n._x_model={get(){return l()},set(f){h(f)}},n._x_forceModelUpdate=f=>{f===void 0&&typeof t=="string"&&t.match(/\./)&&(f=""),window.fromModel=!0,pe(()=>Hu(n,"value",f)),delete window.fromModel},r(()=>{let f=l();e.includes("unintrusive")&&document.activeElement.isSameNode(n)||n._x_forceModelUpdate(f)})});function zw(n,e,t,r){return pe(()=>{if(t instanceof CustomEvent&&t.detail!==void 0)return t.detail!==null&&t.detail!==void 0?t.detail:t.target.value;if(n.type==="checkbox")if(Array.isArray(r)){let i=null;return e.includes("number")?i=ds(t.target.value):e.includes("boolean")?i=jr(t.target.value):i=t.target.value,t.target.checked?r.concat([i]):r.filter(s=>!jw(s,i))}else return t.target.checked;else return n.tagName.toLowerCase()==="select"&&n.multiple?e.includes("number")?Array.from(t.target.selectedOptions).map(i=>{let s=i.value||i.text;return ds(s)}):e.includes("boolean")?Array.from(t.target.selectedOptions).map(i=>{let s=i.value||i.text;return jr(s)}):Array.from(t.target.selectedOptions).map(i=>i.value||i.text):e.includes("number")?ds(t.target.value):e.includes("boolean")?jr(t.target.value):e.includes("trim")?t.target.value.trim():t.target.value})}function ds(n){let e=n?parseFloat(n):null;return Uw(e)?e:n}function jw(n,e){return n==e}function Uw(n){return!Array.isArray(n)&&!isNaN(n)}function Tl(n){return n!==null&&typeof n=="object"&&typeof n.get=="function"&&typeof n.set=="function"}fe("cloak",n=>queueMicrotask(()=>pe(()=>n.removeAttribute(_n("cloak")))));du(()=>`[${_n("init")}]`);fe("init",ar((n,{expression:e},{evaluate:t})=>typeof e=="string"?!!e.trim()&&t(e,{},!1):t(e,{},!1)));fe("text",(n,{expression:e},{effect:t,evaluateLater:r})=>{let i=r(e);t(()=>{i(s=>{pe(()=>{n.textContent=s})})})});fe("html",(n,{expression:e},{effect:t,evaluateLater:r})=>{let i=r(e);t(()=>{i(s=>{pe(()=>{n.innerHTML=s,n._x_ignoreSelf=!0,dt(n),delete n._x_ignoreSelf})})})});zo(Pu(":",Lu(_n("bind:"))));var gh=(n,{value:e,modifiers:t,expression:r,original:i},{effect:s})=>{if(!e){let a={};qy(a),ke(n,r)(h=>{Yu(n,h,i)},{scope:a});return}if(e==="key")return Hw(n,r);if(n._x_inlineBindings&&n._x_inlineBindings[e]&&n._x_inlineBindings[e].extract)return;let o=ke(n,r);s(()=>o(a=>{a===void 0&&typeof r=="string"&&r.match(/\./)&&(a=""),pe(()=>Hu(n,e,a,t))}))};gh.inline=(n,{value:e,modifiers:t,expression:r})=>{e&&(n._x_inlineBindings||(n._x_inlineBindings={}),n._x_inlineBindings[e]={expression:r,extract:!1})};fe("bind",gh);function Hw(n,e){n._x_keyExpression=e}fu(()=>`[${_n("data")}]`);fe("data",(n,{expression:e},{cleanup:t})=>{if(Ww(n))return;e=e===""?"{}":e;let r={};js(r,n);let i={};Jy(i,r);let s=zt(n,e,{scope:i});(s===void 0||s===!0)&&(s={}),js(s,n);let o=vn(s);xu(o);let a=sr(n,o);o.init&&zt(n,o.init),t(()=>{o.destroy&&zt(n,o.destroy),a()})});ju((n,e)=>{n._x_dataStack&&(e._x_dataStack=n._x_dataStack,e.setAttribute("data-has-alpine-state",!0))});function Ww(n){return St?Ks?!0:n.hasAttribute("data-has-alpine-state"):!1}fe("show",(n,{modifiers:e,expression:t},{effect:r})=>{let i=ke(n,t);n._x_doHide||(n._x_doHide=()=>{pe(()=>{n.style.setProperty("display","none",e.includes("important")?"important":void 0)})}),n._x_doShow||(n._x_doShow=()=>{pe(()=>{n.style.length===1&&n.style.display==="none"?n.removeAttribute("style"):n.style.removeProperty("display")})});let s=()=>{n._x_doHide(),n._x_isShown=!1},o=()=>{n._x_doShow(),n._x_isShown=!0},a=()=>setTimeout(o),l=Js(d=>d?o():s(),d=>{typeof n._x_toggleAndCascadeWithTransitions=="function"?n._x_toggleAndCascadeWithTransitions(n,d,o,s):d?a():s()}),h,u=!0;r(()=>i(d=>{!u&&d===h||(e.includes("immediate")&&(d?a():s()),l(d),h=d,u=!1)}))});fe("for",(n,{expression:e},{effect:t,cleanup:r})=>{let i=Vw(e),s=ke(n,i.items),o=ke(n,n._x_keyExpression||"index");n._x_prevKeys=[],n._x_lookup={},t(()=>qw(n,i,s,o)),r(()=>{Object.values(n._x_lookup).forEach(a=>a.remove()),delete n._x_prevKeys,delete n._x_lookup})});function qw(n,e,t,r){let i=o=>typeof o=="object"&&!Array.isArray(o),s=n;t(o=>{Jw(o)&&o>=0&&(o=Array.from(Array(o).keys(),m=>m+1)),o===void 0&&(o=[]);let a=n._x_lookup,l=n._x_prevKeys,h=[],u=[];if(i(o))o=Object.entries(o).map(([m,y])=>{let w=Rl(e,y,m,o);r(_=>u.push(_),{scope:{index:m,...w}}),h.push(w)});else for(let m=0;m<o.length;m++){let y=Rl(e,o[m],m,o);r(w=>u.push(w),{scope:{index:m,...y}}),h.push(y)}let d=[],f=[],p=[],c=[];for(let m=0;m<l.length;m++){let y=l[m];u.indexOf(y)===-1&&p.push(y)}l=l.filter(m=>!p.includes(m));let g="template";for(let m=0;m<u.length;m++){let y=u[m],w=l.indexOf(y);if(w===-1)l.splice(m,0,y),d.push([g,m]);else if(w!==m){let _=l.splice(m,1)[0],b=l.splice(w-1,1)[0];l.splice(m,0,b),l.splice(w,0,_),f.push([_,b])}else c.push(y);g=y}for(let m=0;m<p.length;m++){let y=p[m];a[y]._x_effects&&a[y]._x_effects.forEach(au),a[y].remove(),a[y]=null,delete a[y]}for(let m=0;m<f.length;m++){let[y,w]=f[m],_=a[y],b=a[w],v=document.createElement("div");pe(()=>{b||ft('x-for ":key" is undefined or invalid',s),b.after(v),_.after(b),b._x_currentIfEl&&b.after(b._x_currentIfEl),v.before(_),_._x_currentIfEl&&_.after(_._x_currentIfEl),v.remove()}),b._x_refreshXForScope(h[u.indexOf(w)])}for(let m=0;m<d.length;m++){let[y,w]=d[m],_=y==="template"?s:a[y];_._x_currentIfEl&&(_=_._x_currentIfEl);let b=h[w],v=u[w],E=document.importNode(s.content,!0).firstElementChild,k=vn(b);sr(E,k,s),E._x_refreshXForScope=D=>{Object.entries(D).forEach(([L,C])=>{k[L]=C})},pe(()=>{_.after(E),dt(E)}),typeof v=="object"&&ft("x-for key cannot be an object, it must be a string or an integer",s),a[v]=E}for(let m=0;m<c.length;m++)a[c[m]]._x_refreshXForScope(h[u.indexOf(c[m])]);s._x_prevKeys=u})}function Vw(n){let e=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,t=/^\s*\(|\)\s*$/g,r=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,i=n.match(r);if(!i)return;let s={};s.items=i[2].trim();let o=i[1].replace(t,"").trim(),a=o.match(e);return a?(s.item=o.replace(e,"").trim(),s.index=a[1].trim(),a[2]&&(s.collection=a[2].trim())):s.item=o,s}function Rl(n,e,t,r){let i={};return/^\[.*\]$/.test(n.item)&&Array.isArray(e)?n.item.replace("[","").replace("]","").split(",").map(o=>o.trim()).forEach((o,a)=>{i[o]=e[a]}):/^\{.*\}$/.test(n.item)&&!Array.isArray(e)&&typeof e=="object"?n.item.replace("{","").replace("}","").split(",").map(o=>o.trim()).forEach(o=>{i[o]=e[o]}):i[n.item]=e,n.index&&(i[n.index]=t),n.collection&&(i[n.collection]=r),i}function Jw(n){return!Array.isArray(n)&&!isNaN(n)}function mh(){}mh.inline=(n,{expression:e},{cleanup:t})=>{let r=Ii(n);r._x_refs||(r._x_refs={}),r._x_refs[e]=n,t(()=>delete r._x_refs[e])};fe("ref",mh);fe("if",(n,{expression:e},{effect:t,cleanup:r})=>{n.tagName.toLowerCase()!=="template"&&ft("x-if can only be used on a <template> tag",n);let i=ke(n,e),s=()=>{if(n._x_currentIfEl)return n._x_currentIfEl;let a=n.content.cloneNode(!0).firstElementChild;return sr(a,{},n),pe(()=>{n.after(a),dt(a)}),n._x_currentIfEl=a,n._x_undoIf=()=>{xt(a,l=>{l._x_effects&&l._x_effects.forEach(au)}),a.remove(),delete n._x_currentIfEl},a},o=()=>{n._x_undoIf&&(n._x_undoIf(),delete n._x_undoIf)};t(()=>i(a=>{a?s():o()})),r(()=>n._x_undoIf&&n._x_undoIf())});fe("id",(n,{expression:e},{evaluate:t})=>{t(e).forEach(i=>Lw(n,i))});zo(Pu("@",Lu(_n("on:"))));fe("on",ar((n,{value:e,modifiers:t,expression:r},{cleanup:i})=>{let s=r?ke(n,r):()=>{};n.tagName.toLowerCase()==="template"&&(n._x_forwardEvents||(n._x_forwardEvents=[]),n._x_forwardEvents.includes(e)||n._x_forwardEvents.push(e));let o=Qs(n,e,t,a=>{s(()=>{},{scope:{$event:a},params:[a]})});i(()=>o())}));$i("Collapse","collapse","collapse");$i("Intersect","intersect","intersect");$i("Focus","trap","focus");$i("Mask","mask","mask");function $i(n,e,t){fe(e,r=>ft(`You can't use [x-${e}] without first installing the "${n}" plugin here: https://alpinejs.dev/plugins/${t}`,r))}lr.setEvaluator(Ou);lr.setReactivityEngine({reactive:Zo,effect:rw,release:iw,raw:le});var Gw=lr,cv=Gw;const uv=async function(n){const{username:e,password:t}=n,r=window.client.services.get("auth");r.info("Attempt login",e||"[AuthenticatedUser]");let i=null;if(!e&&!t)i=await r.getAuthenticatedUser(),i||(i=await r.tryAutoLogin());else if(i=await r.login(e,t),!i)throw new Error("Login failed! Please check your username and password.");return i?r.success("LoginSuccess",e||i.username):r.warn("LoginFailure",e),i?window.sessionStorage.setItem("uid",i.username):window.sessionStorage.removeItem("uid"),i},hv=function(n){return n!=null&&n!==""&&typeof n=="object"&&Object.keys(n).length>0},fv=function(){return{open:(window.sessionStorage.getItem("uid")??"").length===0,input:{username:"",password:""},newUserRegistration:!1,error:{},async login(){this.error={},this.newUserRegistration?(/^[a-zA-Z0-9]+$/.test(this.input.username)||(this.error.username="Username must be alphanumeric"),this.input.password.length>=8||(this.error.password="Password must be at least 8 characters long")):(this.input.username===""&&(this.error.username="Username is required"),this.input.password===""&&(this.error.password="Password is required")),Object.keys(this.error).length===0?(await this.$dispatch("login",{username:this.input.username,password:this.input.password,newUser:this.newUserRegistration}),console.log("Login event emitted:",this.input.username,this.newUserRegistration)):window.Alpine.store("toasts").createToast("Login Failed! Please try again","login","error")},toggleHeader(){this.newUserRegistration=!this.newUserRegistration}}};export{ev as A,Bt as C,jp as E,qc as I,Qw as J,Xw as M,pm as N,Em as O,io as S,Ha as U,Dt as W,fc as a,We as b,Xd as c,Kc as d,Zw as e,cv as f,Il as g,ym as h,Bn as i,nv as j,tv as k,hv as l,Q as m,uv as n,ae as o,jn as p,lv as q,Yw as r,fv as s};
