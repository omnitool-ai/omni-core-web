import{f as e,j as r,A as l,o,l as u,s as c,n as g,q as h}from"./Login-vJDOVol9.js";window.Alpine=e;const f=window.client=r("vite-frontend",{logger:{level:11}},h);f.use(l,{id:"auth",host:"",authUrl:"/api/v1/auth/login",logoutUrl:"/api/v1/auth/logout",userUrl:"/api/v1/auth/user"},"service");document.addEventListener("alpine:init",()=>{o.status_start("Alpine Init"),e.store("toasts",{counter:0,list:{},isJobRunning:!1,createToast(t,s,n="info",i=2e3){o.info("createToast",t,s,n,i),this.list[s]={id:this.counter++,message:t,type:n,visible:!0},i>0&&setTimeout(()=>{this.destroyToast(s)},i)},destroyToast(t){this.list[t]&&(this.list[t].visible=!1)}}),e.data("login",()=>({currentUser:null,isSubmitting:!1,isLogin(){return u(this.currentUser)},loginComponent:c,async tryLogin(t){const{username:s,password:n,newUser:i}=t;try{const a=await g({username:s,password:n,newUser:i});a&&(this.currentUser=a)}catch(a){this.isSubmitting&&(e.store("toasts").createToast(a.message,"login","error"),this.isSubmitting=!1)}},async init(){await this.tryLogin({username:null,password:null,newUser:!1})}}))});e.start();
